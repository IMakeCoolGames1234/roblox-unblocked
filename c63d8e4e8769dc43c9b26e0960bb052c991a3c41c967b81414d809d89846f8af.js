!function(){var n={4717:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"";if((e=document.createElement("script")).src="".concat(c).concat(t),!(t=document.head||document.body))throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(e),e}function a(s){return null!==m?m:(m=new Promise(function(e,t){var n,r,a;if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&s&&console.warn(d),window.Stripe)e(window.Stripe);else try{var o,i=function(){for(var e=document.querySelectorAll('script[src^="'.concat(c,'"]')),t=0;t<e.length;t++){var n=e[t];if(u.test(n.src))return n}return null}();i&&s?console.warn(d):i?i&&null!==f&&null!==p&&(i.removeEventListener("load",f),i.removeEventListener("error",p),null!==(o=i.parentNode)&&void 0!==o&&o.removeChild(i),i=l(s)):i=l(s),r=e,f=function(){window.Stripe?r(window.Stripe):a(new Error("Stripe.js not available"))},n=a=t,p=function(){n(new Error("Failed to load Stripe.js"))},i.addEventListener("load",f),i.addEventListener("error",p)}catch(e){return void t(e)}else e(null)})).catch(function(e){return m=null,Promise.reject(e)})}function r(e){var t="invalid load parameters; expected object of shape\n\n    {advancedFraudSignals: boolean}\n\nbut received\n\n    ".concat(JSON.stringify(e),"\n");if(null===e||"object"!==n(e))throw new Error(t);if(1===Object.keys(e).length&&"boolean"==typeof e.advancedFraudSignals)return e;throw new Error(t)}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s=!0;var r=Date.now();return a(i).then(function(e){return function(e,t,n){if(null===e)return null;e=e.apply(void 0,t);return t=n,(n=e)&&n._registerWrapper&&n._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:t}),e}(e,t,r)})}var i,c="https://js.stripe.com/v3",u=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,d="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",m=null,p=null,f=null,s=!{value:!0};o.setLoadParameters=function(n){if(s&&i){var e=r(n);if(Object.keys(e).reduce(function(e,t){return e&&n[t]===(null===i||void 0===i?void 0:i[t])},!0))return}if(s)throw new Error("You cannot change load parameters after calling loadStripe");i=r(n)},t.loadStripe=o},2949:function(e,t,n){e.exports=n(4717)},5084:function(e){"use strict";var p={single_source_shortest_paths:function(e,t,n){var r={},a={};a[t]=0;var o,i,s,l,c,u,d,m=p.PriorityQueue.make();for(m.push(t,0);!m.empty();)for(s in i=(o=m.pop()).value,l=o.cost,c=e[i]||{})c.hasOwnProperty(s)&&(u=l+c[s],d=a[s],(void 0===a[s]||u<d)&&(a[s]=u,m.push(s,u),r[s]=i));if(void 0===n||void 0!==a[n])return r;n=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(n)},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){t=p.single_source_shortest_paths(e,t,n);return p.extract_shortest_path_from_predecessor_list(t,n)},PriorityQueue:{make:function(e){var t,n=p.PriorityQueue,r={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r.queue=[],r.sorter=e.sorter||n.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){t={value:e,cost:t};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=p},5912:function(e,t,n){var r;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(e,_){"use strict";function r(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},a=Object.keys(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o,s,l,c,u={exports:{}};u.exports=function(){if(c)return l;c=1;var i=s?o:(s=1,o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function r(){}function a(){}return a.resetWarningCache=r,l=function(){function e(e,t,n,r,a,o){if(o!==i){o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n}}()();function T(t,n,e){var r=!!e,a=_.useRef(e);_.useEffect(function(){a.current=e},[e]),_.useEffect(function(){if(!r||!t)return function(){};function e(){a.current&&a.current.apply(a,arguments)}return t.on(n,e),function(){t.off(n,e)}},[r,n,t,a])}function U(e){var t=_.useRef(e);return _.useEffect(function(){t.current=e},[e]),t.current}function b(e){return null!==e&&"object"===t(e)}function h(e,t){if(!b(e)||!b(t))return e===t;var n=Array.isArray(e);if(n!==Array.isArray(t))return!1;var r=Object.prototype.toString.call(e)===g;if(r!=(Object.prototype.toString.call(t)===g))return!1;if(!r&&!n)return e===t;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var i={},s=0;s<a.length;s+=1)i[a[s]]=!0;for(var l=0;l<o.length;l+=1)i[o[l]]=!0;if((n=Object.keys(i)).length!==a.length)return!1;var c=e,u=t;return n.every(function(e){return h(c[e],u[e])})}function A(r,a,o){return b(r)?Object.keys(r).reduce(function(e,t){var n=!b(a)||!h(r[t],a[t]);return o.includes(t)?(n&&console.warn("Unsupported prop change: options.".concat(t," is not a mutable property.")),e):n?p(p({},e||{}),{},i({},t,r[t])):e},null):null}function d(e,t){var n=1<arguments.length&&void 0!==t?t:y;if(null===e||b(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(n)}function v(e,t){var n=1<arguments.length&&void 0!==t?t:y;return b(t=e)&&"function"==typeof t.then?{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return d(e,n)})}:null===(e=d(e,n))?{tag:"empty"}:{tag:"sync",stripe:e}}function E(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.8.0"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.0",url:"https://stripe.com/docs/stripe-js/react"}))}var m=n(u.exports),g="[object Object]",y="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",S=_.createContext(null);S.displayName="ElementsContext";function w(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e}function N(e){var t=e.stripe,r=e.options,n=e.children,a=_.useMemo(function(){return v(t)},[t]),o=(e=k(_.useState(function(){return{stripe:"sync"===a.tag?a.stripe:null,elements:"sync"===a.tag?a.stripe.elements(r):null}}),2))[0],i=e[1];_.useEffect(function(){function t(t){i(function(e){return e.stripe?e:{stripe:t,elements:t.elements(r)}})}var n=!0;return"async"!==a.tag||o.stripe?"sync"!==a.tag||o.stripe||t(a.stripe):a.stripePromise.then(function(e){e&&n&&t(e)}),function(){n=!1}},[a,o,r]);var s=U(t);_.useEffect(function(){null!==s&&s!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[s,t]);var l=U(r);return _.useEffect(function(){var e;!o.elements||(e=A(r,l,["clientSecret","fonts"]))&&o.elements.update(e)},[r,l,o.elements]),_.useEffect(function(){E(o.stripe)},[o.stripe]),_.createElement(S.Provider,{value:o},n)}N.propTypes={stripe:m.any,options:m.object};function C(e){var t=_.useContext(S);return w(t,e)}function x(e){return(0,e.children)(C("mounts <ElementsConsumer>"))}x.propTypes={children:m.func.isRequired};var P=["on","session"],R=_.createContext(null);R.displayName="CustomCheckoutSdkContext";function I(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e}var M=_.createContext(null);M.displayName="CustomCheckoutContext";function O(e){function n(t,n){c(function(e){return e.stripe&&e.customCheckoutSdk?e:{stripe:t,customCheckoutSdk:n}})}var t=e.stripe,r=e.options,a=e.children,o=_.useMemo(function(){return v(t,"Invalid prop `stripe` supplied to `CustomCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[t]),i=(e=k(_.useState(null),2))[0],s=e[1],l=(e=k(_.useState(function(){return{stripe:"sync"===o.tag?o.stripe:null,customCheckoutSdk:null}}),2))[0],c=e[1],u=_.useRef(!1);_.useEffect(function(){var e=!0;return"async"!==o.tag||l.stripe?"sync"===o.tag&&o.stripe&&!u.current&&(u.current=!0,o.stripe.initCustomCheckout(r).then(function(e){e&&(n(o.stripe,e),e.on("change",s))})):o.stripePromise.then(function(t){t&&e&&!u.current&&(u.current=!0,t.initCustomCheckout(r).then(function(e){e&&(n(t,e),e.on("change",s))}))}),function(){e=!1}},[o,l,r,s]);var d=U(t);_.useEffect(function(){null!==d&&d!==t&&console.warn("Unsupported prop change on CustomCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[d,t]);var m=U(r);return _.useEffect(function(){var e,t;l.customCheckoutSdk&&(!r.clientSecret||b(m)||h(r.clientSecret,m.clientSecret)||console.warn("Unsupported prop change: options.client_secret is not a mutable property."),e=null==m||null===(e=m.elementsOptions)||void 0===e?void 0:e.appearance,(t=null==r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance)&&!h(t,e)&&l.customCheckoutSdk.changeAppearance(t))},[r,m,l.customCheckoutSdk]),_.useEffect(function(){E(l.stripe)},[l.stripe]),e=_.useMemo(function(){return function(e,t){if(!e)return null;e.on,e.session;var n=f(e,P);return p(p({},n),t||e.session())}(l.customCheckoutSdk,i)},[l.customCheckoutSdk,i]),l.customCheckoutSdk?_.createElement(R.Provider,{value:l},_.createElement(M.Provider,{value:e},a)):null}O.propTypes={stripe:m.any,options:m.shape({clientSecret:m.string.isRequired,elementsOptions:m.object}).isRequired};function B(e){var t=_.useContext(R),n=_.useContext(S);if(t&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return t?I(t,e):w(n,e)}function F(x,e){var t,P="".concat((t=x).charAt(0).toUpperCase()+t.slice(1),"Element");return(e=e?function(e){B("mounts <".concat(P,">"));var t=e.id,e=e.className;return _.createElement("div",{id:t,className:e})}:function(e){var t,n=e.id,r=e.className,a=e.options,o=void 0===a?{}:a,i=e.onBlur,s=e.onFocus,l=e.onReady,c=e.onChange,u=e.onEscape,d=e.onClick,m=e.onLoadError,p=e.onLoaderStart,f=e.onNetworksChange,b=e.onConfirm,h=e.onCancel,v=e.onShippingAddressChange,a=e.onShippingRateChange,e=B("mounts <".concat(P,">")),E="elements"in e?e.elements:null,g="customCheckoutSdk"in e?e.customCheckoutSdk:null,e=k(_.useState(null),2),y=e[0],S=e[1],w=_.useRef(null),N=_.useRef(null);T(y,"blur",i),T(y,"focus",s),T(y,"escape",u),T(y,"click",d),T(y,"loaderror",m),T(y,"loaderstart",p),T(y,"networkschange",f),T(y,"confirm",b),T(y,"cancel",h),T(y,"shippingaddresschange",v),T(y,"shippingratechange",a),T(y,"change",c),l&&(t="expressCheckout"===x?l:function(){l(y)}),T(y,"ready",t),_.useLayoutEffect(function(){var e;null===w.current&&null!==N.current&&(E||g)&&(e=null,g?e=g.createElement(x,o):E&&(e=E.create(x,o)),w.current=e,S(e),e&&e.mount(N.current))},[E,g,o]);var C=U(o);return _.useEffect(function(){var e;!w.current||(e=A(o,C,["paymentRequest"]))&&w.current.update(e)},[o,C]),_.useLayoutEffect(function(){return function(){if(w.current&&"function"==typeof w.current.destroy)try{w.current.destroy(),w.current=null}catch(e){}}},[]),_.createElement("div",{id:n,className:r,ref:N})}).propTypes={id:m.string,className:m.string,onChange:m.func,onBlur:m.func,onFocus:m.func,onReady:m.func,onEscape:m.func,onClick:m.func,onLoadError:m.func,onLoaderStart:m.func,onNetworksChange:m.func,onConfirm:m.func,onCancel:m.func,onShippingAddressChange:m.func,onShippingRateChange:m.func,options:m.object},e.displayName=P,e.__elementType=x,e}var G="undefined"==typeof window,L=_.createContext(null);L.displayName="EmbeddedCheckoutProviderContext";function D(){var e=_.useContext(L);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e}var H=G?function(e){var t=e.id,e=e.className;return D(),_.createElement("div",{id:t,className:e})}:function(e){var t=e.id,e=e.className,n=D().embeddedCheckout,r=_.useRef(!1),a=_.useRef(null);return _.useLayoutEffect(function(){return!r.current&&n&&null!==a.current&&(n.mount(a.current),r.current=!0),function(){if(r.current&&n)try{n.unmount(),r.current=!1}catch(e){}}},[n]),_.createElement("div",{ref:a,id:t,className:e})},W=F("auBankAccount",G),V=F("card",G),z=F("cardNumber",G),j=F("cardExpiry",G),X=F("cardCvc",G),Y=F("fpxBank",G),q=F("iban",G),K=F("idealBank",G),Q=F("p24Bank",G),J=F("epsBank",G),Z=F("payment",G),$=F("expressCheckout",G),ee=F("paymentRequestButton",G),te=F("linkAuthentication",G),ne=F("address",G),re=F("shippingAddress",G),ae=F("paymentMethodMessaging",G),u=F("affirmMessage",G),G=F("afterpayClearpayMessage",G);e.AddressElement=ne,e.AffirmMessageElement=u,e.AfterpayClearpayMessageElement=G,e.AuBankAccountElement=W,e.CardCvcElement=X,e.CardElement=V,e.CardExpiryElement=j,e.CardNumberElement=z,e.CustomCheckoutProvider=O,e.Elements=N,e.ElementsConsumer=x,e.EmbeddedCheckout=H,e.EmbeddedCheckoutProvider=function(e){var t=e.stripe,n=e.options,r=e.children,a=_.useMemo(function(){return v(t,"Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[t]),o=_.useRef(null),i=_.useRef(null),e=k(_.useState({embeddedCheckout:null}),2),s=e[0],l=e[1];_.useEffect(function(){var t;i.current||o.current||(t=function(e){i.current||o.current||(i.current=e,o.current=i.current.initEmbeddedCheckout(n).then(function(e){l({embeddedCheckout:e})}))},"async"!==a.tag||i.current||!n.clientSecret&&!n.fetchClientSecret?"sync"!==a.tag||i.current||!n.clientSecret&&!n.fetchClientSecret||t(a.stripe):a.stripePromise.then(function(e){e&&t(e)}))},[a,n,s,i]),_.useEffect(function(){return function(){s.embeddedCheckout?(o.current=null,s.embeddedCheckout.destroy()):o.current&&o.current.then(function(){o.current=null,s.embeddedCheckout&&s.embeddedCheckout.destroy()})}},[s.embeddedCheckout]),_.useEffect(function(){E(i)},[i]);var c=U(t);_.useEffect(function(){null!==c&&c!==t&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[c,t]);var u=U(n);return _.useEffect(function(){null!=u&&(null!=n?(void 0===n.clientSecret&&void 0===n.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=u.clientSecret&&n.clientSecret!==u.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=u.fetchClientSecret&&n.fetchClientSecret!==u.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=u.onComplete&&n.onComplete!==u.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=u.onShippingDetailsChange&&n.onShippingDetailsChange!==u.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))},[u,n]),_.createElement(L.Provider,{value:s},r)},e.EpsBankElement=J,e.ExpressCheckoutElement=$,e.FpxBankElement=Y,e.IbanElement=q,e.IdealBankElement=K,e.LinkAuthenticationElement=te,e.P24BankElement=Q,e.PaymentElement=Z,e.PaymentMethodMessagingElement=ae,e.PaymentRequestButtonElement=ee,e.ShippingAddressElement=re,e.useCustomCheckout=function(){var e;t="calls useCustomCheckout()",e=_.useContext(R),I(e,t);var t=_.useContext(M);if(!t)throw new Error("Could not find CustomCheckout Context; You need to wrap the part of your app that calls useCustomCheckout() in an <CustomCheckoutProvider> provider.");return t},e.useElements=function(){return C("calls useElements()").elements},e.useStripe=function(){return B("calls useStripe()").stripe}},"object"===a(t)?r(t,n(1594)):(n=[t,n(1594)],void 0===(r="function"==typeof(r=r)?r.apply(t,n):r)||(e.exports=r))},5574:function(e,t,n){var l=n(5024),c=n(3496),r=n(8154),a=n(195);function o(r,a,o,i,t){var e=[].slice.call(arguments,1),n=e.length,e="function"==typeof e[n-1];if(!e&&!l())throw new Error("Callback required as last argument");if(!e){if(n<1)throw new Error("Too few arguments provided");return 1===n?(o=a,a=i=void 0):2!==n||a.getContext||(i=o,o=a,a=void 0),new Promise(function(e,t){try{var n=c.create(o,i);e(r(n,a,i))}catch(e){t(e)}})}if(n<2)throw new Error("Too few arguments provided");2===n?(t=o,o=a,a=i=void 0):3===n&&(a.getContext&&void 0===t?(t=i,i=void 0):(t=i,i=o,o=a,a=void 0));try{var s=c.create(o,i);t(null,r(s,a,i))}catch(e){t(e)}}t.create=c.create,t.toCanvas=o.bind(null,r.render),t.toDataURL=o.bind(null,r.renderToDataURL),t.toString=o.bind(null,function(e,t,n){return a.render(e,n)})},5024:function(e){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},3498:function(e,i,t){var o=t(2701).getSymbolSize;i.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,e=o(e),n=145===e?26:2*Math.ceil((e-13)/(2*t-2)),r=[e-7],a=1;a<t-1;a++)r[a]=r[a-1]-n;return r.push(6),r.reverse()},i.getPositions=function(e){for(var t=[],n=i.getRowColCoords(e),r=n.length,a=0;a<r;a++)for(var o=0;o<r;o++)0===a&&0===o||0===a&&o===r-1||a===r-1&&0===o||t.push([n[a],n[o]]);return t}},2734:function(e,t,n){var r=n(1145),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=r.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(var t=0;t+2<=this.data.length;t+=2){var n=45*a.indexOf(this.data[t]);n+=a.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=o},5330:function(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},7345:function(e){function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){t=e*this.size+t;this.data[t]=n,r&&(this.reservedBit[t]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},7557:function(e,t,n){var r=n(1145);function a(e){this.mode=r.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=a},7185:function(e,t,n){var r=n(5308),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}}},5308:function(e,n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2},n.isValid=function(e){return e&&void 0!==e.bit&&0<=e.bit&&e.bit<4},n.from=function(e,t){if(n.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return t}}},6305:function(e,t,n){var r=n(2701).getSymbolSize;t.getPositions=function(e){e=r(e);return[[0,0],[e-7,0],[0,e-7]]}},5826:function(e,t,n){var r=n(2701),a=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var t=e.bit<<3|t,n=t<<10;0<=r.getBCHDigit(n)-a;)n^=1335<<r.getBCHDigit(n)-a;return 21522^(t<<10|n)}},2666:function(e,t){var r=new Uint8Array(512),a=new Uint8Array(256);!function(){for(var e=1,t=0;t<255;t++)r[t]=e,a[e]=t,256&(e<<=1)&&(e^=285);for(var n=255;n<512;n++)r[n]=r[n-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return a[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[a[e]+a[t]]}},3308:function(e,t,n){var r=n(1145),a=n(2701);function o(e){this.mode=r.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(var t=0;t<this.data.length;t++){var n=a.toSJIS(this.data[t]);if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=o},4029:function(e,s){s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var u=3,i=3,l=40,a=10;s.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&0<=e&&e<=7},s.from=function(e){return s.isValid(e)?parseInt(e,10):void 0},s.getPenaltyN1=function(e){for(var t=e.size,n=0,r=0,a=0,o=null,i=null,s=0;s<t;s++){o=i=null;for(var l=r=a=0;l<t;l++){var c=e.get(s,l);c===o?r++:(5<=r&&(n+=u+(r-5)),o=c,r=1),(c=e.get(l,s))===i?a++:(5<=a&&(n+=u+(a-5)),i=c,a=1)}5<=r&&(n+=u+(r-5)),5<=a&&(n+=u+(a-5))}return n},s.getPenaltyN2=function(e){for(var t=e.size,n=0,r=0;r<t-1;r++)for(var a=0;a<t-1;a++){var o=e.get(r,a)+e.get(r,a+1)+e.get(r+1,a)+e.get(r+1,a+1);4!==o&&0!==o||n++}return n*i},s.getPenaltyN3=function(e){for(var t=e.size,n=0,r=0,a=0,o=0;o<t;o++)for(var i=r=a=0;i<t;i++)r=r<<1&2047|e.get(o,i),10<=i&&(1488===r||93===r)&&n++,a=a<<1&2047|e.get(i,o),10<=i&&(1488===a||93===a)&&n++;return n*l},s.getPenaltyN4=function(e){for(var t=0,n=e.data.length,r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*a},s.applyMask=function(e,t){for(var n=t.size,r=0;r<n;r++)for(var a=0;a<n;a++)t.isReserved(a,r)||t.xor(a,r,function(e,t,n){switch(e){case s.Patterns.PATTERN000:return(t+n)%2==0;case s.Patterns.PATTERN001:return t%2==0;case s.Patterns.PATTERN010:return n%3==0;case s.Patterns.PATTERN011:return(t+n)%3==0;case s.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case s.Patterns.PATTERN101:return t*n%2+t*n%3==0;case s.Patterns.PATTERN110:return(t*n%2+t*n%3)%2==0;case s.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}(e,a,r))},s.getBestMask=function(e,t){for(var n=Object.keys(s.Patterns).length,r=0,a=1/0,o=0;o<n;o++){t(o),s.applyMask(o,e);var i=s.getPenaltyN1(e)+s.getPenaltyN2(e)+s.getPenaltyN3(e)+s.getPenaltyN4(e);s.applyMask(o,e),i<a&&(a=i,r=o)}return r}},1145:function(e,n,t){var r=t(2893),a=t(2795);n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return 1<=t&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},n.getBestModeForData=function(e){return a.testNumeric(e)?n.NUMERIC:a.testAlphanumeric(e)?n.ALPHANUMERIC:a.testKanji(e)?n.KANJI:n.BYTE},n.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},n.isValid=function(e){return e&&e.bit&&e.ccBits},n.from=function(e,t){if(n.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return t}}},8808:function(e,t,n){var r=n(1145);function a(e){this.mode=r.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(var t,n,r=0;r+3<=this.data.length;r+=3)t=this.data.substr(r,3),n=parseInt(t,10),e.put(n,10);var a=this.data.length-r;0<a&&(t=this.data.substr(r),n=parseInt(t,10),e.put(n,3*a+1))},e.exports=a},9004:function(e,r,t){var i=t(2666);r.mul=function(e,t){for(var n=new Uint8Array(e.length+t.length-1),r=0;r<e.length;r++)for(var a=0;a<t.length;a++)n[r+a]^=i.mul(e[r],t[a]);return n},r.mod=function(e,t){for(var n=new Uint8Array(e);0<=n.length-t.length;){for(var r=n[0],a=0;a<t.length;a++)n[a]^=i.mul(t[a],r);for(var o=0;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},r.generateECPolynomial=function(e){for(var t=new Uint8Array([1]),n=0;n<e;n++)t=r.mul(t,new Uint8Array([1,i.exp(n)]));return t}},3496:function(e,t,n){var w=n(2701),o=n(5308),i=n(5330),s=n(7345),c=n(3498),u=n(6305),d=n(4029),N=n(7185),C=n(7181),m=n(2184),l=n(5826),p=n(1145),f=n(144);function b(e,t,n){for(var r,a=e.size,o=l.getEncodedBits(t,n),i=0;i<15;i++)r=1==(o>>i&1),i<6?e.set(i,8,r,!0):i<8?e.set(i+1,8,r,!0):e.set(a-15+i,8,r,!0),i<8?e.set(8,a-i-1,r,!0):i<9?e.set(8,15-i-1+1,r,!0):e.set(8,15-i-1,r,!0);e.set(a-8,8,1,!0)}function h(t,e,n){var r=new i;n.forEach(function(e){r.put(e.mode.bit,4),r.put(e.getLength(),p.getCharCountIndicator(e.mode,t)),e.write(r)});n=8*(w.getSymbolTotalCodewords(t)-N.getTotalCodewordsCount(t,e));for(r.getLengthInBits()+4<=n&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);for(var a=(n-r.getLengthInBits())/8,o=0;o<a;o++)r.put(o%2?17:236,8);return function(e,t,n){for(var r=w.getSymbolTotalCodewords(t),a=N.getTotalCodewordsCount(t,n),a=r-a,o=N.getBlocksCount(t,n),i=o-r%o,n=Math.floor(r/o),s=Math.floor(a/o),l=s+1,c=n-s,u=new C(c),d=0,m=new Array(o),p=new Array(o),f=0,b=new Uint8Array(e.buffer),h=0;h<o;h++){var v=h<i?s:l;m[h]=b.slice(d,d+v),p[h]=u.encode(m[h]),d+=v,f=Math.max(f,v)}var E,g,y=new Uint8Array(r),S=0;for(E=0;E<f;E++)for(g=0;g<o;g++)E<m[g].length&&(y[S++]=m[g][E]);for(E=0;E<c;E++)for(g=0;g<o;g++)y[S++]=p[g][E];return y}(r,t,e)}function v(e,l,t,n){var r;if(Array.isArray(e))r=f.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var a,o=l;o||(a=f.rawSplit(e),o=m.getBestVersionForData(a,t)),r=f.fromString(e,o||40)}e=m.getBestVersionForData(r,t);if(!e)throw new Error("The amount of data is too big to be stored in a QR Code");if(l){if(l<e)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+e+".\n")}else l=e;o=h(l,t,r),e=w.getSymbolSize(l),e=new s(e);return function(e){for(var t=e.size,n=u.getPositions(l),r=0;r<n.length;r++)for(var a=n[r][0],o=n[r][1],i=-1;i<=7;i++)if(!(a+i<=-1||t<=a+i))for(var s=-1;s<=7;s++)o+s<=-1||t<=o+s||(0<=i&&i<=6&&(0===s||6===s)||0<=s&&s<=6&&(0===i||6===i)||2<=i&&i<=4&&2<=s&&s<=4?e.set(a+i,o+s,!0,!0):e.set(a+i,o+s,!1,!0))}(e),function(e){for(var t=e.size,n=8;n<t-8;n++){var r=n%2==0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}(e),function(e){for(var t=c.getPositions(l),n=0;n<t.length;n++)for(var r=t[n][0],a=t[n][1],o=-2;o<=2;o++)for(var i=-2;i<=2;i++)-2===o||2===o||-2===i||2===i||0===o&&0===i?e.set(r+o,a+i,!0,!0):e.set(r+o,a+i,!1,!0)}(e),b(e,t,0),7<=l&&function(e){for(var t,n,r,a=e.size,o=m.getEncodedBits(l),i=0;i<18;i++)t=Math.floor(i/3),n=i%3+a-8-3,r=1==(o>>i&1),e.set(t,n,r,!0),e.set(n,t,r,!0)}(e),function(e,t){for(var n=e.size,r=-1,a=n-1,o=7,i=0,s=n-1;0<s;s-=2)for(6===s&&s--;;){for(var l,c=0;c<2;c++)e.isReserved(a,s-c)||(l=!1,i<t.length&&(l=1==(t[i]>>>o&1)),e.set(a,s-c,l),-1===--o&&(i++,o=7));if((a+=r)<0||n<=a){a-=r,r=-r;break}}}(e,o),isNaN(n)&&(n=d.getBestMask(e,b.bind(null,e,t))),d.applyMask(n,e),b(e,t,n),{modules:e,version:l,errorCorrectionLevel:t,maskPattern:n,segments:r}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var n,r,a=o.M;return void 0!==t&&(a=o.from(t.errorCorrectionLevel,o.M),n=m.from(t.version),r=d.from(t.maskPattern),t.toSJISFunc&&w.setToSJISFunction(t.toSJISFunc)),v(e,n,a,r)}},7181:function(e,t,n){var r=n(9004);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new Uint8Array(e.length+this.degree);t.set(e);var n=r.mod(t,this.genPoly),e=this.degree-n.length;if(0<e){t=new Uint8Array(this.degree);return t.set(n,e),t}return n},e.exports=a},2795:function(e,t){var n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",r="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(n,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(r,"g"),t.NUMERIC=new RegExp("[0-9]+","g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var a=new RegExp("^"+n+"$"),o=new RegExp("^[0-9]+$"),i=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return i.test(e)}},144:function(e,i,t){var f=t(1145),r=t(8808),a=t(2734),o=t(7557),s=t(3308),l=t(2795),c=t(2701),u=t(5084);function d(e){return unescape(encodeURIComponent(e)).length}function m(e,t,n){for(var r,a=[];null!==(r=e.exec(n));)a.push({data:r[0],index:r.index,mode:t,length:r[0].length});return a}function p(e){var t,n=m(l.NUMERIC,f.NUMERIC,e),r=m(l.ALPHANUMERIC,f.ALPHANUMERIC,e),e=c.isKanjiModeEnabled()?(t=m(l.BYTE,f.BYTE,e),m(l.KANJI,f.KANJI,e)):(t=m(l.BYTE_KANJI,f.BYTE,e),[]);return n.concat(r,t,e).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function b(e,t){switch(t){case f.NUMERIC:return r.getBitsLength(e);case f.ALPHANUMERIC:return a.getBitsLength(e);case f.KANJI:return s.getBitsLength(e);case f.BYTE:return o.getBitsLength(e)}}function n(e,t){var n=f.getBestModeForData(e),t=f.from(t,n);if(t!==f.BYTE&&t.bit<n.bit)throw new Error('"'+e+'" cannot be encoded with mode '+f.toString(t)+".\n Suggested mode is: "+f.toString(n));switch(t!==f.KANJI||c.isKanjiModeEnabled()||(t=f.BYTE),t){case f.NUMERIC:return new r(e);case f.ALPHANUMERIC:return new a(e);case f.KANJI:return new s(e);case f.BYTE:return new o(e)}}i.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(n(t,null)):t.data&&e.push(n(t.data,t.mode)),e},[])},i.fromString=function(e,t){for(var n=function(e,t){for(var n={},r={start:{}},a=["start"],o=0;o<e.length;o++){for(var i=e[o],s=[],l=0;l<i.length;l++){var c=i[l],u=""+o+l;s.push(u),n[u]={node:c,lastCount:0},r[u]={};for(var d=0;d<a.length;d++){var m=a[d];n[m]&&n[m].node.mode===c.mode?(r[m][u]=b(n[m].lastCount+c.length,c.mode)-b(n[m].lastCount,c.mode),n[m].lastCount+=c.length):(n[m]&&(n[m].lastCount=c.length),r[m][u]=b(c.length,c.mode)+4+f.getCharCountIndicator(c.mode,t))}}a=s}for(var p=0;p<a.length;p++)r[a[p]].end=0;return{map:r,table:n}}(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];switch(r.mode){case f.NUMERIC:t.push([r,{data:r.data,mode:f.ALPHANUMERIC,length:r.length},{data:r.data,mode:f.BYTE,length:r.length}]);break;case f.ALPHANUMERIC:t.push([r,{data:r.data,mode:f.BYTE,length:r.length}]);break;case f.KANJI:t.push([r,{data:r.data,mode:f.BYTE,length:d(r.data)}]);break;case f.BYTE:t.push([{data:r.data,mode:f.BYTE,length:d(r.data)}])}}return t}(p(e,c.isKanjiModeEnabled())),t),r=u.find_path(n.map,"start","end"),a=[],o=1;o<r.length-1;o++)a.push(n.table[r[o]].node);return i.fromArray(a.reduce(function(e,t){var n=0<=e.length-1?e[e.length-1]:null;return n&&n.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},i.rawSplit=function(e){return i.fromArray(p(e,c.isKanjiModeEnabled()))}},2701:function(e,t){var n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||40<e)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},2893:function(e,t){t.isValid=function(e){return!isNaN(e)&&1<=e&&e<=40}},2184:function(e,a,t){var o=t(2701),i=t(7185),r=t(5308),s=t(1145),l=t(2893),n=o.getBCHDigit(7973);function c(e,t){return s.getCharCountIndicator(e,t)+4}function u(e,t){for(var n=1;n<=40;n++)if(function(e,n){var r=0;return e.forEach(function(e){var t=c(e.mode,n);r+=t+e.getBitsLength()}),r}(e,n)<=a.getCapacity(n,t,s.MIXED))return n}a.from=function(e,t){return l.isValid(e)?parseInt(e,10):t},a.getCapacity=function(e,t,n){if(!l.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=s.BYTE);t=8*(o.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(n===s.MIXED)return t;var r=t-c(n,e);switch(n){case s.NUMERIC:return Math.floor(r/10*3);case s.ALPHANUMERIC:return Math.floor(r/11*2);case s.KANJI:return Math.floor(r/13);case s.BYTE:default:return Math.floor(r/8)}},a.getBestVersionForData=function(e,t){var n,t=r.from(t,r.M);if(Array.isArray(e)){if(1<e.length)return u(e,t);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,t,n){for(var r=1;r<=40;r++)if(t<=a.getCapacity(r,n,e))return r}(n.mode,n.getLength(),t)},a.getEncodedBits=function(e){if(!l.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;0<=o.getBCHDigit(t)-n;)t^=7973<<o.getBCHDigit(t)-n;return e<<12|t}},8154:function(e,r,t){var i=t(8793);r.render=function(e,t,n){var r=n,a=t;void 0!==r||t&&t.getContext||(r=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),r=i.getOptions(r);var o=i.getImageWidth(e.modules.size,r),n=a.getContext("2d"),t=n.createImageData(o,o);return i.qrToImageData(t.data,e,r),r=a,o=o,n.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=o,r.width=o,r.style.height=o+"px",r.style.width=o+"px",n.putImageData(t,0,0),a},r.renderToDataURL=function(e,t,n){void 0!==n||t&&t.getContext||(n=t,t=void 0),n=n||{};e=r.render(e,t,n),t=n.type||"image/png",n=n.rendererOpts||{};return e.toDataURL(t,n.quality)}},195:function(e,t,n){var i=n(8793);function s(e,t){var n=e.a/255,e=t+'="'+e.hex+'"';return n<1?e+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':e}function u(e,t,n){t=e+t;return void 0!==n&&(t+=" "+n),t}t.render=function(e,t,n){var r=i.getOptions(t),a=e.modules.size,o=e.modules.data,t=a+2*r.margin,e=r.color.light.a?"<path "+s(r.color.light,"fill")+' d="M0 0h'+t+"v"+t+'H0z"/>':"",a="<path "+s(r.color.dark,"stroke")+' d="'+function(e,t,n){for(var r="",a=0,o=!1,i=0,s=0;s<e.length;s++){var l=Math.floor(s%t),c=Math.floor(s/t);l||o||(o=!0),e[s]?(i++,0<s&&0<l&&e[s-1]||(r+=o?u("M",l+n,.5+c+n):u("m",a,0),a=0,o=!1),l+1<t&&e[s+1]||(r+=u("h",i),i=0)):a++}return r}(o,a,r.margin)+'"/>',t='viewBox="0 0 '+t+" "+t+'"',a='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+t+' shape-rendering="crispEdges">'+e+a+"</svg>\n";return"function"==typeof n&&n(null,a),a}},8793:function(e,p){function a(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||8<t.length)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:255&e,hex:"#"+t.slice(0,6).join("")}}p.getOptions=function(e){(e=e||{}).color||(e.color={});var t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&21<=e.width?e.width:void 0,r=e.scale||4;return{width:n,scale:n?4:r,margin:t,color:{dark:a(e.color.dark||"#000000ff"),light:a(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},p.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},p.getImageWidth=function(e,t){var n=p.getScale(e,t);return Math.floor((e+2*t.margin)*n)},p.qrToImageData=function(e,t,n){for(var r=t.modules.size,a=t.modules.data,o=p.getScale(r,n),i=Math.floor((r+2*n.margin)*o),s=n.margin*o,l=[n.color.light,n.color.dark],c=0;c<i;c++)for(var u=0;u<i;u++){var d=4*(c*i+u),m=n.color.light;s<=c&&s<=u&&c<i-s&&u<i-s&&(m=l[a[Math.floor((c-s)/o)*r+Math.floor((u-s)/o)]?1:0]),e[d++]=m.r,e[d++]=m.g,e[d++]=m.b,e[d]=m.a}}},9870:function(e,t){var n;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
!function(){"use strict";var i={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r,a=typeof n;if("string"==a||"number"==a)e.push(n);else if(Array.isArray(n))!n.length||(r=s.apply(null,n))&&e.push(r);else if("object"==a)if(n.toString===Object.prototype.toString||n.toString.toString().includes("[native code]"))for(var o in n)i.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},3306:function(e){e.exports="https://images.rbxcdn.com/955e1db08427c7f984752e9fdf0cb97e-robux_coins_145x145.png"},1594:function(e){"use strict";e.exports=React}},r={};function Ja(e){var t=r[e];if(void 0!==t)return t.exports;t=r[e]={exports:{}};return n[e].call(t.exports,t,t.exports,Ja),t.exports}Ja.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Ja.d(t,{a:t}),t},Ja.d=function(e,t){for(var n in t)Ja.o(t,n)&&!Ja.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Ja.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function l(e){var t=e.isSubscriber,n=(0,ce.useTranslation)().translate,e=ie().createElement("div",{className:"top-subtitle",dangerouslySetInnerHTML:{__html:n("Description.MoreRobuxComputerWebGiftcardsOtherPlatforms")||"Get more Robux on computer, web, with gift cards, and on select platforms"}});return t&&(e=ie().createElement("div",{className:"top-subtitle",dangerouslySetInnerHTML:{__html:n("Description.PremiumMoreRobuxComputerWebGiftcardsOther")||"Premium members, get more Robux on computer, web, with gift cards, and on select platforms"}})),ie().createElement("div",{className:"low-cogs-banner"},ie().createElement("div",{className:"top-header"},ie().createElement("h1",{className:"low-cogs-header"},n("Heading.MoreRobuxComputerWebGiftcards",{percentage:"25"})),ie().createElement("div",{className:"top-subtitle-container"},ie().createElement("span",null,e))))}function O(){var e=(0,ce.useTranslation)().translate,t=(i=(0,oe.useContext)(ue)).products,n=i.useLowCogsMessaging,r=(0,oe.useContext)(B).isSubscriber,a=(0,oe.useContext)(de).personalizedBonusItem,o=(s=(0,oe.useContext)(me)).isFetchingMetadata,i=s.iosRedesignMetadata,s=s.iosBuyRobuxRedesignExperiment;return!t||0===t.length||o||null!=i&&i.isUserEligibleForIosRedesign?null:n?ie().createElement(l,{isSubscriber:r}):s.shouldDelayRender||s.shouldRender||null!=a&&a.isFetchingBonusItems||null!=a&&a.bonusItemId?null:ie().createElement("div",{className:"page-top page-refined"},ie().createElement("div",{className:"top-header"},ie().createElement("h1",null,e("Action.BuyRobux")),ie().createElement("div",{className:"top-subtitle"},ie().createElement("span",null,e("Description.BuyRobuxSubtitleV2")))))}function re(e){function t(e){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE,!0,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PURCHASE_WARNING,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN,e)}var n=e.open,o=e.action,i=e.robuxPackage,e=(c=(0,De.createModal)())[0],s=c[1],l=(0,oe.useContext)(He).redirectToPurchase,r=(0,ce.useTranslation)().translate;(0,oe.useEffect)(function(){n?s.open():s.close()},[n,s]);var a,c=r("Heading.ScaryModalTitle");switch(o){case Se:a=r("Description.ScaryModalBodyNew",{lineBreak:d}),t(le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.U13_PAYMENT_MODAL);break;case Ce:a=r("Description.ScaryModalBody13To17"),t(le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.PAYMENT_MODAL_13_TO_17);break;case we:a=r("Description.ScaryModalThreshold1Body",{linebreak:d}),t(le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.U13_MONTHLY_THRESHOLD_1_MODAL);break;case Ne:a=r("Description.ScaryModalThreshold2Body",{linebreak:d}),t(le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.U13_MONTHLY_THRESHOLD_2_MODAL);break;default:return null}return ie().createElement(e,{title:c,body:ie().createElement("div",null,ie().createElement("div",{className:"image-center"},ie().createElement("div",{className:"icon-warning-no-tilt"})),ie().createElement("span",{className:"text-description",dangerouslySetInnerHTML:{__html:a}})),actionButtonShow:!0,actionButtonText:r("Action.OK"),neutralButtonText:r("Action.Cancel"),onAction:function(){var r,a;r="Confirmed"+o,void 0===a&&(a=2e3),p(void 0,void 0,void 0,function(){var t,n;return f(this,function(e){switch(e.label){case 0:t={url:fe.EnvironmentUrls.apiGatewayUrl+be.acknowledgePurchaseWarningUrl,timeout:a,withCredentials:!0},n={acknowledgement:r},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,se.httpService.post(t,n)];case 2:return[2,null==(n=e.sent())?void 0:n.data];case 3:return e.sent(),(0,Fe.fireEvent)(m),[2,null];case 4:return[2]}})}).then(function(){l(i),s.close()}).catch(function(){l(i),s.close()})},onNeutral:function(){return s.close()},closeable:!0})}function ae(e){function t(e,t){var n=a?le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.OPTIMIZED_PURCHASE_VPC_MODAL:le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PURCHASE_VPC_MODAL;le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE,!0,n,e,t)}var n,r=void 0!==(l=e.userHasSelfDisabledPurchases)&&l,a=void 0!==(l=e.showVPCOptimization)&&l,o=e.modalType,i=e.open,e=(l=(0,De.createModal)())[0],s=l[1],l=(0,ce.useTranslation)().translate;return(0,oe.useEffect)(function(){i?(t(le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN,o),s.open()):s.close()},[i,s]),o!==Be?null:(r=a&&!r?(n=l("Label.RequestPending"),l("Description.ExistingPendingRequestRedirectToSettings")||"You already have a pending request to make purchases. You can cancel this request in Settings > Spending."):a&&r?(n=l("Label.UpdateYourSettings")||"Update Your Settings",l("Description.EnablePurchasesInSettings")||"To make this purchase, first enable purchases in Settings > Spending."):(n=l("Label.AskParent"),l("Description.SpendingRestrictionWithSettings")),ie().createElement(e,{actionButtonShow:!0,title:n,body:ie().createElement("div",null,r),actionButtonText:l("Action.GoToSettings"),neutralButtonText:l("Action.Close"),onAction:function(){t(le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.GO_TO_SETTINGS),window.location.href=se.urlService.getAbsoluteUrl(""+be.billingSettingUrl)},onNeutral:function(){t(le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,a?le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.CLOSE:le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.CANCEL),s.close()}}))}function u(){var e=(0,ce.useTranslation)().translate,t=(0,oe.useContext)(B),n=(0,oe.useContext)(ue).products,r=(0,oe.useContext)(He).tryToPurchaseRobuxPackage,a=null==(n=null==n?void 0:n.filter(function(e){return e.premiumFeatureTypeName===ve.SUBSCRIPTION&&!e.name.toLowerCase().includes("12 months")&&!e.name.toLowerCase().includes("annual")}))?void 0:n.find(function(e){return"RobloxPremium1000"===e.subscriptionTypeName});return(0,oe.useEffect)(function(){window.dispatchEvent(new CustomEvent("price-tag:render",{detail:{targetSelector:".price-tag-subscription-card-list-v1",tagClassName:"font-bold text-emphasis percent-more-text-bold"}}))},[a]),!a||t.isSubscriber?null:(n=e("Description.RobloxPremiumPurchaseGC",{divTagStart:'<span class="font-bold text-emphasis percent-more-text-bold">',divTagEnd:"</span>"}),t=e("Label.PricePerMonth",{divTagStart:'<span class="price-tag-subscription-card-list-v1" data-amount="'+a.price.amount+'" data-currency-code="'+a.price.currency.currencyCode+'">',price:"",divTagEnd:"</span>"}),ie().createElement("div",{className:"subscription-v1-container"},ie().createElement("div",{className:"left-container"},ie().createElement("span",{className:"icon-premium-small premium-icon"}),ie().createElement("h2",{className:"premium-title"},e("Heading.RobloxPremium")),ie().createElement("p",{className:"subscription-subtext",dangerouslySetInnerHTML:{__html:n}}),ie().createElement(De.Button,{className:"get-premium-button",variant:De.Button.variants.primary,width:De.Button.widths.min,onClick:function(e){e.preventDefault(),r(a)}},e("Action.GetPremium"))),ie().createElement("div",{className:"divider"}),ie().createElement("div",{className:"right-container"},ie().createElement("p",{className:"price",dangerouslySetInnerHTML:{__html:t}}),ie().createElement("div",{className:"perks-container"},ie().createElement("p",{className:"row"},ie().createElement("span",{className:"icon-robux-small"}),e("Label.RobuxQuantityEachMonth",{quantity:a.robuxAmount})),ie().createElement("p",{className:"row"},ie().createElement("span",{className:"icon-wallet"}),e("Label.MoreRobuxOnPurchase")),ie().createElement("p",{className:"row"},ie().createElement("span",{className:"icon-bonus"}),e("Label.BonusMarketplaceCapabilities"))))))}function L(e){var t=void 0===(d=e.disclosureType)?"standard":d,n=(0,ce.useTranslation)().translate,r=(0,oe.useContext)(He).legalDisclosureTranslationKey,a=(0,oe.useContext)(ue).underPriceTestingExperiment,o=(0,oe.useContext)(me).legalDisclosureMetadata;if(!ge)return null;var i=(null==o?void 0:o.termsUrlPath)||be.termsUrl,s='<a href="'+se.urlService.getAbsoluteUrl(i)+'" class="text-link">',l="</a>",c='<a href="'+se.urlService.getAbsoluteUrl(be.privacyUrl)+'" class="text-link">',u="</a>",e='<a href="'+se.urlService.getAbsoluteUrl(be.billingSettingUrl)+'" class="text-link">',d="</a>",i=n((null==o?void 0:o.legalDisclosureTranslationKey)||"Description.legalDisclosuresNewPremiumRobuxPage",{privacyLinkStart:c,privacyLinkEnd:u,billingLinkStart:e,billingLinkEnd:d,termsLinkStart:s,termsLinkEnd:l}),o=n("Description.LegalDisclosuresPremiumRobuxPageWithPriceTesting",{privacyLinkStart:c,privacyLinkEnd:u,billingLinkStart:e,billingLinkEnd:d,termsLinkStart:s,termsLinkEnd:l})||i,d=n(r||"Message.QuickPay.LegalDisclosureText",{termsLinkStart:s,termsLinkEnd:l,privacyLinkStart:c,privacyLinkEnd:u,billingLinkStart:e,billingLinkEnd:d,stripeTermsLinkStart:'<a href="https://stripe.com/legal/consumer" class="text-link">',stripeTermsLinkEnd:"</a>",stripePrivacyLinkStart:'<a href="https://stripe.com/legal/consumer" class="text-link">',stripePrivacyLinkEnd:"</a>"}),i="quickPay"===t?d:"priceTesting"===t||a?o:i;return ie().createElement("div",{className:"legal-disclosure-container"},ie().createElement("p",{className:"text-footer legal-text-holder",dangerouslySetInnerHTML:{__html:i}}))}function E(e){var t=e.title,n=e.tooltipContent,r=e.headerClassName,a=e.titleClassName,o=e.titleIcon,i=e.tooltipClassName,e=e.iconName;return ie().createElement("div",{className:r},null!=o?ie().createElement("span",{className:o+" icon-spacing"}):null,ie().createElement("span",{className:a||"font-header-2"},t),"",ie().createElement(De.Popover,{id:"robux-head-header-tooltip",placement:"bottom",trigger:"click",button:ie().createElement(De.IconButton,{className:"robux-head-icon-button "+(i||""),iconName:e||"moreinfo",size:De.IconButton.sizes.small,onClick:function(){return!0}})},ie().createElement("div",{className:"robux-head-popover-description",dangerouslySetInnerHTML:{__html:n}})))}var oe=Ja(1594),ie=Ja.n(oe),t=ReactDOM,se=CoreUtilities,le=CoreRobloxUtilities,ce=ReactUtilities,ue=(0,oe.createContext)({products:[],classifiedProducts:{packages:[]},classifiedUpsellProducts:{packages:[]},useLowCogsMessaging:!1,underHighCogsPricingTest:!1,underPriceTestingExperiment:!1}),B=(0,oe.createContext)({isSubscriber:!1,userPlan:void 0}),de=(0,oe.createContext)({}),me=(0,oe.createContext)({isFetchingMetadata:!0,iosBuyRobuxRedesignExperiment:{shouldRender:!1,shouldDelayRender:!0}}),pe=(0,oe.createContext)({isPurchaseWarningModalEnabled:!1,isVerificationUpsellEnabled:!1}),F=(0,oe.createContext)({redirectUrl:"",showErrorModal:!1,handleCloseErrorModal:function(){},handleRedirectClick:function(){}}),fe=Roblox,n="robux-upsell-react-page",r="lean-robux-upsell-react-page",be={productsUrl:"/v1/products?skipPremiumUserCheck=true",userStatusUrl:"/v1/users/{userid}/subscriptions",paymentPageUrl:"/upgrades/paymentmethods?",mobilePaymentUrl:"/mobile-app-upgrades/buy?",subscribePageUrl:"/premium/membership?ctx=leftnav",termsUrl:"/info/terms",privacyUrl:"/info/privacy",revocationPolicyUrl:"/info/terms#eu-uk-revocation-policy",robuxInfoUrl:"/info/get-robux",billingSettingUrl:"/my/account#!/billing",purchaseWarningUrl:"/purchase-warning/v1/purchase-warnings?",acknowledgePurchaseWarningUrl:"/purchase-warning/v1/purchase-warnings/acknowledge",checkUserPurchaseWarningUrl:"/payments-gateway/v1/check-user-purchase-settings",redeemCreditPageUrl:"/upgrades/redeem?"},he="PremiumRobux",ve={SUBSCRIPTION:"Subscription",ROBUX:"Robux",UNKNOW:"unknown",MONTH:"month"},Ee="OneMonth",ge=(0,fe.DeviceMeta)().isDesktop&&!(0,fe.DeviceMeta)().isUWPApp||!(0,fe.DeviceMeta)().isAmazonApp&&!(0,fe.DeviceMeta)().isUWPApp&&!(0,fe.DeviceMeta)().isIosApp&&!(0,fe.DeviceMeta)().isAndroidApp,ye=(0,fe.DeviceMeta)().isAmazonApp||(0,fe.DeviceMeta)().isUWPApp||(0,fe.DeviceMeta)().isIosApp||(0,fe.DeviceMeta)().isAndroidApp,Se=((0,fe.DeviceMeta)().isUniversalApp&&(0,fe.DeviceMeta)().isDesktop,"U13PaymentModal"),we="U13MonthlyThreshold1Modal",Ne="U13MonthlyThreshold2Modal",Ce="ParentalConsentWarningPaymentModal13To17",xe="RequireEmailVerification",Pe="RobloxPremium450",_e="RobloxPremium1000",ke="RobloxPremium450OneMonth",Te="RobloxPremium1000OneMonth",d="<br /><br />",Ue="RequestFiledPreparePaymentException",G="RequestFailedRequestProductException",Ae="RequestFailedRequestPurchaseWarningException",Re="RequestFailedRequestPurchaseWarning404",D="RequestFailedRequestUserStatusException",H="RequestFailedRequestUserStatus404",m="RequestFailedRequestAckPurchaseWarningException",g="PackagePriceNotExist",y="PackageNotExist",Ie="RequestFailedRequestCheckUserPurchaseWarningException",S="PackageRobuxAmountNotExistForPremiumUser",w="PackageRobuxAmountNotExistForNonPremiumUser",Me="RobuxPackage",Oe="QuickPay",Be="PurchaseNotEnabled",P={500:400,1e3:800,2e3:1700,5250:4500,11e3:1e4,24e3:22500,550:440,1100:880,2200:1870,5800:4950,12100:11e3,26400:25e3},W=[5250,5800],Fe=window.EventTracker?EventTracker:{fireEvent:console.log,start:console.log,endSuccess:console.log,endCancel:console.log,endFailure:console.log},V=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},z=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},j=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},X=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},e=Ja(9870),Ge=Ja.n(e),Le=HeaderScripts,De=ReactStyleGuide,N=Ja.n(De),He=(0,oe.createContext)({}),We=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Ve=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ze=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},je=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},p=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},f=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},_=function(e){(0,oe.useEffect)(function(){(0,Fe.fireEvent)("RenderTracking-Membership-"+e)},[])},C=function(t){var e=(0,oe.useState)(window.matchMedia(t)),n=e[0],r=e[1];return(0,oe.useEffect)(function(){function e(){r(window.matchMedia(t))}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[t]),(0,oe.useEffect)(function(){r(window.matchMedia(t))},[t]),n};function x(e){return void 0!==e}var a=PropTypes,c="ar-",b="en-",h=["JPY"],v={PRICE_DATA_NOT_VALID:(wr="PriceTag")+"DataNotValid",NUMBER_FORMAT_LOCALE_EXCEPTION:wr+"NumberFormatLocaleException",ARABIC_LOCALE_TRIGGERED:wr+"ArabicLocale"};function o(e){var t=e.amount,n=e.currencyCode,r=e.tagClassName,e=t<0,a=Math.abs(t),o=""+a+n,i=Ge()("price-tag",r);try{var s=(l=Intl.NumberFormat().resolvedOptions().locale).startsWith(c)?((0,Fe.fireEvent)(v.ARABIC_LOCALE_TRIGGERED),l.replace(c,b)):l,l={style:"currency",currency:n,notation:"standard"};1e4<=a&&!h.includes(n)&&(l.minimumFractionDigits=0,l.maximumFractionDigits=2,l.maximumSignificantDigits=21,l.notation="compact"),i.split(" ").includes("navbar-compact")&&(l.maximumSignificantDigits=4),o=Intl.NumberFormat(s,l).format(a)}catch(e){(0,Fe.fireEvent)(v.NUMBER_FORMAT_LOCALE_EXCEPTION)}return ie().createElement("div",{className:"d-flex-inline gap-1 justify-content-start align-items-center"},e&&ie().createElement("span",{className:i},"-"),ie().createElement("span",{className:i},o))}o.propTypes={amount:(Nr=Ja.n(a))().number.isRequired,currencyCode:Nr().string.isRequired};var Y=o,i=new fe.Intl,k=function(e){return i.n(e)};function T(e,t){return null!=t?t:e}function U(e,t,n){return e?T(t,n):t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function R(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?A(Object(a),!0).forEach(function(e){var t,n;t=r,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Q(n);return e=r?(e=Q(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==s(e)&&"function"!=typeof e?K(t):e}}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=(0,oe.createContext)(null),Z={didCatch:!1,error:null},$=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(a,oe.Component);var e,t,n,r=q(a);function a(e){return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),(e=r.call(this,e)).resetErrorBoundary=e.resetErrorBoundary.bind(K(e)),e.state=Z,e}return e=a,n=[{key:"getDerivedStateFromError",value:function(e){return{didCatch:!0,error:e}}}],(t=[{key:"resetErrorBoundary",value:function(){if(null!==this.state.error){for(var e,t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];null!==(e=(t=this.props).onReset)&&void 0!==e&&e.call(t,{args:r,reason:"imperative-api"}),this.setState(Z)}}},{key:"componentDidCatch",value:function(e,t){var n,r;null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,e,t)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.didCatch,r=this.props.resetKeys;n&&null!==t.error&&function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return e.length!==n.length||e.some(function(e,t){return!Object.is(e,n[t])})}(e.resetKeys,r)&&(null!==(t=(n=this.props).onReset)&&void 0!==t&&t.call(n,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(Z))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.fallbackRender,r=e.FallbackComponent,a=e.fallback,o=this.state,i=o.didCatch,e=o.error,o=t;if(i){t={error:e,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof n)o=n(t);else if(r)o=(0,oe.createElement)(r,t);else{if(void 0===a)throw e;o=a}}return(0,oe.createElement)(J.Provider,{value:{didCatch:i,error:e,resetErrorBoundary:this.resetErrorBoundary}},o)}}])&&I(e.prototype,t),n&&I(e,n),a}();function ee(e,t,n){return void 0===n&&(n=null),r=e,a={FallbackComponent:n||function(){return null},onError:function(){return(0,Fe.fireEvent)("RenderExceptionTracking-Membership-"+t)}},e=(0,oe.forwardRef)(function(e,t){return(0,oe.createElement)($,a,(0,oe.createElement)(r,R(R({},e),{},{ref:t})))}),n=r.displayName||r.name||"Unknown",e.displayName="withErrorBoundary(".concat(n,")"),e;var r,a}(Cr=xr=xr||{}).GIFT_CARD_PACKAGE_UNIT="GiftCardPackageUnit",Cr.ROBUX_PACKAGE_UNIT="RobuxPackageUnit",Cr.ROBUX_UPSELL_SUBSCRIPTION_PACKAGE_UNIT="RobuxUpsellSubscriptionPackageUnit",Cr.ROBUX_WITH_ITEM_LOW_COGS_PACKAGE_UNIT="RobuxWithItemLowCogsPackageUnit",Cr.ROBUX_WITH_ITEM_PACKAGE_UNIT="RobuxWithItemPackageUnit",Cr.SUBSCRIPTION_PACKAGE_UNIT="SubscriptionPackageUnit",Cr.SUBSCRIPTION_UNIT="SubscriptionUnit";var te,ne=ee(function(e){function t(e){if(void 0===e&&(e=!1),!f)return null;null!=l&&l.robuxAmount&&null!=c&&c.robuxAmount||(0,Fe.fireEvent)(S);var t=T(l,c);if(!t)return null;var n=t.robuxAmount,r=P[n],n=n;return ie().createElement("div",{className:"robux-button-container"},ie().createElement(De.Button,{className:"btn-growth-md btn-full-width badge-container d-flex align-items-center justify-content-center",onClick:function(){return b(t)}},ie().createElement("span",{className:"icon-robux-white"}),ie().createElement("h4",{className:"inline-text"},k(t.robuxAmount))),!e&&r&&n?ie().createElement("div",{className:"low-cogs-robux-difference-amount"},ie().createElement("h4",{className:"inline-text"},p("Label.PlusAmountMoreLower",{amount:k(n-r)}))):null," ")}function n(e){if(void 0===e&&(e=!1),f)return null;if(null!=l&&l.robuxAmount||(0,Fe.fireEvent)(w),!l)return null;var t=l.robuxAmount,n=P[t],t=t;return ie().createElement("div",{className:"robux-button-container robux-downsell"},ie().createElement(De.Button,{className:h,onClick:function(){return b(l)}},ie().createElement("span",{className:u?"icon-robux-reverse":"icon-robux"}),ie().createElement("h4",{className:"inline-text"},k(l.robuxAmount))),!e&&n&&t?ie().createElement("div",{className:"low-cogs-robux-difference-amount"},ie().createElement("h4",{className:"inline-text"},p("Label.PlusAmountMoreLower",{amount:k(t-n)}))):null," ")}function r(e){return ie().createElement("div",{className:"robux-cell"},ie().createElement("div",{className:"robux-cell-high-cogs-amount"},ie().createElement("span",{className:"icon-robux"}),ie().createElement("h4",{className:"inline-text high-cogs-robux-amount"},k(e))))}function a(e){return ie().createElement("div",{className:"robux-cell-high-cogs-amount"},ie().createElement("span",{className:"font-body text"},p("Label.OtherPlatformsColon")||"Other platforms:"),ie().createElement("span",{className:"icon-robux-gray-16x16"}),ie().createElement("h4",{className:"inline-text high-cogs-robux-amount"},k(e)))}function o(e){if(void 0===e&&(e=!1),!f||!c)return null;var t=P[c.robuxAmount];return m&&t?(e?a:r)(t):null}function i(e){if(void 0===e&&(e=!1),f||!l)return null;var t=P[l.robuxAmount];return m&&t?(e?a:r)(t):null}var s,l=e.robuxPackageForNonSubscriber,c=e.robuxPackageForSubscriber,u=e.isUpsellPackage,d=e.smallScreen,m=e.showHighCogsRobuxCell,p=(0,ce.useTranslation)().translate,f=(0,oe.useContext)(B).isSubscriber,b=(0,oe.useContext)(He).tryToPurchaseRobuxPackage,h=Ge()("btn-full-width","badge-container","d-flex align-items-center justify-content-center",{"btn-primary-md":u&&!f},{"btn-secondary-md":!u&&!f}),v=U(f,l,c),e=null==v?void 0:v.price;return e&&null!=e&&e.amount&&null!==(s=null==e?void 0:e.currency)&&void 0!==s&&s.currencyCode?v?d?ie().createElement("div",{className:"robux-unit-mobile-container"},ie().createElement("div",{className:"robux-unit-mobile"},ie().createElement("div",{className:"robux-unit-mobile-top"},ie().createElement("div",{className:"price-cell-left-align"},ie().createElement(Y,{tagClassName:"font-header-1",amount:null==e?void 0:e.amount,currencyCode:null===(d=null==e?void 0:e.currency)||void 0===d?void 0:d.currencyCode})),ie().createElement("div",{className:"robux-button-mobile"},n(!0),t(!0))),ie().createElement("div",{className:"robux-unit-mobile-bottom"},o(!0),i(!0)))):ie().createElement("div",{className:"robux-unit-container"},ie().createElement("div",{className:"robux-unit"},ie().createElement("div",{className:"price-cell-left-align"},ie().createElement(Y,{tagClassName:"font-header-1",amount:null==e?void 0:e.amount,currencyCode:null===(e=null==e?void 0:e.currency)||void 0===e?void 0:e.currencyCode})),o(),i(),n(),t())):((0,Fe.fireEvent)(y),null):((0,Fe.fireEvent)(g),null)},(Ar=xr).ROBUX_WITH_ITEM_LOW_COGS_PACKAGE_UNIT),Xe=RobloxThumbnails,Ye={common:["Common.ExternalLinks","CommonUI.Controls","Common.VerifiedParentalConsent","Common.PremiumFeatures","Feature.GiftingProducts","Feature.NotApproved","IAPExperience.PurchaseError","Feature.PersonalizedBonus","Feature.VerificationUpsell"],feature:"Feature.Premium"};function qe(e,a){return e.sort(function(e,t){return t.normal.price.amount-e.normal.price.amount}).reduce(function(e,t){var n=e[0],r=e[1];return null!==(e=a?t.subscribed:t.normal)&&void 0!==e&&e.isEligibleForBonuses?[Je(Je([],n),[t]),r]:[n,Je(Je([],r),[t])]},[[],[]])}function Ke(){var e=(0,ce.useTranslation)().translate;_("RobuxWithPersonalizedBonusItemTable");var t=(0,oe.useContext)(ue).classifiedProducts,n=(0,oe.useContext)(B).isSubscriber,r=(0,oe.useContext)(de).personalizedBonusItem,a=C("(max-width: 639px)"),o=(l=(0,oe.useMemo)(function(){return qe(t.packages,n)},[t,n]))[0],i=l[1],s=(0,oe.useMemo)(function(){return ie().createElement("div",{className:"robux-header-unit-container"},ie().createElement("div",{className:"robux-header-unit"},!a.matches&&ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"header-container header-container-left"},ie().createElement("span",{className:"font-body text"},e("Label.Price"))),ie().createElement(E,{title:e("Label.OtherPlatforms")||"Other Platforms",tooltipContent:e("Description.OtherPlatformsTooltip")||"Certain platforms offer fewer Robux for in-app purchases.",headerClassName:"header-container header-container-middle",titleClassName:"font-body text",iconName:"moreinfo-i"})),ie().createElement(E,{title:e("Label.ComputerWebAndGiftCards"),tooltipContent:e("Description.ComputerWebGiftcardTooltip"),headerClassName:Ge()("header-container",{"header-container-left":a.matches,"header-container-right":!a.matches}),titleClassName:"font-body text",iconName:"moreinfo-i"})))},[a,e]),l=(0,oe.useCallback)(function(e){return ie().createElement(ne,{robuxPackageForNonSubscriber:e.normal,robuxPackageForSubscriber:e.subscribed,isUpsellPackage:!1,smallScreen:a.matches,showHighCogsRobuxCell:!0})},[a]);return ie().createElement("div",{className:"personalized-bonus-items"},(null==r?void 0:r.bonusMessageTranslationKey)&&ie().createElement("p",{className:"personalized-bonus-items__header"},e(null==r?void 0:r.bonusMessageTranslationKey)),ie().createElement("div",{className:"personalized-bonus-items__container"},ie().createElement(Qe,{page:te.BuyRobux,personalizedBonusItem:r}),s,o.filter(x).map(l)),ie().createElement("p",{className:"personalized-bonus-items__more-packages-header"},e("Message.MorePackages")),ie().createElement("div",{className:"personalized-bonus-items__more-packages-container"},s,i.filter(x).map(l)),ie().createElement(u,null),ie().createElement(L,null))}(Pr=te=te||{}).BuyRobux="BuyRobux",Pr.PaymentMethods="PaymentMethods",Pr.PaymentMethodsIosRedirect="PaymentMethodsIosRedirect",Pr.CreditRedeem="CreditRedeem",Pr.Xsolla="Xsolla",Pr.CheckoutSuccessIosRedirect="CheckoutSuccessIosRedirect";var Qe=(0,ce.withTranslations)(function(e){var t=e.page,n=e.personalizedBonusItem,r=e.translate,a=(0,oe.useCallback)(function(){(0,fe.DeviceMeta)().isInApp?window.location.href="/support":window.open("/support","_blank")},[]),o=(0,oe.useMemo)(function(){return t===te.PaymentMethodsIosRedirect||t===te.CheckoutSuccessIosRedirect},[t]),i=(0,oe.useMemo)(function(){var e;switch(t){case te.PaymentMethodsIosRedirect:case te.CheckoutSuccessIosRedirect:e="Message.BonusItemIncluded";break;case te.BuyRobux:e="Message.BonusGamePass";break;default:e="Message.ExplicitBonusGamePass"}return r(e,{gameName:null==n?void 0:n.experienceDisplayName})},[t,r,null==n?void 0:n.experienceDisplayName]);if(null==n||!n.bonusItemId)return null;var s=n.bonusItemId,l=n.bonusItemDisplayName,c=n.experienceDisplayName,e=n.thumbnailUrl;return ie().createElement("div",{className:Ge()("personalized-bonus-items__banner-container",{"buy-robux-page":t===te.BuyRobux,"payment-methods-page":t===te.PaymentMethods,"payment-methods-ios-redirect-page":t===te.PaymentMethodsIosRedirect,"credit-redeem-page":t===te.CreditRedeem,"xsolla-page":t===te.Xsolla,"checkout-success-ios-redirect-page":t===te.CheckoutSuccessIosRedirect})},t===te.BuyRobux&&ie().createElement(oe.Fragment,null,ie().createElement("div",{className:"personalized-bonus-items__banner-background"}),ie().createElement("div",{className:"personalized-bonus-items__banner",style:{backgroundImage:"url('"+e+"')"},"data-testid":"personalized-bonus-items__banner",title:"bonus item banner image"}),ie().createElement("div",{className:"personalized-bonus-items__banner-gradient"})),ie().createElement(Xe.Thumbnail2d,{targetId:s,type:"GamePass",size:"150x150",format:"png"}),ie().createElement("div",{className:"personalized-bonus-items__item-description-container"},ie().createElement("div",{className:"personalized-bonus-items__item-name-container"},ie().createElement("p",{className:"personalized-bonus-items__item-name"},i),t===te.BuyRobux&&ie().createElement(oe.Fragment,null,"",ie().createElement(De.Popover,{id:"personalized-bonus-items__report-popover",placement:"bottom",trigger:"hover",button:ie().createElement(De.IconButton,{className:"robux-head-icon-button",iconName:"moreinfo-i",size:De.IconButton.sizes.small,onClick:a})},ie().createElement("p",{className:"personalized-bonus-items__report-popover"},r("Action.ReportItem"))))),ie().createElement("p",{className:"personalized-bonus-items__item-description"},o?l:r("Message.PurchaseSuccessItemBody",{bonusItemName:l,gameName:c}))))},Ye),Je=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e};function Ze(e){if(!e)return!1;var t=e.premiumFeatureTypeName,e=(e.subscriptionTypeName||"").toLowerCase();return t===ve.SUBSCRIPTION&&e.indexOf(ve.MONTH)<0}function $e(e){var i,s={},l={},r=[];return null!=e&&e.forEach(function(e){var t=e.premiumFeatureTypeName,n=e.price,r=e.isSubscriptionOnly,a=e.subscriptionTypeName;switch(t){case ve.ROBUX:var o=s[n.amount]||{};r?o.SubscriptionOnly=e:o.NonSubscriptionOnly=e,s[n.amount]=o;break;case ve.SUBSCRIPTION:a!==_e&&a!==Te||(i=e),Ze(e)&&(l[n.amount]=e)}}),Object.keys(s).forEach(function(e){var t,n=null===(t=s[e])||void 0===t?void 0:t.NonSubscriptionOnly;n&&(t=null===(t=s[e])||void 0===t?void 0:t.SubscriptionOnly,e=l[e],r.push({normal:n,subscribed:t,subscription:e}))}),{packages:r,upsellPackage:i}}function et(e,n){return e.map(function(e){var t=e.normal,e=e.subscribed;return n&&e?e:t})}function tt(){var e=(0,ce.useTranslation)().translate;return ie().createElement("span",{className:"highlight-badge light-theme small-badge"},ie().createElement("span",{className:"icon-popular"}),ie().createElement("span",{className:"font-caption-header fluid-highlight-text"},e("Label.Popular")))}function nt(e){var t=e.className,n=e.buttonClassName,r=e.subscription,e=(0,ce.useTranslation)().translate,a=(0,oe.useContext)(He).tryToPurchaseRobuxPackage;return ie().createElement("div",{className:Ge()("robux-button-container",t)},r?ie().createElement(De.Button,{className:n,onClick:function(){return a(r)}},ie().createElement("span",{className:"icon-robux-white"}),ie().createElement("h4",{className:"inline-text",dangerouslySetInnerHTML:{__html:e("Label.PriceMonth",{robux:k(r.robuxAmount),subTextStart:'<span class="font-small">',subTextEnd:"</span>"})}}),r.isPopular&&ie().createElement(tt,null)):ie().createElement("p",{className:"font-small"},e("Action.NotAvailable")))}function rt(){var e=(s=(0,oe.useContext)(ue)).underHighCogsPricingTest,t=s.underPriceTestingExperiment,n=(0,oe.useContext)(me).legalDisclosureMetadata,r=(0,ce.useTranslation)().translate,a='<a href="'+se.urlService.getAbsoluteUrl(be.termsUrl)+'" class="text-link">',o='<a href="'+se.urlService.getAbsoluteUrl(be.privacyUrl)+'" class="text-link">',i=(null==n?void 0:n.termsUrlPath)||be.termsUrl,s='<a href="'+se.urlService.getAbsoluteUrl(i)+'" class="text-link">',n='<a href="'+se.urlService.getAbsoluteUrl(be.revocationPolicyUrl)+'" class="text-link">',i="</a>";return ie().createElement("div",{className:"mobile-legal-text-holder","data-testid":"mobile-legal-disclosure"},ie().createElement("p",{className:"font-caption-body text ",dangerouslySetInnerHTML:{__html:r(e||t?"Description.LegalDisclosuresWithRevocationV4MobileBuyRobuxPage":"Description.LegalDisclosuresWithRevocationV3MobileBuyRobuxPage",{termsLicenseLinkStart:a,termsLicenseLinkEnd:i,privacyLinkStart:o,privacyLinkEnd:i,termsLinkStart:s,termsLinkEnd:i,revocationLinkStart:n,revocationLinkEnd:i})}}))}var at=ee(function(e){var t=e.subscription,n=(0,ce.useTranslation)().translate,e=null==t?void 0:t.price;if(!e||null==e||!e.amount||null===(r=null==e?void 0:e.currency)||void 0===r||!r.currencyCode)return(0,Fe.fireEvent)(g),null;var r='<a href="'+se.urlService.getAbsoluteUrl(be.subscribePageUrl)+'" class="text-link">';return ie().createElement("tr",{className:"robux-basic"},ie().createElement("td",{className:"robux-row price-column"},ie().createElement("div",{className:"price-cell-left-align"},(0,fe.DeviceMeta)().isAndroidApp&&ie().createElement(E,{title:n("Label.Subscribe"),tooltipContent:n("Description.RobloxPremium",{linkStart:r,linkEnd:"</a>"}),headerClassName:"subscription-section-header gift-card-upsell",titleClassName:"font-header-1",tooltipClassName:"gift-card-upsell"}),ie().createElement(Y,{tagClassName:"font-header-1",amount:null==e?void 0:e.amount,currencyCode:null===(e=null==e?void 0:e.currency)||void 0===e?void 0:e.currencyCode}))),ie().createElement("td",{className:"robux-row"},ie().createElement(nt,{buttonClassName:"btn-growth-lg btn-fixed-width-lg badge-container",subscription:t})))},Ar.SUBSCRIPTION_PACKAGE_UNIT),ot=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},it=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},st=function(){return ot(void 0,void 0,Promise,function(){var t;return it(this,function(e){return t={withCredentials:!0,url:fe.EnvironmentUrls.accountSettingsApi+"/v1/account/settings/account-country"},[2,se.httpService.get(t)]})})},lt=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ct=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function ut(){var e=(0,oe.useState)(""),t=e[0],n=e[1],r=(0,oe.useState)(""),a=r[0],o=r[1],i=(0,oe.useState)(-1),s=i[0],l=i[1],e=(0,oe.useState)(void 0),r=e[0],c=e[1],i=(0,oe.useState)(void 0),e=i[0],u=i[1];return(0,oe.useEffect)(function(){!function(){lt(this,void 0,void 0,function(){var t;return ct(this,function(e){switch(e.label){case 0:return[4,st()];case 1:return t=e.sent().data.value,n(t.countryName),o(t.localizedName),l(t.countryId),c(t.subdivisionIso),u(t.localizedSubdivision),[2]}})})}()},[]),{countryName:t,localizedName:a,countryId:s,subdivisionIso:r,localizedSubdivision:e}}function dt(){var e=(0,ce.useTranslation)().translate;_("RobuxInAppWithPersonalizedBonusItemTable");var n=(0,oe.useContext)(ue).classifiedProducts,r=(0,oe.useContext)(B).isSubscriber,t=(0,oe.useContext)(de).personalizedBonusItem,a=(p=(0,oe.useMemo)(function(){var e=n.packages,t=n.upsellPackage,e=qe(e,r);return[e[0],e[1],t&&Ze(t)?[t]:[]]},[n,r]))[0],o=p[1],i=p[2],s=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAmazonApp},[]),l=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAndroidApp},[]),c=(0,oe.useMemo)(function(){return!r&&0<i.length},[r,i.length]),u=C("(max-width: 639px)"),d=(0,oe.useMemo)(function(){return!s&&(l||c)},[s,l,c]),m=(0,oe.useMemo)(function(){return ie().createElement("div",{className:"robux-header-unit-container"},ie().createElement("div",{className:"robux-header-unit"},!u.matches&&ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"header-container header-container-left"},ie().createElement("span",{className:"font-body text"},e("Label.Price"))),ie().createElement(E,{title:e("Label.OtherPlatforms")||"Other Platforms",tooltipContent:e("Description.OtherPlatformsTooltip")||"Certain platforms offer fewer Robux for in-app purchases.",headerClassName:"header-container header-container-middle",titleClassName:"font-body text",iconName:"moreinfo-i"})),ie().createElement(E,{title:e("Label.ComputerWebAndGiftCards"),tooltipContent:e("Description.ComputerWebGiftcardTooltip"),headerClassName:Ge()("header-container",{"header-container-left":u.matches,"header-container-right":!u.matches}),titleClassName:"font-body text",iconName:"moreinfo-i"})))},[u,e]),p=(0,oe.useCallback)(function(e){return ie().createElement(ne,{robuxPackageForNonSubscriber:e.normal,robuxPackageForSubscriber:e.subscribed,isUpsellPackage:!1,smallScreen:u.matches,showHighCogsRobuxCell:!0})},[u]);return ie().createElement("div",{className:"page-content experiment-content"},(null==t?void 0:t.bonusMessageTranslationKey)&&ie().createElement("p",{className:"personalized-bonus-items__header--in-app"},e(null==t?void 0:t.bonusMessageTranslationKey)),ie().createElement("div",{className:"personalized-bonus-items__container"},ie().createElement(Qe,{page:te.BuyRobux,personalizedBonusItem:t}),m,a.filter(x).map(p)),ie().createElement("p",{className:"personalized-bonus-items__more-packages-header"},e("Message.MorePackages")),ie().createElement("div",{className:"personalized-bonus-items__more-packages-container"},m,o.filter(x).map(p)),d&&ie().createElement(ie().Fragment,null,ie().createElement("p",{className:Ge()("personalized-bonus-items__header--in-app",{"gift-card-upsell__header":l})},l?ie().createElement("span",null,e("Heading.GetUpTo25PercentMore")):ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"subscription-premium-button"},ie().createElement("span",{className:"icon-premium-small"})),ie().createElement(E,{title:e("Label.SubscribeAndGetMore"),tooltipContent:e("Description.RobloxPremium",{linkStart:'<a href="'+se.urlService.getAbsoluteUrl(be.subscribePageUrl)+'" class="text-link">',linkEnd:"</a>"}),headerClassName:"subscription-section-header",titleClassName:"font-header-1"}))),ie().createElement("table",{className:"table personalized-bonus-items__table"},ie().createElement("tbody",null,c&&i.map(function(e){return ie().createElement(at,{key:e.productId,subscription:e})}),l&&ie().createElement(ft,{isSubscriber:r})))),ie().createElement(rt,null))}function mt(r,a,o,i){return bt(void 0,void 0,Promise,function(){var t,n;return ht(this,function(e){return t={withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-gateway/v1/prepare-payment"},n={productId:r,paymentMethod:a,isQuickPay:!0,paymentFlowId:le.paymentFlowAnalyticsService.purchaseFlowUuid,quickPaySelectedPaymentProfileId:o,paymentSessionId:null==i?void 0:i.id},[2,se.httpService.post(t,n)]})})}var pt,ft=ee(function(e){var t=e.isSubscriber,e=(0,ce.useTranslation)().translate,n=ut().countryName,r=(0,oe.useMemo)(function(){switch(n){case"United Kingdom":return"uk";case"Australia":return"au";case"Canada":return"ca";case"France":return"fr";case"Germany":return"de";case"Spain":return"es";case"New Zealand":return"nz";case"Ireland":return"ie";case"Italy":return"it";case"Switzerland":return"ch";case"Netherlands":return"nl";case"Belgium":return"be";case"Japan":return"jp";case"Mexico":return"mx";case"Brazil":return"br";case"Austria":return"at";case"Finland":return"fi";case"Portugal":return"pt";case"Greece":return"gr";case"Poland":return"pl";case"South Africa":return"za";case"United Arab Emirates":return"ae";case"Saudi Arabia":return"sa";case"United States":default:return"us"}},[n]);return(0,oe.useEffect)(function(){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE,!1,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.GIFT_CARD,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN,void 0,{location:r})},[r]),(0,fe.DeviceMeta)().isAndroidApp?ie().createElement("tr",{className:Ge()({"gift-card-upsell-is-unsubscribed":!t})},ie().createElement("td",{className:"robux-row price-column"},ie().createElement("div",{className:(0,fe.DeviceMeta)().isSamsungGalaxyStoreApp?"price-cell-left-align-samsung":"price-cell-left-align"},ie().createElement("span",{className:"font-header-1"},e("Description.GiftCard")))),ie().createElement("td",{className:"robux-row"},ie().createElement("div",{className:"robux-button-container"},ie().createElement(De.Button,{className:(0,fe.DeviceMeta)().isSamsungGalaxyStoreApp?"btn-control-lg btn-full-width badge-container d-flex":"btn-control-lg btn-fixed-width-lg badge-container",onClick:function(){var e="buy-robux-android-2";le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE,!0,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.GIFT_CARD,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_NOW,{location:r,ref:e}),(0,Fe.fireEvent)("GiftCardPackageUnitClick-Locale-buy-robux-android-2-Variant-AboveBundles"),window.location.href="/shopgiftcards?location="+r+"&ref="+e}},ie().createElement("h4",{className:"inline-text"},e("Action.BuyNowNoExclamation")))))):null},Ar.GIFT_CARD_PACKAGE_UNIT),bt=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ht=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function vt(n){return bt(void 0,void 0,Promise,function(){var t;return ht(this,function(e){return t={withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-gateway/v1/get-quick-pay-metadata"},[2,se.httpService.get(t,{quickPayFlowType:n})]})})}function Et(r,a){return bt(void 0,void 0,Promise,function(){var t,n;return ht(this,function(e){return t={withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-gateway/v1/process-payment"},n={paymentProviderType:r,providerPayload:a},[2,se.httpService.post(t,n)]})})}function gt(){return bt(void 0,void 0,Promise,function(){var t;return ht(this,function(e){return t={withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-gateway/v1/payment-profiles"},[2,se.httpService.get(t)]})})}function yt(r){return bt(void 0,void 0,Promise,function(){var n;return ht(this,function(e){var t;return t=r,n={withCredentials:!0,url:fe.EnvironmentUrls.economyApi+"/v1/users/"+t+"/currency"},[2,se.httpService.get(n)]})})}function St(){var e=(0,ce.useTranslation)().translate,t=(0,oe.useContext)(B).isSubscriber,n='<a href="'+be.robuxInfoUrl+'" class="text-link">',r='<a href="'+se.urlService.getAbsoluteUrl(be.subscribePageUrl)+'" class="text-link">';return ie().createElement("div",{className:"robux-head-group"},ie().createElement("div",{className:"robux-head"},ie().createElement("span",{className:"font-header-2"},"")),t?ie().createElement(oe.Fragment,null,ie().createElement("div",{className:"robux-head robux-head-40-percent header-container"},ie().createElement("span",{className:"font-header-2"},e("Label.NonSubscriberRate"))),ie().createElement(E,{title:e("Label.BecauseYouSubscribed"),tooltipContent:e("Description.PremiumSubscriber"),headerClassName:"robux-head robux-head-40-percent header-container"})):ie().createElement(oe.Fragment,null,ie().createElement(E,{title:e("Label.RobuxPackages"),tooltipContent:e("Description.RobuxPackages",{linkStart:n,linkEnd:"</a>"}),headerClassName:"robux-head robux-head-40-percent header-container"}),ie().createElement(E,{titleIcon:"icon-premium-small",title:e("Label.SubscribeAndGetMore"),tooltipContent:e("Description.RobloxPremium",{linkStart:r,linkEnd:"</a>"}),headerClassName:"robux-head robux-head-40-percent header-container"})))}function wt(e){return e=e.packages,ie().createElement("div",{className:"robux-body"},e.map(function(e){var t=e.normal,n=e.subscribed,e=e.subscription;return ie().createElement(Pt,{key:t.productId,robuxPackageForNonSubscriber:t,robuxPackageForSubscriber:n,subscription:e})}))}function Nt(){_("RobuxTable");var t=(0,oe.useContext)(ue).classifiedProducts,e=(0,oe.useState)([]),n=e[0],r=e[1];return(0,oe.useEffect)(function(){var e=t.packages;e.sort(function(e,t){return e.normal.price.amount-t.normal.price.amount}),r(e)},[t]),ie().createElement(oe.Fragment,null,ie().createElement("div",{className:"page-content"},0<n.length&&ie().createElement("div",{className:"robux-table"},ie().createElement(St,null),ie().createElement(wt,{packages:n}))),ie().createElement(L,null))}function Ct(e){var r=e.packages;return ie().createElement("tbody",null,r.map(function(e,t){var n=e.normal,e=e.subscribed;return ie().createElement(_t,{key:n.productId,robuxPackageForNonSubscriber:n,robuxPackageForSubscriber:e,isLastPackage:t===r.length-1})}))}function xt(){var e=(0,ce.useTranslation)().translate;_("RobuxUpsellSubscriptionTable");var n=(0,oe.useContext)(ue).classifiedProducts,t=(l=(0,oe.useState)([]))[0],r=l[1],a=(m=(0,oe.useState)([]))[0],o=m[1],i=(0,oe.useContext)(B).isSubscriber;(0,oe.useEffect)(function(){var e=n.packages,t=n.upsellPackage;e.sort(function(e,t){return t.normal.price.amount-e.normal.price.amount}),r(e),o(t&&Ze(t)?[t]:[])},[n]);var s='<a href="'+be.robuxInfoUrl+'" class="text-link">',l='<a href="'+se.urlService.getAbsoluteUrl(be.subscribePageUrl)+'" class="text-link">',c=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAmazonApp},[]),u=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAndroidApp},[]),d=(0,oe.useMemo)(function(){return!i&&0<a.length},[i,a.length]),m=(0,oe.useMemo)(function(){return!c&&(u||d)},[c,u,d]);return 0===t.length?null:ie().createElement("div",{className:"page-content experiment-content"},i?ie().createElement("div",null,ie().createElement("h2",{className:"package-header"},e("Heading.Mobile10PercentMore")),ie().createElement("h5",{className:"label-heading"},e("Heading.MobileRobloxPackages"))):ie().createElement(E,{title:e("Label.RobuxPackages"),tooltipContent:e("Description.RobuxPackages",{linkStart:s,linkEnd:"</a>"}),headerClassName:"subscription-section-header",titleClassName:"font-header-1"}),ie().createElement("table",{className:"table"},ie().createElement(Ct,{packages:t})),m&&ie().createElement(ie().Fragment,null,ie().createElement("div",{className:Ge()("subscription-table-header",{"gift-card-upsell__header":u})},u?ie().createElement("span",{className:"font-header-1"},e("Heading.GetUpTo25PercentMore")):ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"subscription-premium-button"},ie().createElement("span",{className:"icon-premium-small"})),ie().createElement(E,{title:e("Label.SubscribeAndGetMore"),tooltipContent:e("Description.RobloxPremium",{linkStart:l,linkEnd:"</a>"}),headerClassName:"subscription-section-header",titleClassName:"font-header-1"}))),ie().createElement("table",{className:"table js-subscribe-table"},ie().createElement("tbody",null,d&&a.map(function(e){return ie().createElement(at,{key:e.productId,subscription:e})}),u&&ie().createElement(ft,{isSubscriber:i})))),ie().createElement(rt,null))}(Qn=pt=pt||{}).BuyRobuxPage="BuyRobuxPage",Qn.BuyRobuxPagePreselectedProduct="BuyRobuxPagePreselectedProduct";var Pt=ee(function(e){var t,n=e.robuxPackageForNonSubscriber,r=e.robuxPackageForSubscriber,a=e.subscription,o=(0,oe.useContext)(B).isSubscriber,i=(0,oe.useContext)(He).tryToPurchaseRobuxPackage,s=U(o,n,r),e=null==s?void 0:s.price;return e&&null!=e&&e.amount&&null!==(t=null==e?void 0:e.currency)&&void 0!==t&&t.currencyCode?s?ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"robux-row"},ie().createElement("div",{className:"robux-cell"},ie().createElement("div",{className:"price-cell-left-align"},ie().createElement(Y,{tagClassName:"font-header-1",amount:e.amount,currencyCode:e.currency.currencyCode}))),o?null:(null!=n&&n.robuxAmount||(0,Fe.fireEvent)(w),ie().createElement(oe.Fragment,null,ie().createElement("div",{className:"robux-cell"},ie().createElement("div",{className:"robux-button-container robux-downsell"},ie().createElement(De.Button,{className:"btn-control-md btn-full-width badge-container",onClick:function(){return i(n)}},ie().createElement("span",{className:"icon-robux-gray"}),ie().createElement("h4",{className:"inline-text"},k(null==n?void 0:n.robuxAmount))))),ie().createElement("div",{className:"robux-cell"},ie().createElement(nt,{className:"robux-upsell",buttonClassName:"btn-growth-md btn-full-width badge-container unsubscribed",subscription:a})))),function(){if(!o)return null;null!=n&&n.robuxAmount&&null!=r&&r.robuxAmount||(0,Fe.fireEvent)(S);var e=T(n,r);return e?ie().createElement(oe.Fragment,null,n&&ie().createElement("div",{className:"robux-cell"},ie().createElement("div",{className:"robux-downsell"},ie().createElement("span",{className:"icon-robux-gray"}),ie().createElement("h4",{className:"inline-text robux-strikethrough"},k(n.robuxAmount)))),ie().createElement("div",{className:"robux-cell"},ie().createElement("div",{className:"robux-button-container robux-upsell"},ie().createElement(De.Button,{className:"btn-growth-md btn-full-width unsubscribed badge-container",onClick:function(){return i(e)}},ie().createElement("span",{className:"icon-robux-white"}),ie().createElement("h4",{className:"inline-text"},k(e.robuxAmount)))))):null}())):((0,Fe.fireEvent)(y),null):((0,Fe.fireEvent)(g),null)},Ar.ROBUX_PACKAGE_UNIT),_t=ee(function(e){var t,n=e.robuxPackageForNonSubscriber,r=e.robuxPackageForSubscriber,a=e.isLastPackage,o=(0,oe.useContext)(B).isSubscriber,i=(0,oe.useContext)(He).tryToPurchaseRobuxPackage,e=null!==(e=null==n?void 0:n.price)&&void 0!==e?e:null==r?void 0:r.price;return e&&null!=e&&e.amount&&null!==(t=null==e?void 0:e.currency)&&void 0!==t&&t.currencyCode?ie().createElement("tr",{className:Ge()("robux-basic",{"gift-card-upsell":(0,fe.DeviceMeta)().isAndroidApp&&a})},ie().createElement("td",{className:"robux-row price-column"},ie().createElement("div",{className:"price-cell-left-align"},ie().createElement(Y,{tagClassName:"font-header-1",amount:null==e?void 0:e.amount,currencyCode:null===(e=null==e?void 0:e.currency)||void 0===e?void 0:e.currencyCode}))),o?null:(null!=n&&n.robuxAmount||(0,Fe.fireEvent)(w),ie().createElement("td",{className:"robux-row"},ie().createElement("div",{className:"robux-button-container"},ie().createElement(De.Button,{className:"btn-control-lg btn-fixed-width-lg badge-container",onClick:function(){return i(n)}},ie().createElement("span",{className:"icon-robux-gray"}),ie().createElement("h4",{className:"inline-text"},k(null==n?void 0:n.robuxAmount)))))),function(){if(!o)return null;null!=n&&n.robuxAmount&&null!=r&&r.robuxAmount||(0,Fe.fireEvent)(S);var e=T(n,r);return e?ie().createElement("td",{className:"robux-row"},ie().createElement("div",{className:"robux-button-container"},ie().createElement(De.Button,{className:"btn-growth-lg btn-fixed-width-lg badge-container",onClick:function(){return i(e)}},ie().createElement("span",{className:"icon-robux-white"}),ie().createElement("h4",{className:"inline-text"},k(e.robuxAmount))))):null}()):((0,Fe.fireEvent)(g),null)},Ar.ROBUX_UPSELL_SUBSCRIPTION_PACKAGE_UNIT);function kt(e,t){return parseFloat((e+t/1e9).toFixed(2))}(gr=yr=yr||{}).INVALID="Invalid",gr.AMUSEMENT_TAX="AmusementTax",gr.COMMUNICATIONS_TAX="CommunicationsTax",gr.GST="Gst",gr.HST="Hst",gr.IGST="Igst",gr.JCT="Jct",gr.LEASE_TAX="LeaseTax",gr.PST="Pst",gr.QST="Qst",gr.RST="Rst",gr.SALES_TAX="SalesTax",gr.VAT="Vat",gr.SUMMED="Summed",gr.SERVICE_TAX="ServiceTax",gr.UNKNOWN="Unknown";var Tt,Ut,At,Rt,It=yr;function Mt(e,t){if(!t)return e("Message.QuickPay.Tax");var n=t.taxType,r=t.taxAmountExclusive,a=t.billingCountryCode,o=void 0===a?"":a,t=t.taxPercentageDecimal;if(!r||0===kt(r.Units,r.Nanos))return e("Message.QuickPay.Tax");var t=function(e){try{var t=new fe.Intl,n=parseFloat(e);if(0<n)return t.n(n)}catch(e){return""}return""}(t),i="";switch(n){case It.GST:i=e("Message.QuickPay.GST");break;case It.VAT:if(["AE","CO","ID","IS","TR","UA","VN","ZA"].includes(o.toUpperCase())){i=e("Message.QuickPay.Tax");break}if(["SP","IT"].includes(o.toUpperCase())){i=e("Message.QuickPay.IVA");break}if(["FR"].includes(o.toUpperCase())){i=e("Messsage.QuickPay.TVA");break}i=e("Message.QuickPay.VAT");break;case It.JCT:i=e("Message.QuickPay.JCT");break;case It.HST:i=e("Message.QuickPay.HST");break;case It.SALES_TAX:i=e("Message.QuickPay.SalesTax")||"Sales Tax";break;case It.SERVICE_TAX:i=e("Message.QuickPay.ServiceTax");break;case It.SUMMED:case It.UNKNOWN:default:i=e("Message.QuickPay.Tax")}return i+(0<t.length?" ("+t+"%)":"")}function Ot(){var o=(0,ce.useTranslation)().translate;_("RobuxLowCogsTable");var t=C("(max-width: 639px)"),n=(r=(0,oe.useContext)(ue)).classifiedProducts,e=r.products,r=(c=(0,oe.useState)([]))[0],a=c[1];function i(e,t,n,r,a){return ie().createElement(E,{title:e,tooltipContent:o(r,a),headerClassName:t,titleClassName:n,iconName:"moreinfo-i"})}(0,oe.useEffect)(function(){var e=n.packages;e.sort(function(e,t){return e.normal.price.amount-t.normal.price.amount}),a(e)},[n]);var s=(c=(0,oe.useState)({}))[0],l=c[1];(0,oe.useEffect)(function(){var n;n={},null!=e&&e.forEach(function(e){var t;e.premiumFeatureTypeName===ve.ROBUX&&(t=n[e.price.amount]||{},e.isSubscriptionOnly?t.SubscriptionOnly=e:t.NonSubscriptionOnly=e,n[e.price.amount]=t)}),l(n)},[e]);var c=Object.keys(s).map(Number).sort(function(e,t){return t-e}),c=s?c.map(function(e){return s[e]}):[];return ie().createElement(oe.Fragment,null,ie().createElement("div",{className:"robux-std-container-1"},0<r.length&&ie().createElement("div",{className:"robux-standard-table"},ie().createElement("div",{className:"robux-standard-packages-container"},ie().createElement("div",{className:"robux-standard-packages-table-desktop"},ie().createElement("div",{className:"robux-header-unit-container"},ie().createElement("div",{className:"robux-header-unit"},!t.matches&&ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"header-container header-container-left"},ie().createElement("span",{className:"font-body text"},o("Label.Price")||"Price")),i(o("Label.OtherPlatforms")||"Other platforms","header-container header-container-middle","font-body text","Description.OtherPlatformsTooltip",{})),i(o("Label.ComputerWebAndGiftCards")||"Computer, web & gift cards",Ge()("header-container",{"header-container-left":t.matches,"header-container-right":!t.matches}),"font-body text","Description.ComputerWebGiftcardTooltip",{}))),ie().createElement("div",{className:"robux-body"},c.filter(x).map(function(e){return e&&ie().createElement(ne,{robuxPackageForNonSubscriber:e.NonSubscriptionOnly,robuxPackageForSubscriber:e.SubscriptionOnly,isUpsellPackage:!1,smallScreen:t.matches,showHighCogsRobuxCell:!0})})))))),ie().createElement(u,null),ie().createElement(L,null))}function Bt(){var o=(0,ce.useTranslation)().translate;_("RobuxUpsellSubscriptionTable");var t=C("(max-width: 639px)"),n=(c=(0,oe.useContext)(ue)).classifiedProducts,e=c.products,r=(v=(0,oe.useState)([]))[0],a=v[1],i=(h=(0,oe.useState)([]))[0],s=h[1],l=(0,oe.useContext)(B).isSubscriber;(0,oe.useEffect)(function(){var e=n.packages,t=n.upsellPackage;e.sort(function(e,t){return t.normal.price.amount-e.normal.price.amount}),a(e),s(t&&Ze(t)?[t]:[])},[n]);var c='<a href="'+se.urlService.getAbsoluteUrl(be.subscribePageUrl)+'" class="text-link">',u=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAmazonApp},[]),d=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAndroidApp},[]),m=(0,oe.useMemo)(function(){return!l&&0<i.length},[l,i.length]),p=(v=(0,oe.useState)({}))[0],f=v[1];function b(e,t,n,r,a){return ie().createElement(E,{title:e,tooltipContent:o(r,a),headerClassName:t,titleClassName:n,iconName:"moreinfo-i"})}(0,oe.useEffect)(function(){var n;n={},null!=e&&e.forEach(function(e){var t;e.premiumFeatureTypeName===ve.ROBUX&&(t=n[e.price.amount]||{},e.isSubscriptionOnly?t.SubscriptionOnly=e:t.NonSubscriptionOnly=e,n[e.price.amount]=t)}),f(n)},[e]);var h=(0,oe.useMemo)(function(){return!u&&(d||m)},[u,d,m]),v=Object.keys(p).map(Number).sort(function(e,t){return t-e}),v=p?v.map(function(e){return p[e]}):[];return 0===r.length?null:ie().createElement("div",{className:"page-content experiment-content"},ie().createElement("div",{className:"robux-std-container-1"},0<r.length&&ie().createElement("div",{className:"robux-standard-table"},ie().createElement("div",{className:"robux-standard-packages-container"},ie().createElement("div",{className:"robux-standard-packages-table-desktop"},ie().createElement("div",{className:"robux-header-unit-container"},ie().createElement("div",{className:"robux-header-unit"},!t.matches&&ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"header-container header-container-left"},ie().createElement("span",{className:"font-body text"},o("Label.Price")||"Price")),b(o("Label.OtherPlatforms")||"Other platforms","header-container header-container-middle","font-body text","Description.OtherPlatformsTooltip",{})),b(o("Label.ComputerWebAndGiftCards")||"Computer, web & gift cards",Ge()("header-container",{"header-container-left":t.matches,"header-container-right":!t.matches}),"font-body text","Description.ComputerWebGiftcardTooltip",{}))),ie().createElement("div",{className:"robux-body"},v.filter(x).map(function(e){return e&&ie().createElement(ne,{robuxPackageForNonSubscriber:e.NonSubscriptionOnly,robuxPackageForSubscriber:e.SubscriptionOnly,isUpsellPackage:!1,smallScreen:t.matches,showHighCogsRobuxCell:!0})})))))),h&&ie().createElement(ie().Fragment,null,ie().createElement("div",{className:Ge()("subscription-table-header",{"gift-card-upsell__header":d})},d?ie().createElement("span",{className:"font-header-1"},o("Heading.GetUpTo25PercentMore")):ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"subscription-premium-button"},ie().createElement("span",{className:"icon-premium-small"})),ie().createElement(E,{title:o("Label.SubscribeAndGetMore"),tooltipContent:o("Description.RobloxPremium",{linkStart:c,linkEnd:"</a>"}),headerClassName:"subscription-section-header",titleClassName:"font-header-1"}))),ie().createElement("table",{className:"table js-subscribe-table js-subscribe-table-samsung"},ie().createElement("tbody",null,m&&i.map(function(e){return ie().createElement(at,{key:e.productId,subscription:e})}),d&&ie().createElement(ft,{isSubscriber:l})))),ie().createElement(rt,null))}(Sr=Tt=Tt||{}).Disabled="Disabled",Sr.Enabled="Enabled",(Ut=Ut||{}).Pending="Pending",(At=At||{}).UpdateUserSetting="UpdateUserSetting",(e=Rt=Rt||{}).None="None",e.ParentalConsent="ParentalConsent",e.SelfUpdateSetting="SelfUpdateSetting",e.ContentAgeRestrictionVerification="ContentAgeRestrictionVerification",e.ParentConsentInherited="ParentConsentInherited",e.Inherited="Inherited";var Ft,Gt=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Lt=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Dt=function(r,a,o){return void 0===a&&(a=void 0),void 0===o&&(o=[]),Gt(void 0,void 0,void 0,function(){var t,n;return Lt(this,function(e){switch(e.label){case 0:n={withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/parental-controls-api/v1/parental-controls/consents"},e.label=1;case 1:return e.trys.push([1,5,,6]),[4,se.httpService.get(n,{childUserId:r,consentStatus:Ut.Pending,consentType:At.UpdateUserSetting,nextCursor:a})];case 2:return t=e.sent(),n=t.data,t=n.consents,n=n.nextCursor,o.push.apply(o,t||[]),n?[4,Dt(r,n,o)]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2,o];case 5:throw e.sent(),new Error("Failed to fetch pending consent requests");case 6:return[2]}})})};function Ht(e,t){switch(t){case Ft.FraudPaymentAuthorizationAttempt:return e("Label.Sublabel.FraudPaymentAbuse");case Ft.FraudVirtualEconomyAbuse:return e("Label.Sublabel.FraudVirtualEconomyAbuse");case Ft.FraudAbuseOfAffiliateSystem:return e("Label.Sublabel.FraudAbuseOfTheAffiliateSystem");case Ft.FraudAttemptedUnauthorizedPaymentMethodUse:return e("Label.Sublabel.FraudAttemptedUnauthorizedPaymentMethodUse");case Ft.FraudRepeatedRefundRequests:return e("Label.Sublabel.FraudRepeatedRefundRequests");case Ft.FraudSuspiciousRefundRequests:return e("Label.Sublabel.FraudSuspiciousRefundRequests");case Ft.FraudUnauthorizedPurchase:return e("Label.Sublabel.FraudUnauthorizedPurchase");case Ft.FraudUseOfUnauthorizedOffPlatformTransactions:return e("Label.Sublabel.FraudUseOfUnauthorizedOffPlatformTransactions");case Ft.FraudUseOfUnauthorizedPaymentMethod:return e("Label.Sublabel.FraudUseOfUnauthorizedPaymentMethod");case Ft.FraudSuspiciousAccountPatterns:return e("Label.Sublabel.FraudSuspiciousAccountPatterns");case Ft.FraudChargeback:return e("Label.AbuseType.Chargeback");default:return e("Label.Sublabel.FraudPaymentAbuse")}}function Wt(e){var r=e.packages;return ie().createElement("tbody",null,r.map(function(e,t){var n=e.normal,e=e.subscribed;return ie().createElement(_t,{key:n.productId,robuxPackageForNonSubscriber:n,robuxPackageForSubscriber:e,isLastPackage:t===r.length-1})}))}function Vt(){var e=(0,ce.useTranslation)().translate;_("RobuxInAppWithPersonalizedBonusItemTable");var n=(0,oe.useContext)(ue).classifiedProducts,r=(0,oe.useContext)(B).isSubscriber,t=(0,oe.useContext)(de).personalizedBonusItem,a=(u=(0,oe.useMemo)(function(){var e=n.packages,t=n.upsellPackage,e=qe(e,r);return[e[0],e[1],t&&Ze(t)?[t]:[]]},[n,r]))[0],o=u[1],i=u[2],s=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAmazonApp},[]),l=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAndroidApp},[]),c=(0,oe.useMemo)(function(){return!r&&0<i.length},[r,i.length]),u=(0,oe.useMemo)(function(){return!s&&(l||c)},[s,l,c]);return ie().createElement("div",{className:"page-content experiment-content"},(null==t?void 0:t.bonusMessageTranslationKey)&&ie().createElement("p",{className:"personalized-bonus-items__header--in-app"},e(null==t?void 0:t.bonusMessageTranslationKey)),ie().createElement("div",{className:"personalized-bonus-items__container"},ie().createElement(Qe,{page:te.BuyRobux,personalizedBonusItem:t}),ie().createElement("table",{className:"table personalized-bonus-items__table"},ie().createElement(Wt,{packages:a}))),ie().createElement("p",{className:"personalized-bonus-items__more-packages-header--in-app"},e("Message.MorePackages")),ie().createElement("div",{className:"personalized-bonus-items__more-packages-container",style:{marginBottom:"24px"}},ie().createElement("table",{className:"table personalized-bonus-items__table"},ie().createElement(Wt,{packages:o}))),u&&ie().createElement(ie().Fragment,null,ie().createElement("p",{className:Ge()("personalized-bonus-items__header--in-app",{"gift-card-upsell__header":l})},l?ie().createElement("span",null,e("Heading.GetUpTo25PercentMore")):ie().createElement(ie().Fragment,null,ie().createElement("div",{className:"subscription-premium-button"},ie().createElement("span",{className:"icon-premium-small"})),ie().createElement(E,{title:e("Label.SubscribeAndGetMore"),tooltipContent:e("Description.RobloxPremium",{linkStart:'<a href="'+se.urlService.getAbsoluteUrl(be.subscribePageUrl)+'" class="text-link">',linkEnd:"</a>"}),headerClassName:"subscription-section-header",titleClassName:"font-header-1"}))),ie().createElement("table",{className:"table personalized-bonus-items__table"},ie().createElement("tbody",null,c&&i.map(function(e){return ie().createElement(at,{key:e.productId,subscription:e})}),l&&ie().createElement(ft,{isSubscriber:r})))),ie().createElement(rt,null))}function zt(e){var t=e.show,a=e.closeModal,o=e.robuxPackage,i=(0,oe.useContext)(He).purchaseRobuxPackage,n=(0,ce.useTranslation)().translate,s=le.paymentFlowAnalyticsService.ENUM_VIEW_NAME,l=le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT,c=le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE,u=le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE,r=(0,oe.useCallback)(function(){var e=s.MOBILE_PAYMENT_METHOD,t=l.WEBVIEW_ROBUX_PURCHASE,n=c.USER_INPUT,r=u.CANCEL;le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(t,!0,e,n,r),a()},[]),d=(0,oe.useCallback)(function(){var e=s.MOBILE_PAYMENT_METHOD_SAMSUNG_PAY,t=l.WEBVIEW_ROBUX_PURCHASE,n=c.USER_INPUT,r=u.SAMSUNG_PAY_SELECTED;le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(t,!0,e,n,r),o&&i(o),a()},[o]),e=(0,oe.useCallback)(function(){var e=s.MOBILE_PAYMENT_METHOD_REDEEM_CREDIT,t=l.WEBVIEW_ROBUX_PURCHASE,n=c.USER_INPUT,r=u.REDEEM_CREDIT_SELECTED;le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(t,!0,e,n,r);r={ap:null!==(r=null==o?void 0:o.productId)&&void 0!==r?r:"",pm:"redeemCard"};window.location.href=be.redeemCreditPageUrl+jt(r),a()},[o]);return ie().createElement(De.Modal,{show:t,onHide:r,size:"md",scrollable:!1,className:"bottom-modal"},ie().createElement(De.Modal.Header,{title:n("Message.MobilePaymentMethod.BottomSheetTitle")||"Select a payment method",showCloseButton:!0,onClose:r}),ie().createElement(De.Modal.Body,{className:"body"},ie().createElement("div",{className:"samsung-pay-modal-buttons"},ie().createElement(De.Button,{className:"modal-button button-with-icon-text",variant:De.Button.variants.control,width:De.Button.widths.full,size:De.Button.sizes.large,onClick:d},ie().createElement("div",{className:"button-inner"},ie().createElement("div",{className:"icon-samsung-pay"}),ie().createElement("span",{className:"button-label"},n("Message.MobilePaymentMethod.MilkyWayCheckout")||"Samsung Checkout")))),ie().createElement("div",{className:"redeem-credit-buttons"},ie().createElement(De.Button,{className:"modal-button button-with-icon-text",variant:De.Button.variants.control,width:De.Button.widths.full,size:De.Button.sizes.large,onClick:e},ie().createElement("div",{className:"button-inner"},ie().createElement("div",{className:"payment-method-image payment-method-image-roblox robloxCredit"}),ie().createElement("span",{className:"button-label"},n("Message.MobilePaymentMethod.RobloxCredit")))))))}(a=Ft=Ft||{}).FraudPaymentAuthorizationAttempt="FraudPaymentAuthorizationAttempt",a.FraudVirtualEconomyAbuse="FraudVirtualEconomyAbuse",a.FraudAbuseOfAffiliateSystem="FraudAbuseOfAffiliateSystem",a.FraudAttemptedUnauthorizedPaymentMethodUse="FraudAttemptedUnauthorizedPaymentMethodUse",a.FraudRepeatedRefundRequests="FraudRepeatedRefundRequests",a.FraudSuspiciousRefundRequests="FraudSuspiciousRefundRequests",a.FraudUnauthorizedPurchase="FraudUnauthorizedPurchase",a.FraudUseOfUnauthorizedOffPlatformTransactions="FraudUseOfUnauthorizedOffPlatformTransactions",a.FraudUseOfUnauthorizedPaymentMethod="FraudUseOfUnauthorizedPaymentMethod",a.FraudSuspiciousAccountPatterns="FraudSuspiciousAccountPatterns",a.FraudChargeback="FraudChargeback";var jt=se.urlService.composeQueryString,Xt=function(){return(Xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Yt(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}function qt(){return ie().createElement("div",{role:"presentation",className:"absolute inset-[0] transition-colors group-hover/interactable:bg-[var(--color-state-hover)] group-active/interactable:bg-[var(--color-state-press)] group-disabled/interactable:bg-none"})}var Kt=function(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=function e(t){var n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t))for(var a=t.length,o=0;o<a;o++)t[o]&&(n=e(t[o]))&&(r&&(r+=" "),r+=n);else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}(e))&&(r&&(r+=" "),r+=t);return r};function Qt(e){var t=e.width,e=e.height;return ie().createElement("svg",{className:"foundation-web-loading-spinner",width:t,height:e,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M10 2.75C8.56609 2.75 7.16438 3.1752 5.97212 3.97185C4.77986 4.76849 3.85061 5.90078 3.30188 7.22554C2.75314 8.55031 2.60957 10.008 2.88931 11.4144C3.16905 12.8208 3.85955 14.1126 4.87348 15.1265C5.88741 16.1405 7.17924 16.831 8.5856 17.1107C9.99196 17.3904 11.4497 17.2469 12.7745 16.6981C14.0992 16.1494 15.2315 15.2201 16.0282 14.0279C16.8248 12.8356 17.25 11.4339 17.25 10C17.25 9.58579 17.5858 9.25 18 9.25C18.4142 9.25 18.75 9.58579 18.75 10C18.75 11.7306 18.2368 13.4223 17.2754 14.8612C16.3139 16.3002 14.9473 17.4217 13.3485 18.0839C11.7496 18.7462 9.9903 18.9195 8.29296 18.5819C6.59563 18.2443 5.03653 17.4109 3.81282 16.1872C2.58911 14.9635 1.75575 13.4044 1.41813 11.707C1.08051 10.0097 1.25379 8.25037 1.91606 6.65152C2.57832 5.05267 3.69983 3.6861 5.13876 2.72464C6.57769 1.76318 8.26942 1.25 10 1.25C10.4142 1.25 10.75 1.58579 10.75 2C10.75 2.41421 10.4142 2.75 10 2.75Z"}))}!function(e,t){void 0===t&&(t={});var n,r=t.insertAt;e&&"undefined"!=typeof document&&(n=document.head||document.getElementsByTagName("head")[0],(t=document.createElement("style")).type="text/css","top"===r&&n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)))}("@keyframes rotation{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}.foundation-web-loading-spinner{animation:rotation 1s linear infinite normal}");var Jt,Zt,$t={Large:24,Medium:20,Small:16,XSmall:12},en={Large:["radius-medium","text-label-large","height-1200","padding-x-large"],Medium:["radius-medium","text-label-medium","height-1000","padding-x-medium"],Small:["radius-medium","text-label-small","height-800","padding-x-small"],XSmall:["radius-small","text-label-small","height-600","padding-x-small"]},tn={Emphasis:["bg-action-emphasis","content-action-emphasis"],Standard:["bg-action-standard","content-action-standard"],SoftEmphasis:["bg-action-soft-emphasis","content-action-soft-emphasis"],ActionUtility:["bg-action-subtle","content-action-standard"],Alert:["bg-action-alert","content-action-alert"]},nn={Emphasis:["bg-action-standard","content-action-standard"],Standard:["bg-action-standard","content-action-standard"],SoftEmphasis:["bg-action-standard","content-action-standard"],ActionUtility:["bg-action-subtle","content-action-standard"],Alert:["bg-action-standard","content-action-standard"]},rn=function(e){var t=e.children,n=e.className,r=e.style,a=e.as,o=e.isDisabled,i=void 0!==o&&o,s=e.isLoading,l=void 0!==s&&s,c=e.size,o=void 0===c?"Large":c,s=e.variant,c=void 0===s?"Emphasis":s,s=Yt(e,["children","className","style","as","isDisabled","isLoading","size","variant"]),e=null!=a?a:"button",a=s.href,s=Yt(s,["href"]);return ie().createElement(e,Xt({type:"button"===e?"button":void 0,disabled:i,"aria-disabled":i,href:i?void 0:a},s,{className:Kt("foundation-web-button","relative clip group/interactable focus-visible:outline-focus disabled:outline-none",i?"opacity-[0.5]":"cursor-pointer","flex items-center justify-center stroke-none padding-y-none select-none",en[o],(i?nn:tn)[c],n),style:Xt({textDecoration:"none"},r)}),ie().createElement(qt,null),l&&ie().createElement("div",{"aria-hidden":"true",className:"absolute flex"},ie().createElement(Qt,{width:$t[o],height:$t[o]})),ie().createElement("span",{className:Kt("padding-y-xsmall text-truncate-end text-no-wrap",l&&"invisible")},t))};function an(e){var t=e.className,n=e.product,r=e.isPrimary,a=void 0!==r&&r,o=e.children,r=(0,oe.useContext)(F),e=r.redirectUrl,i=r.handleRedirectClick,r=n?e+"&ap="+n.productId:e,e=(0,oe.useMemo)(function(){return a?t+" foundation-web-button foundation-web-interactable stroke-none flex items-center justify-center radius-medium text-label-medium height-1000 padding-x-medium bg-action-emphasis content-action-emphasis robux-redesign-mobile-packages-table__button":t+" foundation-web-button relative clip group/interactable focus-visible:outline-focus disabled:outline-none cursor-pointer flex items-center justify-center stroke-none padding-y-none select-none radius-medium text-label-medium height-1000 padding-x-medium bg-action-standard content-action-standard robux-redesign-mobile-packages-table__button"},[a,t]);return ie().createElement("a",{href:r,target:"_blank",rel:"noreferrer",onClick:function(e){return i(e,n)},role:"button",className:e},o)}(wr=Jt=Jt||{}).ROBUX="Robux",wr.CHECKOUT_SUCCESS="CheckoutSuccess",(Nr=Zt=Zt||{}).CLICK_ROBUX_PACKAGE="ClickRobuxPackage",Nr.CLICK_GIFT_CARD="ClickGiftCard",Nr.MOBILE_PURCHASE_REDIRECT="MobilePurchaseRedirect",Nr.MOBILE_REDIRECT="MobileRedirect",Nr.START_PURCHASE="StartPurchase",Nr.INELIGIBLE_PURCHASE="IneligiblePurchase",Nr.STOPPED_PURCHASE_WARNING="StoppedPurchaseWarning",Nr.RETURN_TO_APP="ReturnToApp",Nr.CLICK_SHOW_MORE="ClickShowMore",Nr.CLICK_TOGGLE="ClickToggle";var on=function(r,a){return new Promise(function(e){var t=(0,fe.DeviceMeta)(),n=t.appType;"unknown"===t.appType&&(t.isUniversalApp?n="universalApp":t.isStudio?n="studio":t.isChromeOs?n="chromeOs":t.isSamsungGalaxyStoreApp&&(n="samsungGalaxyStore")),(0,Fe.fireEvent)("EVENT_COUNTER_V2_"+r+"_"+a+"_"+n+"_"+t.deviceType),e()})},sn=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ln=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},cn=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e};function un(e){var n=this,t=e.packages,o=e.personalizedBonusItem,r=e.isPrimaryTable,a=void 0!==r&&r,i=e.hasRenderedBlueButton,s=void 0!==i&&i,l=e.shouldRedirect,c=void 0!==l&&l,r=e.withToggle,u=void 0!==r&&r,i=e.packagesHiddenInitially,d=void 0===i?[]:i,m=e.headerTranslationKey,l=e.subHeaderTranslationKey,p=void 0===l?"":l,r=e.toggledHeaderTranslationKey,f=void 0===r?"":r,i=e.toggledSubHeaderTranslationKey,b=void 0===i?"":i;_("RobuxRedesignMobilePackagesTable");var h=(0,ce.useTranslation)().translate,v=(0,oe.useContext)(He).tryToPurchaseRobuxPackage,E=(0,oe.useContext)(B).isSubscriber,l=(0,oe.useState)(!1),g=l[0],y=l[1],S=(0,oe.useCallback)(function(e){on(Jt.ROBUX,Zt.CLICK_ROBUX_PACKAGE),v(e)},[v]),w=(0,oe.useCallback)(function(t){return sn(n,void 0,void 0,function(){return ln(this,function(e){return le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE,!1,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PRODUCT_PURCHASE,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,t?le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.TOGGLE_OFF:le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.TOGGLE_ON),[2]})})},[]),r=(0,oe.useCallback)(function(){on(Jt.ROBUX,Zt.CLICK_TOGGLE),y(function(e){return w(e),!e})},[w]),N=(0,oe.useMemo)(function(){return Ze(t[0])},[t]),C=(0,oe.useMemo)(function(){return N&&!s},[N,s]),e=(0,oe.useMemo)(function(){return g?u?d:cn(cn([],t),d):t},[g,u,d,t]),x=(0,oe.useMemo)(function(){return g&&u},[g,u]),i=(0,oe.useMemo)(function(){return x&&f?f:m},[x,f,m]),l=(0,oe.useMemo)(function(){return x&&b?b:p||(E?"Message.PremiumRobuxBenefit":"")},[x,b,p,E]);return(0,oe.useEffect)(function(){N&&window.dispatchEvent(new CustomEvent("price-tag:render",{detail:{targetSelector:".robux-redesign-mobile-packages-table__price-tag"}}))},[N]),0===t.length?null:ie().createElement("div",{className:"robux-redesign-mobile-packages-table"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__packages-header-container"},N&&ie().createElement("span",{className:"icon-premium-small"}),ie().createElement("div",{className:"robux-redesign-mobile-packages-table__packages-title-container"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__packages-toggle-container"},ie().createElement("p",{className:"robux-redesign-mobile-packages-table__packages-title text-emphasis"},h(i)||i),u&&ie().createElement("button",{type:"button",className:Ge()("btn-toggle robux-redesign-mobile-packages-table__toggle",{on:!g,off:g}),onClick:r},ie().createElement("span",{className:Ge()("toggle-flip",{"icon-checkmark":!g})}),ie().createElement("span",{className:"toggle-on"}),ie().createElement("span",{className:"toggle-off"}))),l&&ie().createElement("p",{className:"robux-redesign-mobile-packages-table__packages-sub-title"},h(l)||l)),N&&ie().createElement(De.Popover,{id:"robux-redesign-mobile-packages-table__premium-popover",placement:"bottom",trigger:"click",button:ie().createElement(De.IconButton,{iconName:"moreinfo",size:De.IconButton.sizes.small,onClick:function(){return!0}})},ie().createElement("p",{className:"robux-redesign-mobile-packages-table__premium-popover-content",dangerouslySetInnerHTML:{__html:h("Description.RobloxPremium",{linkStart:'<a href="'+se.urlService.getAbsoluteUrl("/premium/membership?ctx=buyrobux")+'" class="text-link">',linkEnd:"</a>"})}}))),ie().createElement("div",{className:Ge()("robux-redesign-mobile-packages-table__packages-container",{"robux-redesign-mobile-packages-table__packages-container--primary":a,"robux-redesign-mobile-packages-table__packages-container--no-personalized-bonus":!o})},o&&ie().createElement(Qe,{page:te.BuyRobux,personalizedBonusItem:o}),e.map(function(e){var t=c&&!g,n=P[e.robuxAmount],r=!N&&(!ye||t),a=N?ie().createElement("p",{className:Ge()({"text-emphasis":!C,"robux-redesign-mobile-packages-table__premium-text":C}),dangerouslySetInnerHTML:{__html:h("Label.PricePerMonthV2",{divTagStart:"<span class='robux-redesign-mobile-packages-table__price-tag' data-amount='"+e.price.amount+"' data-currency-code='"+e.price.currency.currencyCode+"'>",price:"",divTagEnd:"</span>"})}}):ie().createElement("div",{className:"robux-redesign-mobile-packages-table__button-content"},t&&ie().createElement("span",{className:"robux-redesign-mobile-packages-table__redirect-icon"}),ie().createElement(Y,{amount:e.price.amount,currencyCode:e.price.currency.currencyCode}));return ie().createElement("div",{className:Ge()("robux-redesign-mobile-packages-table__package",{"robux-redesign-mobile-packages-table__package--personalized-bonus":!!o}),key:"robux-redesign-mobile-standard-package-"+e.productId},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__prices-container"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__price-container"},ie().createElement("span",{className:"robux-redesign-mobile-packages-table__robux-icon"}),ie().createElement("p",{className:"robux-redesign-mobile-packages-table__price text-emphasis"},k(e.robuxAmount))),r&&n&&ie().createElement("div",{className:"robux-redesign-mobile-packages-table__price-container--strikethrough"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__bar"}),ie().createElement("span",{className:"robux-redesign-mobile-packages-table__robux-icon--strikethrough"}),ie().createElement("p",{className:"robux-redesign-mobile-packages-table__price--strikethrough"},k(n)))),t?ie().createElement(an,{className:"robux-redesign-mobile-packages-table__redirect-button",product:e,isPrimary:C},a):ie().createElement(rn,{className:"robux-redesign-mobile-packages-table__button",onClick:function(){return S(e)},variant:C?"Emphasis":"Standard",size:"Medium"},a))})))}var dn,mn,pn,fn=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},bn=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function hn(t,n,r){return new Promise(function(e){(0,Fe.fireEvent)("API_COUNTER_"+t+"_"+n+"_"+(r||"Throughput")),e()})}function vn(t,n,e){var r=e.response;return new Promise(function(e){(0,Fe.fireEvent)("ERROR_COUNTER_"+t+"_"+n+"_"+((null==r?void 0:r.status)||"UnknownAxiosError")),e()})}function En(o,i,e,s,l){var c=e.feature,u=e.call;return fn(this,void 0,Promise,function(){var r,a;return bn(this,function(e){switch(e.label){case 0:hn(c,u),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,o===dn.GET?se.httpService.get(i,s):se.httpService.post(i,s)];case 2:return r=e.sent(),a=r.data,r=r.headers,hn(c,u,200),[2,(null==l?void 0:l(a,r))||a];case 3:return"config"in(a=e.sent())?vn(c,u,a):(t=c,n=u,new Promise(function(e){(0,Fe.fireEvent)("ERROR_COUNTER_"+t+"_"+n+"_NonAxiosError"),e()})),[2,void 0];case 4:return[2]}var t,n})})}(Cr=dn=dn||{}).GET="GET",Cr.POST="POST",(xr=mn=mn||{}).PAYMENT="Payment",xr.ROBUX="Robux",xr.ROBUX_GIFTING="RobuxGifting",xr.ROBUX_REDESIGN="RobuxRedesign",(Pr=pn=pn||{}).VERIFY_PHONE_VERIFICATION_SESSION="VerifyPhoneVerificationSession",Pr.LANDING_PAGE_METADATA="GetLandingPageMetadata",Pr.GET_USER_NAME="GetUserName",Pr.PREPARE_PAYMENT="PreparePayment",Pr.GET_METADATA="GetMetadata",Pr.GET_PRODUCTS="GetProducts",Pr.GET_PAYMENT_METHODS_INFO="GetPaymentMethodsInfo",Pr.GET_PURCHASE_WARNING="GetPurchaseWarning",Pr.GET_USER_PURCHASE_ELIGIBILITY="GetUserPurchaseEligibility",Pr.CREATE_PAYMENT_SESSION="CreatePaymentSession",Pr.GET_PAYMENT_SESSION="GetPaymentSession",Pr.GET_PAYMENT_SESSION_BY_CHECKOUT_SESSION_ID="GetPaymentSessionByCheckoutSessionId",Pr.CREATE_BONUS_SESSION="CreateBonusSession",Pr.GET_BONUS_SESSION_BY_CHECKOUT_SESSION_ID="GetBonusSessionByCheckoutSessionId",Pr.GET_THUMBNAILS="GetThumbnails",Pr.HANDLE_GAME_PASS_JOIN_EVENT="HandleGamePassJoinEvent",Pr.GET_ROBUX_BALANCE="GetRobuxBalance",Pr.GET_AUTH_TICKET="GetAuthTicket",Pr.GET_CLIENT_ASSERTION="GetClientAssertion";var gn=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},yn=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Sn=function(t){return gn(void 0,void 0,Promise,function(){return yn(this,function(e){return[2,En(dn.GET,{withCredentials:!0,url:fe.EnvironmentUrls.economyApi+"/v1/users/"+t+"/currency"},{feature:mn.ROBUX,call:pn.GET_ROBUX_BALANCE})]})})},wn=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Nn=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function Cn(e){var t=this;void 0===e&&(e=!1);var n=(0,oe.useState)(void 0),r=n[0],a=n[1],o=(0,oe.useCallback)(function(n){return wn(t,void 0,void 0,function(){var t;return Nn(this,function(e){switch(e.label){case 0:return[4,Sn(n)];case 1:return(t=e.sent())?(a(t.robux),[2]):[2]}})})},[]);return(0,oe.useEffect)(function(){fe.CurrentUser.userId&&o(fe.CurrentUser.userId)},[e]),r}function xn(e){var t=e.smallHeader,n=void 0!==t&&t,t=e.showWordmark,t=void 0===t||t,e=e.refetch,e=Cn(void 0!==e&&e);return ie().createElement("div",{className:"robux-amount-header","data-testid":"robux-amount-header"},t&&ie().createElement("span",{className:"icon-logo","data-testid":"robux-amount-header__icon-logo"}),void 0!==e&&ie().createElement("div",{className:Ge()("robux-amount-header__robux-balance-pill",{"robux-amount-header__robux-balance-pill--small":n})},ie().createElement("span",{className:Ge()("robux-amount-header__robux-icon",{"robux-amount-header__robux-icon--small":n})}),ie().createElement("p",{className:Ge()("robux-amount-header__robux-balance text-muted",{"robux-amount-header__robux-balance--small":n}),"data-testid":"robux-amount-header__robux-balance"},k(e))))}function Pn(){var e=(0,ce.useTranslation)().translate;return(0,oe.useEffect)(function(){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!1,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_REDIRECT_BANNER,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN)},[]),ie().createElement("div",{className:"ios-redirect-banner","data-testid":"ios-redirect-banner"},ie().createElement("div",{className:"ios-redirect-banner__header-container"},ie().createElement("span",{className:"ios-redirect-banner__robux-icon"}),ie().createElement("p",{className:"ios-redirect-banner__header text-emphasis"},e("Heading.GetUpTo25PercentMore"))),ie().createElement("p",{className:"ios-redirect-banner__body text-default"},e("Message.WebRedirect")),ie().createElement(an,{className:"ios-redirect-banner__button",isPrimary:!0},ie().createElement("div",{className:"ios-redirect-banner__button-content"},ie().createElement("span",{className:"ios-redirect-banner__redirect-icon"}),ie().createElement("p",{className:"ios-redirect-banner__button-body"},e("Action.Buy")))))}function _n(){var e=(0,ce.useTranslation)().translate,t=(0,oe.useContext)(F),n=t.showErrorModal,t=t.handleCloseErrorModal;return ie().createElement(De.Modal,{className:"login-redirect-failure-modal",show:n,onHide:t,size:"sm",centered:!0,scrollable:!1},ie().createElement(De.Modal.Header,{title:e("Message.SomethingWentWrong"),onClose:t}),ie().createElement(De.Modal.Body,{className:"body"},ie().createElement("p",null,e("Message.PleaseTryAgain"))))}var kn="Get a Gift Card",Tn="Enjoy 25% more Robux with Roblox gift cards";function Un(){_("RobuxRedesignGiftCardTable");var e,t=(0,ce.useTranslation)().translate,n=(e=ut().countryName,(0,oe.useMemo)(function(){switch(e){case"United Kingdom":return"uk";case"Australia":return"au";case"Canada":return"ca";case"France":return"fr";case"Germany":return"de";case"Spain":return"es";case"New Zealand":return"nz";case"Ireland":return"ie";case"Italy":return"it";case"Switzerland":return"ch";case"Netherlands":return"nl";case"Belgium":return"be";case"Japan":return"jp";case"Mexico":return"mx";case"Brazil":return"br";case"Austria":return"at";case"Finland":return"fi";case"Portugal":return"pt";case"Greece":return"gr";case"Poland":return"pl";case"South Africa":return"za";case"United Arab Emirates":return"ae";case"Saudi Arabia":return"sa";case"United States":default:return"us"}},[e])),r=(0,oe.useCallback)(function(){var e="buy-robux-android-2";window.open("/shopgiftcards?location="+n+"&ref="+e,"_blank"),le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE,!0,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.GIFT_CARD,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_NOW,{location:n,ref:e}),on(Jt.ROBUX,Zt.CLICK_GIFT_CARD)},[n]);return ie().createElement("div",{className:"robux-redesign-mobile-packages-table"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__packages-header-container"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__packages-title-container"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__packages-toggle-container"},ie().createElement("p",{className:"robux-redesign-mobile-packages-table__packages-title text-emphasis"},t("Label.GetGiftCard")||kn)))),ie().createElement("div",{className:Ge()("robux-redesign-mobile-packages-table__packages-container",{"robux-redesign-mobile-packages-table__packages-container--no-personalized-bonus":!0})},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__package"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__prices-container"},ie().createElement("div",{className:"robux-redesign-mobile-packages-table__price-container"},ie().createElement("p",{className:"robux-redesign-mobile-packages-table__gift-card-label"},t("Label.GiftCardMoreRobux")||Tn))),ie().createElement(rn,{className:"robux-redesign-mobile-packages-table__button",onClick:r,variant:"Standard",size:"Medium"},t("Action.BuyNowNoExclamation")))))}function An(){_("RobuxRedesignMobileTable");var e=(0,ce.useTranslation)().translate,t=(0,oe.useContext)(ue),a=t.classifiedProducts,n=t.classifiedUpsellProducts,o=(0,oe.useContext)(B).isSubscriber,r=(0,oe.useContext)(de).personalizedBonusItem,i=(0,oe.useContext)(me).iosRedesignMetadata,s=(0,oe.useMemo)(function(){var e=a.packages,t=a.upsellPackage,n=et(e,o),r=n.sort(function(e,t){return t.price.amount-e.price.amount}).reduce(function(e,t){var n=e[0],e=e[1];return t.isEligibleForBonuses?[Je(Je([],n),[t]),e]:[n,Je(Je([],e),[t])]},[[],[]]),e=r[0],r=r[1];return null!=i&&i.isUserEligibleForStacked&&n.sort(function(e,t){return t.price.amount-e.price.amount}),[e,r,t,n]},[a,o]),l=s[0],c=s[1],u=s[2],d=s[3],m=(0,oe.useMemo)(function(){var e=n.packages;return[n.upsellPackage,et(e,o).sort(function(e,t){return t.price.amount-e.price.amount})]},[n,o]),p=m[0],f=m[1],b=(0,oe.useMemo)(function(){return(null!=i&&i.isUserEligibleForStacked||null!=i&&i.isUserEligibleForToggle)&&p||u},[p,u,null==i?void 0:i.isUserEligibleForStacked,null==i?void 0:i.isUserEligibleForToggle]),h=(0,oe.useMemo)(function(){return[ye&&(null==i?void 0:i.isUserEligibleForIosRedirect),ye&&(null==i?void 0:i.isUserEligibleForStacked),ye&&(null==i?void 0:i.isUserEligibleForToggle)]},[null==i?void 0:i.isUserEligibleForIosRedirect,null==i?void 0:i.isUserEligibleForStacked,null==i?void 0:i.isUserEligibleForToggle]),t=h[0],s=h[1],m=h[2],h=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isAndroidApp},[]);return 0===d.length||null!=r&&r.isFetchingBonusItems?null:ie().createElement("div",{className:Ge()("robux-redesign-mobile-table",{"robux-redesign-mobile-table__stacked":s,"robux-redesign-mobile-table__toggle":m})},ie().createElement("div",{className:"robux-redesign-mobile-table__background"}),ye?ie().createElement("div",{className:"robux-redesign-mobile-table__header-container"},ie().createElement("p",{className:"robux-redesign-mobile-table__header--in-app text-emphasis"},e("Action.BuyRobux")),(null==i?void 0:i.isUserEligibleForIosRedirect)&&ie().createElement(Pn,null)):ie().createElement("div",{className:"robux-redesign-mobile-table__header-container"},ie().createElement(xn,{smallHeader:!0,showWordmark:!1}),ie().createElement("p",{className:"robux-redesign-mobile-table__header--mobile-web text-emphasis"},e("Message.MoreRobuxSamePrice")),ie().createElement("p",{className:"robux-redesign-mobile-table__sub-header text-emphasis",dangerouslySetInnerHTML:{__html:e("Message.MoreOnWeb",{boldStart:"<span>",boldEnd:"</span>"})}})),s?ie().createElement(ie().Fragment,null,ie().createElement(un,{packages:f,headerTranslationKey:"Heading.GetUpTo25PercentMore",subHeaderTranslationKey:"Message.YoullBeRedirected",isPrimaryTable:!0,shouldRedirect:!0}),ie().createElement(un,{packages:d,headerTranslationKey:"Message.StandardPackages"})):m?ie().createElement(un,{packages:f,withToggle:!0,packagesHiddenInitially:d,headerTranslationKey:"Heading.GetUpTo25PercentMore",subHeaderTranslationKey:"Message.YoullBeRedirected",toggledHeaderTranslationKey:"Message.StandardPackages",toggledSubHeaderTranslationKey:"Message.ToggleToGetMore",isPrimaryTable:!0,shouldRedirect:!0}):!ye&&null!=r&&r.bonusItemId?ie().createElement(ie().Fragment,null,ie().createElement(un,{packages:l,personalizedBonusItem:r,headerTranslationKey:r.bonusMessageTranslationKey,isPrimaryTable:!t}),ie().createElement(un,{packages:c,headerTranslationKey:"Message.StandardPackages"})):ie().createElement(un,{packages:d,headerTranslationKey:ye?"Message.StandardPackages":"Message.WebExclusivePackages",isPrimaryTable:!t}),!o&&b&&ie().createElement(un,{packages:[b],headerTranslationKey:"Message.PremiumPackages",hasRenderedBlueButton:t,shouldRedirect:s||m}),h&&ie().createElement(Un,null),ye?ie().createElement(ie().Fragment,null,ie().createElement(rt,null),ie().createElement(_n,null)):ie().createElement(L,null))}function Rn(){return fe.EnvironmentUrls.websiteUrl.includes("sitetest1")?"pk_test_51LNM0XG5RADBkfjhYJlpADA2ArzWIh7gTWTodYNbpEzSiT55dul3VJhaBIVHL0CNyO0gECOz1vPnWArAkjwQ8NBO00Cdf2PxED":fe.EnvironmentUrls.websiteUrl.includes("sitetest3")?"pk_test_51LNOeQHDRNiW7vlLcKH8TGCpJ7zhaidLdSegE22GCuvQbVUX2xDiGJY6WYaldYyo6qgVxmy1SnSVpSdaqyjfqclU00NQwWntIe":"pk_live_51LKpO9C8tJWGhK4HEHtny9Dg7xXiQJ1i349cq6KBDusbl8bRHO7QmCKKhX18LPjSirMNTvj3tesq6mhIQuPioeAd0062ZCgoF3"}function In(e){var t=e.children,n=(0,oe.useState)(null),e=n[0],r=n[1];return(0,oe.useEffect)(function(){Gn(void 0,void 0,void 0,function(){var t,n;return Ln(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=Rn(),[4,(0,Bn.loadStripe)(t)];case 1:return n=e.sent(),r(n),[3,3];case 2:return n=e.sent(),console.error("Can't load Stripe: ",n),[3,3];case 3:return[2]}})})},[]),e?ie().createElement(Fn.Elements,{stripe:e},t):ie().createElement(oe.Fragment,null)}function Mn(e){function n(e){l(e),o(e)}var t=e.error,a=e.paymentProfiles,r=e.robuxPackage,o=e.onSelectPaymentProfile,i=(0,ce.useTranslation)().translate,s=(e=(0,oe.useState)(a[0]||null))[0],l=e[1],c=(e=(0,oe.useState)(null))[0],u=e[1],d=(e=(0,oe.useState)(!1))[0],m=e[1],p=(0,oe.useRef)(null),f=(0,oe.useContext)(He).preparePaymentForQuickPay,b=(0,oe.useCallback)(function(){var e;null!==(e=p.current)&&void 0!==e&&e.scrollTop&&(p.current.scrollTop=0),m(!1)},[]);function h(e){var t=i("QuickPay.Expiration")||"Exp:";return ie().createElement("div",{className:"payment-method-container"},ie().createElement("span",{className:"payment-method-image card-icon "+function(e){switch(e.toLowerCase()){case"amex":case"americanexpress":return"icon-amex";case"discover":return"icon-discover";case"mastercard":return"icon-mastercard";case"visa":return"icon-visa";case"debit":return"icon-debit";default:return"icon-generic-card"}}(e.CardNetwork)}),ie().createElement("span",{className:"card-number"},ie().createElement("span",{className:"card-asterisk-mask"},"****"),ie().createElement("span",{className:"card-four-digits"},e.Last4Digits)),ie().createElement("span",{className:"card-exp-key"},t),ie().createElement("span",{className:"card-exp-value"},(t=e.ExpYear,e=e.ExpMonth,new Intl.DateTimeFormat("default",{year:"2-digit",month:"2-digit"}).format(new Date(t,e-1)))))}return(0,oe.useEffect)(function(){var e=a[0];e?null===c?(n(e),e=e.providerPayload,u(e)):(u(c),n(s)):(n(null),u(null))},[a,n,u,c,s]),e=function(t){var e=t.providerPayload;return ie().createElement("button",{type:"button",className:"dropdown-selection-button",key:t.id,onClick:function(){return n(e=t),u(e.providerPayload),f(r,e.id),void b();var e}},h(e))},ie().createElement("div",{className:"custom-select"},c&&ie().createElement(ie().Fragment,null,ie().createElement("button",{id:"select-card-dropdown-button",type:"button",role:"combobox",className:Ge()("select-button",{active:d,error:Boolean(t)}),"aria-labelledby":"select-card-dropdown-button","aria-haspopup":"listbox","aria-expanded":d,"aria-controls":"select-card-dropdown",onClick:function(){var e,t,n,r;1!==a.length&&(r=le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE,e=r.PAYMENT_METHOD_DROPDOWN,t=le.paymentFlowAnalyticsService.ENUM_VIEW_NAME,n=le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT,r=le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE,n=ye?n.WEBVIEW_ROBUX_PURCHASE:n.WEB_ROBUX_PURCHASE,le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(n,!0,t.PRODUCT_PURCHASE_QUICK_PAY,r.USER_INPUT,e),m(!d))}},h(c),ie().createElement("span",{className:d?"icon-up":"icon-down"})),ie().createElement("div",{id:"select-card-dropdown",role:"listbox",ref:p,className:Ge()("select-dropdown",{active:d})},a.filter(function(e){return e.id!==(null==s?void 0:s.id)}).map(e)),t&&ie().createElement("div",{className:"error-message"},t)))}function On(e){return e=e.isAnimating,ie().createElement("div",{className:"flex-container Placeholder "+(e?"Placeholder--animating":"")},ie().createElement("span",{className:"Text Text-color--gray400 Text-fontSize--14 Text--tabularNumbers"}),ie().createElement("span",null,"$0.00"))}var Bn=Ja(2949),Fn=Ja(5912),Gn=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Ln=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Dn=function(){return se.urlService.getAbsoluteUrl("/my/avatar")};function Hn(e,t){return t?{id:t.assetId,name:(n=e,(e=(e=t)&&e.translationKey)?n(e):""),thumbnail2dUrl:(e=t)&&e.thumbnail2dUrl||"",thumbnail3dUrl:(t=t)&&t.thumbnail3dUrl||""}:null;var n}function Wn(e){e=e.grantedAssetListItems;return 0<((null==e?void 0:e.length)||0)}function Vn(e){var t=e.price,e=e.color;return ie().createElement(ie().Fragment,null,ie().createElement("span",{className:"icon-robux"+(e?"-"+e:"")+"-16x16"}),ie().createElement("span",{className:"text-robux"},se.numberFormat.getNumberFormat(t)))}function zn(e){var t=e.className,n=e.robuxAmount,r=e.balance,e=(0,ce.useTranslation)().translate;return void 0===r?null:ie().createElement("span",{className:t,dangerouslySetInnerHTML:{__html:e("Message.BalanceAfterTransaction",{robuxBalance:(0,Kn.renderToString)(ie().createElement(Vn,{price:r+n,color:"gray"}))})}})}function jn(e){var t=e.className,n=e.item,e=(0,ce.useTranslation)().translate;return(n=n&&Hn(e,n))&&(n=n.thumbnail2dUrl)?ie().createElement("div",{className:Ge()("bonus-item-card-large",t)},ie().createElement("div",{className:"icon-upsell-item-large-preview",style:{backgroundImage:"url("+n+")"}})):null}function Xn(e){return(e=e.item)?(e=e.bonusItemId,ie().createElement("div",{className:"bonus-item-card-large"},ie().createElement("div",{className:"icon-upsell-item-large-preview"},ie().createElement(Xe.Thumbnail2d,{targetId:e,type:Xe.ThumbnailTypes.gamePassIcon,size:Xe.ThumbnailGamePassIconSize.size150,format:Xe.ThumbnailFormat.png})))):null}var Yn,qn,Kn=ReactDOMServer,Qn=Ja(3306),Jn=Ja.n(Qn),Zn=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},$n=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function er(e){var t=e.balance,n=e.show,c=e.onClose,r=e.robuxPackage,a=(0,ce.useTranslation)().translate,u=(0,oe.useContext)(He).quickPayPreparePaymentProviderPayload,d=(E=(0,oe.useContext)(me)).paymentSession,o=E.iosRedesignMetadata,m=(0,oe.useContext)(de).personalizedBonusItem,i=r.isEligibleForBonuses&&!(null==m||!m.bonusItemId),s=a("Message.OneClickPay.SuccessTitle"),l=Wn(r)?a("Message.OneClickPay.SuccessTextUpsellItem"):a("Message.OneClickPay.SuccessText"),p=a("Action.EquipItem");i?p=a("Action.JoinExperience"):null!=o&&o.isUserEligibleForIosRedesign&&(p=a("Action.ReturnToApp"));var f=a("Action.Close"),e=ie().createElement(zn,{className:"quick-pay-success-modal-footer",balance:t,robuxAmount:r.robuxAmount}),b=(0,oe.useCallback)(function(){window.location.href=Dn(),c()},[]),h=(0,oe.useCallback)(function(){return tr(void 0,void 0,void 0,function(){var o,i,s,l;return nr(this,function(e){switch(e.label){case 0:return m?(o=m.bonusItemId,i=m.rootPlaceId,l=null==u?void 0:u.checkoutSessionId,s="number"==typeof l?l.toString():"",l=(null==d?void 0:d.id)||"",[4,(t=o,n=i,r=s,a=l,Zn(void 0,void 0,Promise,function(){return $n(this,function(e){return[2,En(dn.POST,{withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-bonus-service/v1/handle-game-join-event"},{feature:mn.ROBUX,call:pn.HANDLE_GAME_PASS_JOIN_EVENT},{gamePassId:t,rootPlaceId:n,checkoutSessionId:r,paymentSessionId:a})]})}))]):[2];case 1:return e.sent(),c(),fe.PlayButton.launchGame(i,i,void 0,void 0,{eventName:"quickPayJoinGame",ctx:"quickPay",bonusItemId:o,rootPlaceId:i,paymentSessionId:l}),null!==(l=null===fe.Hybrid||void 0===fe.Hybrid?void 0:fe.Hybrid.Overlay)&&void 0!==l&&l.close(function(){}),[2]}var t,n,r,a})})},[m,d,u]),v=(0,oe.useCallback)(function(){on(Jt.ROBUX,Zt.RETURN_TO_APP),le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.MOBILE_WEB_ROBUX_PURCHASE,!1,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PRODUCT_PURCHASE_QUICK_PAY,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.RETURN_TO_APP),window.location.href="roblox://navigation/home"},[]),E=(0,oe.useMemo)(function(){return i||(null==o?void 0:o.isUserEligibleForIosRedesign)||Wn(r)},[i,o,r]),a=(0,oe.useMemo)(function(){return i||null!=o&&o.isUserEligibleForIosRedesign?N().Button.variants.growth:void 0},[i,o]),t=(0,oe.useMemo)(function(){return i?h:null!=o&&o.isUserEligibleForIosRedesign?v:b},[i,o,v,h,b]);return ie().createElement(De.SimpleModal,{show:n,actionButtonShow:E,title:s,body:ie().createElement("div",{className:"quick-pay-success-modal-body"},l,ie().createElement("div",{className:"image-container"},ie().createElement("img",{className:"image-thumb",src:Jn(),alt:""}),(Boolean(null===(l=r.grantedAssetListItems)||void 0===l?void 0:l[0])||i)&&ie().createElement("span",{className:"icon-plus"}),i?ie().createElement(Xn,{item:m}):ie().createElement(jn,{className:"image-thumb",item:null===(l=r.grantedAssetListItems)||void 0===l?void 0:l[0]}))),footerText:e,onClose:c,onAction:t,onNeutral:c,actionButtonText:p,neutralButtonText:f,actionButtonVariant:a})}(Yn=Yn||{}).GameThumbnail="GameThumbnail",(qn=qn||{}).Completed="Completed";var tr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},nr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function rr(e){var t=e.src,n=e.show,r=e.onClose,e=(0,(0,ce.useTranslation)().translate)("QuickPay.Authentication")||"Authentication";return ie().createElement(De.Modal,{show:n,onHide:r,size:"sm",centered:!0,scrollable:!1},ie().createElement(De.Modal.Header,{title:e,showCloseButton:!0,onClose:r}),ie().createElement("div",{className:"quick-pay-3ds-modal-content"},ie().createElement("iframe",{title:"3DS Modal",src:t,width:400,height:640,style:{border:0}})))}(Ar=mr=mr||{}).INCORRECT_CVC="incorrect_cvc",Ar.CARD_DECLINED="card_declined",Ar.EXPIRED_CARD="expired_card",Ar.INSUFFICIENT_FUNDS="insufficient_funds",Ar.BALANCE_INSUFFICIENT="balance_insufficient";var ar=mr,or=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ir=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function sr(e){var t=e.item,n=(0,ce.useTranslation)().translate;return t&&(e=Hn(n,t))?(t=e.name,e=e.thumbnail2dUrl,t||e?ie().createElement(oe.Fragment,null,ie().createElement("div",{className:"bonus-item-card-small"},ie().createElement("div",{className:"icon-upsell-item-small-preview",style:{backgroundImage:"url("+e+")"}}),ie().createElement("div",{className:"description-container"},ie().createElement("div",{className:"description-title"},t),ie().createElement("div",{className:"description-subtitle"},n("Message.OneClickPay.BonusVirtualItem"))))):null):null}function lr(e){var t=e.item,n=(0,ce.useTranslation)().translate;return t?(e=t.bonusItemId,t=t.bonusItemDisplayName,ie().createElement(oe.Fragment,null,ie().createElement("div",{className:"bonus-item-card-small"},ie().createElement("div",{className:"icon-upsell-item-small-preview"},ie().createElement(Xe.Thumbnail2d,{targetId:e,type:Xe.ThumbnailTypes.gamePassIcon,size:Xe.ThumbnailGamePassIconSize.size150,format:Xe.ThumbnailFormat.png})),ie().createElement("div",{className:"description-container"},ie().createElement("div",{className:"description-title"},t),ie().createElement("div",{className:"description-subtitle"},n("Message.OneClickPay.BonusVirtualItem")))))):null}function cr(e){function r(){return k(!0)}var t=e.show,a=e.closeModal,o=e.robuxPackage,i=(0,ce.useTranslation)().translate,n=(0,oe.useContext)(He),s=n.paymentProfiles,l=n.calculateTaxResponse,c=n.processPaymentForQuickPay,u=n.redirectToPurchase,d=n.checkoutSessionId,m=(0,oe.useContext)(de).personalizedBonusItem,p=(x=(0,oe.useContext)(me)).paymentSession,f=x.iosRedesignMetadata,b=o.isEligibleForBonuses&&(null==m?void 0:m.bonusItemId),h=Le.authenticatedUser.isAuthenticated,v=Le.authenticatedUser.id,E=(B=(0,oe.useState)(!1))[0],g=B[1],y=(_=(0,oe.useState)(0))[0],S=_[1],w=(0,oe.useState)(0),N=w[0],C=w[1],e=((T=(0,oe.useState)(null))[0],T[1]),x=(n=(0,oe.useState)(""))[0],P=n[1],_=(B=(0,oe.useState)(!1))[0],k=B[1],T=(w=(0,oe.useState)(void 0))[0],U=w[1],A=le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE,R=le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT,I=le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE,M=le.paymentFlowAnalyticsService.ENUM_VIEW_NAME,O=(0,oe.useCallback)(function(e,t){var n=ye?R.WEBVIEW_ROBUX_PURCHASE:R.WEB_ROBUX_PURCHASE;le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(n,!0,M.PRODUCT_PURCHASE_QUICK_PAY,e,t,{paymentSessionId:(null==p?void 0:p.id)||"",personalizedBonusItem:(null==m?void 0:m.bonusItemId)||"",productId:o.productId.toString()})},[p,m,o]),B=(n=function(a){function o(){s(""),r(!1)}var e=this,t=(0,oe.useState)(!1),n=t[0],r=t[1],i=(t=(0,oe.useState)(""))[0],s=t[1],l=(0,Fn.useStripe)(),c=(0,oe.useCallback)(function(r){return or(e,void 0,void 0,function(){var t,n;return ir(this,function(e){switch(e.label){case 0:if("3DS-authentication-complete"!==(null===(n=r.data)||void 0===n?void 0:n.type))return[2];if(!l)return[2];if(!i)return[2];if(!(n=null===(n=r.data)||void 0===n?void 0:n.url))return[2];if(n=new URLSearchParams(n),!(n=n.get("payment_intent_client_secret")))return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,l.retrievePaymentIntent(n)];case 2:return t=e.sent(),a({paymentIntentResult:t}),[3,4];case 3:return t=e.sent(),a({paymentIntentResult:void 0,error:t}),[3,4];case 4:return o(),[2]}})})},[a,i,l]);return(0,oe.useEffect)(function(){return window.addEventListener("message",c),function(){window.removeEventListener("message",c)}},[c]),[ie().createElement(rr,{src:i,show:n,onClose:o}),function(e){e&&(r(!0),s(e))}]}(function(e){!e.error&&e.paymentIntentResult&&!e.paymentIntentResult.error&&"succeeded"===e.paymentIntentResult.paymentIntent.status?d&&null!=f&&f.isUserEligibleForIosRedesign?window.location.href="/upgrades/checkout/success?checkoutSessionId="+d:(P(""),r(),a()):P(i("Message.QuickPay.GenericError"))}))[0],F=n[1],G=(0,ce.usePrevious)(t);return(0,oe.useEffect)(function(){t&&!G&&(g(!1),P(""),function(){pr(this,void 0,void 0,function(){var t;return fr(this,function(e){switch(e.label){case 0:return h?(U(void 0),[4,yt(v)]):[2];case 1:return t=e.sent().data,U(t.robux),[2]}})})}(),O(A.VIEW_SHOWN))},[t,G,h,v]),(0,oe.useEffect)(function(){null!==l?(P(""),l&&(S(kt(l.taxAmountExclusive.Units,l.taxAmountExclusive.Nanos)),C(kt(l.amountTotal.Units,l.amountTotal.Nanos)))):P(i("Message.QuickPay.GenericError"))},[l,i]),w=function(){O(A.USER_INPUT,I.CANCEL),a()},ie().createElement(ie().Fragment,null,ie().createElement(De.Modal,{show:t,onHide:w,size:"md",centered:!0,scrollable:!1},ie().createElement(De.Modal.Header,{title:i("Message.OneClickPay.Title"),showCloseButton:!0,onClose:w}),ie().createElement(De.Modal.Body,{className:"body"},ie().createElement("div",{className:"product"},ie().createElement("div",{className:"icon-wrapper"},ie().createElement("div",{className:null!=f&&f.isUserEligibleForIosRedesign?"icon-robux-redesign":"icon-robux-gold"}),ie().createElement("div",{className:"product-detail"},ie().createElement("div",{className:"product-name"},(n=o).defaultDisplayName||n.name),ie().createElement(Y,{tagClassName:"product-price",amount:o.price.amount,currencyCode:o.price.currency.currencyCode}))),Wn(o)&&ie().createElement(ie().Fragment,null,ie().createElement("span",{className:"icon-plus"}),ie().createElement(sr,{item:null===(n=o.grantedAssetListItems)||void 0===n?void 0:n[0]})),b&&ie().createElement(ie().Fragment,null,ie().createElement("span",{className:"icon-plus"}),ie().createElement(lr,{item:m}))),ie().createElement("div",{className:"price-info space-between-container"},ie().createElement("div",{className:"subtotal"},i("Message.OneClickPay.Subtotal")),ie().createElement(Y,{tagClassName:"subtotal-price",amount:o.price.amount,currencyCode:o.price.currency.currencyCode})),ie().createElement("div",{className:"tax-info space-between-container"},ie().createElement("div",{className:"tax"},void 0!==l?ie().createElement(ie().Fragment,null,ie().createElement("span",{className:"tax-text"},Mt(i,l)),ie().createElement(De.Popover,{id:"tax-popover",placement:"right",trigger:"click",button:ie().createElement("span",{className:"icon-moreinfo-16x16"})},i("Message.OneClickPay.TaxTooltip"))):ie().createElement(On,{isAnimating:!0})),void 0!==l?ie().createElement(Y,{tagClassName:"tax-price",amount:y,currencyCode:o.price.currency.currencyCode}):ie().createElement(On,{isAnimating:!0})),ie().createElement("div",{className:"divider"}),ie().createElement("div",{className:"space-between-container"},ie().createElement("div",{className:"total-due"},i("Message.OneClickPay.TotalDue")),void 0!==l?ie().createElement(Y,{tagClassName:"total-due-price",amount:N,currencyCode:o.price.currency.currencyCode}):ie().createElement(On,{isAnimating:!0})),ie().createElement("div",{className:"payment-method-info"},i("Message.OneClickPay.AmountChargedTo"),ie().createElement(Mn,{error:x,paymentProfiles:s,robuxPackage:o,onSelectPaymentProfile:e})),ie().createElement("div",{className:"use-a-different-payment-method"},ie().createElement("div",{role:"button",tabIndex:0,onClick:function(){O(A.USER_INPUT,I.USE_DIFFERENT_PAYMENT_METHOD),u(o),a()}},i("Message.OneClickPay.RedirectToOldFlow"))),ie().createElement("div",{className:"divider"}),ie().createElement(L,{disclosureType:"quickPay"})),ie().createElement(De.Modal.Footer,null,ie().createElement("div",{className:"loading"},E&&ie().createElement(De.Loading,null)),!E&&ie().createElement("div",{className:"modal-buttons"},ie().createElement(De.Button,{isDisabled:!l,className:"modal-button",variant:De.Button.variants.growth,width:De.Button.widths.min,size:De.Button.sizes.small,onClick:function(){return pr(void 0,void 0,void 0,function(){var t,n;return fr(this,function(e){switch(e.label){case 0:if(O(A.USER_INPUT,I.PAY_NOW),void 0===l)return[2];P(""),g(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,c(o.productId,1e6*o.price.amount)];case 2:if(t=e.sent().providerPayload,n=t.StripeErrorCode||""){switch(n){case ar.CARD_DECLINED:P(i("Message.QuickPay.CardDeclinedError"));break;case ar.EXPIRED_CARD:P(i("Message.QuickPay.ExpiredCardError"));break;case ar.INSUFFICIENT_FUNDS:case ar.BALANCE_INSUFFICIENT:P(i("Message.QuickPay.InsufficientFundsError"));break;default:P(i("Message.QuickPay.GenericError"))}return[2]}return t.redirectToUrl?(F(t.redirectToUrl),g(!1)):d&&null!=f&&f.isUserEligibleForIosRedesign?window.location.href="/upgrades/checkout/success?checkoutSessionId="+d:(r(),a(),g(!1)),[3,4];case 3:return e.sent(),P(i("Message.QuickPay.GenericError")),g(!1),[3,4];case 4:return[2]}})})}},i("Button.OneClickPay.PayNow")),ie().createElement(De.Button,{className:"modal-button",variant:De.Button.variants.control,width:De.Button.widths.min,size:De.Button.sizes.small,onClick:w},i("Button.OneClickPay.Cancel"))))),ie().createElement(er,{balance:T,show:_,onClose:function(){return k(!1)},robuxPackage:o}),B)}function ur(){var a=(0,ce.useTranslation)().translate,n=(y=(0,oe.useContext)(ue)).products,e=y.useLowCogsMessaging,i=(0,oe.useContext)(pe),t=(0,oe.useContext)(me),s=t.paymentSession,r=t.isFetchingMetadata,o=t.iosBuyRobuxRedesignExperiment,l=t.iosRedesignMetadata,c=(0,oe.useContext)(de).personalizedBonusItem,u=(A=(0,oe.useState)())[0],d=A[1],m=(C=(0,oe.useState)())[0],p=C[1],f=(W=(0,oe.useState)())[0],b=W[1],h=(L=(0,oe.useState)([]))[0],v=L[1],E=(k=(0,oe.useState)(void 0))[0],g=k[1],y=(U=(0,oe.useState)(""))[0],S=U[1],w=(t=(0,oe.useState)())[0],N=t[1],C=(A=(0,oe.useState)())[0],x=A[1],P=(W=(0,oe.useState)(!1))[0],_=W[1],k=(L=(0,oe.useState)(!1))[0],T=L[1],U=(0,oe.useCallback)(function(){return T(!1)},[]),A=(t=(0,oe.useState)(!1))[0],R=t[1],I=(W=(0,oe.useState)(!1))[0],M=W[1],O=(L=(0,oe.useState)(!1))[0],B=L[1],F=(t=(0,oe.useState)())[0],G=t[1],L=(W=(0,oe.useState)())[0],D=W[1],H=(0,oe.useRef)(""),W=(t=(0,De.createSystemFeedback)())[0],V=t[1],z=(0,oe.useCallback)(function(e){R(!0),p(e)},[]);function j(){return hr(void 0,void 0,void 0,function(){var n,t;return vr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Gt(void 0,void 0,Promise,function(){var t;return Lt(this,function(e){switch(e.label){case 0:return t={withCredentials:!0,url:fe.EnvironmentUrls.userSettingsApi+"/v1/user-settings/settings-and-options?requestedUserSettings=enablePurchases"},[4,se.httpService.get(t)];case 1:return[2,e.sent().data]}})})];case 1:return n=e.sent(),null!==(null===(t=null==n?void 0:n.enablePurchases)||void 0===t?void 0:t.options)&&0!==n.enablePurchases.options.length?n.enablePurchases.options.forEach(function(e){var t=e.requirement;e.option.optionValue!==n.enablePurchases.currentValue&&t===Rt.SelfUpdateSetting&&B(!0)}):B(!1),[3,3];case 2:return e.sent(),B(!1),[3,3];case 3:return[2]}})})}function X(){return hr(void 0,void 0,void 0,function(){var t;return vr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(n=Le.authenticatedUser.id,Gt(void 0,void 0,Promise,function(){var t;return Lt(this,function(e){switch(e.label){case 0:return[4,Dt(n,void 0,t=[])];case 1:return e.sent(),[2,t.find(function(e){return void 0!==(null===(e=null==e?void 0:e.consentData)||void 0===e?void 0:e.enablePurchases)})||null]}})}))];case 1:return t=e.sent(),G(t),[3,3];case 2:return e.sent(),M(!1),[3,3];case 3:return[2]}var n})})}function Y(){return hr(void 0,void 0,void 0,function(){var t;return vr(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,j()];case 1:return e.sent(),[4,X()];case 2:return e.sent(),[4,Gt(void 0,void 0,Promise,function(){return Lt(this,function(e){switch(e.label){case 0:return[4,fe.Guac.callBehaviour("texas-u18-vpc-optimization")];case 1:return[2,e.sent()]}})})];case 3:return null!=(t=e.sent())&&t.texasU18VPCOptimizationEnabled&&(Le.authenticatedUser.id%2==0||null!=t&&t.texasU18VPCOptimizationEnabledForEveryone)?M(t.texasU18VPCOptimizationEnabled):M(!1),[3,5];case 4:return e.sent(),M(!1),[3,5];case 5:return[2]}})})}function q(e){void 0!==(null==e?void 0:e.expirationTimeInMinutes)&&(le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_PREMIUM_PURCHASE,!0,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ECONOMIC_RESTRICTION_ERROR,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN),V.warning(function(e){var t=e.translate,n=e.violation,r=e.timeoutDurationInMinutes;if(24<(e=Math.ceil(r/60))){r=Math.ceil(e/24);return t("Text.EconomicRestrictionsDays",{violation:Ht(t,n),day:r})}return t("Text.EconomicRestrictionsHours",{violation:Ht(t,n),hour:e})}({translate:a,violation:e.failureReason,timeoutDurationInMinutes:e.expirationTimeInMinutes})))}function K(e){(e=null!=e?e:u)&&(window.location.href=function(e){if(!e)return"#";var t,n="";return n=(0,fe.DeviceMeta)().isAndroidApp?(t={id:e.mobileProductId.toLowerCase(),recurring:e.premiumFeatureTypeName===ve.SUBSCRIPTION&&!e.mobileProductId.endsWith(Ee.toLowerCase()),paymentSessionId:null==s?void 0:s.id},be.mobilePaymentUrl+Er(t)):(0,fe.DeviceMeta)().isAmazonApp||(0,fe.DeviceMeta)().isUWPApp?(t={id:e.mobileProductId.toLowerCase()},be.mobilePaymentUrl+Er(t)):(0,fe.DeviceMeta)().isIosApp?(t={id:e.mobileProductId,paymentSessionId:null==s?void 0:s.id},be.mobilePaymentUrl+Er(t)):(t={ap:e.productId,page:he,paymentSessionId:null==s?void 0:s.id},be.paymentPageUrl+Er(t)),se.urlService.getAbsoluteUrl(n)}(e))}function Q(e){var t;e&&(0,Fe.fireEvent)(Me+e.name.replace(/\s/g,"")),ge?(t={ap:null==e?void 0:e.productId,page:ve.ROBUX},t=be.paymentPageUrl+Er(t),window.location.href=se.urlService.getAbsoluteUrl(t)):ye&&(t=(null!==(t=null===(t=null==e?void 0:e.subscriptionTypeName)||void 0===t?void 0:t.toLowerCase().indexOf(Ee.toLowerCase()))&&void 0!==t?t:0)<0,(e=null!=e?e:u)&&((null==e?void 0:e.premiumFeatureTypeName)===ve.SUBSCRIPTION||t?(t=new Date,t=new Date(t.setMonth(t.getMonth()+1)),le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_PREMIUM_PURCHASE,!0,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PREMIUM_DISCLOSURES,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN),fe.PremiumDisclosures.PremiumDisclosuresService.show(e.name,a("Label.Monthly"),t,K,e.price.amount,e.price.currency.currencyCode)):(on(Jt.ROBUX,Zt.MOBILE_PURCHASE_REDIRECT),K(e))))}function J(){return hr(void 0,void 0,void 0,function(){var r;return vr(this,function(e){switch(e.label){case 0:return ge||!ye?[2,!0]:[4,(void 0===n&&(n=2e3),ze(void 0,void 0,void 0,function(){var t;return je(this,function(e){switch(e.label){case 0:t={url:fe.EnvironmentUrls.apiGatewayUrl+be.checkUserPurchaseWarningUrl,timeout:n,withCredentials:!0},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,se.httpService.post(t,{})];case 2:return[2,null==(t=e.sent())?void 0:t.data];case 3:return e.sent(),(0,Fe.fireEvent)(Ie),[2,null];case 4:return[2]}})}))];case 1:return r=e.sent(),void 0!==(t=r).expirationTimeInMinutes&&void 0!==t.failureReason&&void 0!==r.expirationTimeInMinutes?(q(r),[2,!1]):null!=r&&r.isEligible?[2,!0]:[4,X()];case 2:return e.sent(),[4,j()];case 3:return e.sent(),!I||F||O||(null==r?void 0:r.failureReason)!==Be?[3,5]:[4,hr(void 0,void 0,void 0,function(){return vr(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fe.AccessManagementUpsellV2Service.startAccessManagementUpsell({featureName:"CanChangeSetting",isAsyncCall:!1,usePrologue:!0,ampRecourseData:{enablePurchases:Tt.Enabled}})];case 1:return e.sent(),[4,X()];case 2:return e.sent(),[3,4];case 3:return e.sent(),M(!1),[3,4];case 4:return[2]}})})];case 4:return e.sent(),[2,!1];case 5:return I&&O&&(null==r?void 0:r.failureReason)===Be?(D({showVPCOptimization:I,userHasSelfDisabledPurchases:!0,open:!0,modalType:null==r?void 0:r.failureReason}),[2,!1]):(F||(null==r?void 0:r.failureReason)===Be?D({showVPCOptimization:I,userHasSelfDisabledPurchases:!1,open:!0,modalType:null==r?void 0:r.failureReason}):V.warning(a("Heading.GeneralError")),[2,!1])}var t,n})})}function Z(a){return hr(void 0,void 0,void 0,function(){var t;return vr(this,function(e){switch(e.label){case 0:return ge&&!i.isPurchaseWarningModalEnabled?[2,!1]:(t=!ge&&!a.isSubscriptionOnly&&a.premiumFeatureTypeName!==ve.SUBSCRIPTION,[4,(n=a.productId,void 0===(r=t)&&(r=!1),We(void 0,void 0,void 0,function(){var t;return Ve(this,function(e){switch(e.label){case 0:t={productId:n,is13To17ScaryModalEnabled:r},t={url:fe.EnvironmentUrls.apiGatewayUrl+be.purchaseWarningUrl+se.urlService.composeQueryString(t),withCredentials:!0},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,se.httpService.get(t)];case 2:return 404===(t=e.sent()).status?((0,Fe.fireEvent)(Re),[2,null]):[2,null==t?void 0:t.data];case 3:return e.sent(),(0,Fe.fireEvent)(Ae),[2,null];case 4:return[2]}})}))]);case 1:return(null==(t=e.sent())?void 0:t.action)===Se||(null==t?void 0:t.action)===we||(null==t?void 0:t.action)===Ne||ye&&(null==t?void 0:t.action)===Ce?(b({open:!0,action:null==t?void 0:t.action,robuxPackage:a}),[2,!0]):(null==t?void 0:t.action)===xe?(le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE,!0,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PURCHASE_WARNING,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN,le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.REQUIRE_EMAIL_VERIFICATION),fe.EmailVerificationService.handleUserEmailVerificationRequiredByPurchaseWarning(),[2,!0]):[2,!1]}var n,r})})}function $(t){return hr(void 0,void 0,void 0,function(){return vr(this,function(e){switch(e.label){case 0:return b({}),[4,Z(t)];case 1:return e.sent()?(on(Jt.ROBUX,Zt.STOPPED_PURCHASE_WARNING),[2]):(Q(t),[2])}})})}function ee(r,a){return void 0===a&&(a=null),hr(void 0,void 0,void 0,function(){var t,n;return vr(this,function(e){switch(e.label){case 0:(0,Fe.fireEvent)(Me+Oe+r.name.replace(/\s/g,"")),g(void 0),T(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),n=se.uuidService.generateRandomUuid(),H.current=n,t=h[0],t=null===a&&t?t.id:a,[4,mt(r.productId,"StripeCard",t,s)];case 2:if(t=e.sent().data,H.current!==n)return[2];if(null!==(n=t.providerPayload)&&void 0!==n&&n.redirectionPath)throw new Error("Stripe tax calculation error");return g(function(e){if(!e)return null;var t=null==(o=e.providerPayload)?void 0:o.taxCalculationId,n=null==o?void 0:o.amountTotal,r=null==o?void 0:o.taxAmountExclusive,a=null==o?void 0:o.billingCountryCode,e=null==o?void 0:o.taxType,o=null==o?void 0:o.taxPercentageDecimal;return n&&r?{taxCalculationId:t,amountTotal:n,taxAmountExclusive:r,billingCountryCode:a,taxType:e,taxPercentageDecimal:o}:null}(t)),N(t.providerPayload),x(t.checkoutSessionId),[3,4];case 3:return e.sent(),g(null),N(void 0),x(void 0),(0,Fe.fireEvent)(Me+Oe+r.name.replace(/\s/g,"")+Ue),1===h.length&&Q(r),[3,4];case 4:return[2]}})})}function te(o){return hr(void 0,void 0,void 0,function(){var t,n,r,a;return vr(this,function(e){switch(e.label){case 0:return p(o),on(Jt.ROBUX,Zt.START_PURCHASE),t=ye?le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE:le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,n=le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PRODUCT_PURCHASE,a=o.productId+","+o.name,P||o.premiumFeatureTypeName===ve.SUBSCRIPTION&&(n=le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PREMIUM_PURCHASE,t=ye?le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_PREMIUM_PURCHASE:le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_PREMIUM_PURCHASE),le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(t,!0,n,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,a,{paymentSessionId:(null==s?void 0:s.id)||"",personalizedBonusItem:(null==c?void 0:c.bonusItemId)||"",productId:(null===(a=o.productId)||void 0===a?void 0:a.toString())||""}),[4,J()];case 1:return e.sent()?(r=P&&!Ze(o),i.isVerificationUpsellEnabled?[4,(o.premiumFeatureTypeName===ve.SUBSCRIPTION?fe.EmailVerificationService.handleUserEmailUpsellAtPremiumSubscription:fe.EmailVerificationService.handleUserEmailUpsellAtBuyRobux)(function(){hr(void 0,void 0,void 0,function(){return vr(this,function(e){return[2,(r?ee:$)(o)]})})})]:[3,5]):(on(Jt.ROBUX,Zt.INELIGIBLE_PURCHASE),[2]);case 2:return e.sent().emailAddress?[4,(r?ee:$)(o)]:[3,4];case 3:e.sent(),e.label=4;case 4:return[3,7];case 5:return[4,(r?ee:$)(o)];case 6:e.sent(),e.label=7;case 7:return[2]}})})}function ne(t){return hr(void 0,void 0,void 0,function(){return vr(this,function(e){switch(e.label){case 0:return(0,fe.DeviceMeta)().isSamsungGalaxyStoreApp?(z(t),[2]):[4,te(t)];case 1:return e.sent(),[2]}})})}return(0,oe.useEffect)(function(){var e,t;ye&&(e=null==n?void 0:n.find(function(e){return e.subscriptionTypeName===Pe||e.subscriptionTypeName===ke}),t=null==n?void 0:n.find(function(e){return e.subscriptionTypeName===_e||e.subscriptionTypeName===Te}),d(null!=e?e:t))},[n]),(0,oe.useEffect)(function(){!function(){hr(this,void 0,void 0,function(){var t,n;return vr(this,function(e){switch(e.label){case 0:return(e.trys.push([0,4,,5]),ye)?(_(!1),[2]):(t=pt.BuyRobuxPage,se.urlService.getQueryParam("product_id")&&(0,fe.DeviceMeta)().isUniversalApp&&(t=pt.BuyRobuxPagePreselectedProduct),[4,vt(t)]);case 1:return n=e.sent().data,S(n.legalDisclosureTranslationKey),n.isUserEligible?[4,gt()]:[3,3];case 2:0<(n=e.sent().data).length&&(n.sort(function(e,t){return t.lastChargeTime-e.lastChargeTime}),_(!0),v(n)),e.label=3;case 3:return[3,5];case 4:return e.sent(),_(!1),[3,5];case 5:return[2]}})})}(),Y()},[]),(0,oe.useEffect)(function(){var e,t=null===(e=se.urlService.getQueryParam("product_id"))||void 0===e?void 0:e.toString();P&&(0,fe.DeviceMeta)().isUniversalApp&&t&&n&&h.length&&((e=n.find(function(e){return e.productId===parseInt(t,10)}))&&(T(!0),ne(e)))},[n,P,h]),t=null,r?t=null:null!=l&&l.isUserEligibleForIosRedesign?t=ie().createElement(An,null):ge?t=null!=c&&c.bonusItemId?ie().createElement(Ke,null):e?ie().createElement(Ot,null):ie().createElement(Nt,null):ye&&(t=o.shouldDelayRender?null:o.shouldRender?ie().createElement(An,null):(0,fe.DeviceMeta)().isSamsungGalaxyStoreApp?null!=c&&c.bonusItemId?ie().createElement(dt,null):ie().createElement(Bt,null):null!=c&&c.bonusItemId?ie().createElement(Vt,null):ie().createElement(xt,null)),ie().createElement("div",{className:Ge()("robux-page-content",{"robux-page-content__ios-redesign":o.shouldRender||!(null==l||!l.isUserEligibleForIosRedesign)})},ie().createElement(He.Provider,{value:{tryToPurchaseRobuxPackage:ne,purchaseRobuxPackage:te,preparePaymentForQuickPay:ee,redirectToPurchase:Q,processPaymentForQuickPay:function(r,a){return hr(void 0,void 0,void 0,function(){var t,n;return vr(this,function(e){switch(e.label){case 0:return[4,Et("StripeCard",w)];case 1:return t=e.sent().data,n=ye?le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEBVIEW_ROBUX_PURCHASE:le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,le.paymentFlowAnalyticsService.sendUserPurchaseStatusEvent(n,le.paymentFlowAnalyticsService.ENUM_PURCHASE_STATUS.SUCCESS,r+","+a,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PRODUCT_PURCHASE_QUICK_PAY),[2,t]}})})},paymentProfiles:h,calculateTaxResponse:E,legalDisclosureTranslationKey:y,quickPayPreparePaymentProviderPayload:w,displayMobilePaymentMethodModal:z,checkoutSessionId:C}},t,!ye&&P&&ie().createElement(In,null,m&&ie().createElement(cr,{show:k,closeModal:U,robuxPackage:m})),ie().createElement(zt,{show:A,closeModal:function(){return R(!1)},robuxPackage:m}),ie().createElement(re,br({},f)),ie().createElement(ae,br({},L)),ie().createElement(W,null)))}var dr,mr,pr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},fr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},br=function(){return(br=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},hr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},vr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Er=se.urlService.composeQueryString,gr={key:"Heading.Gifting.RequestRobuxBannerTitle",default:"Get the gift of Robux"},yr={key:"Message.Gifting.RequestRobuxBannerSubtitle",default:"Friends and family can buy you Robux, even if theyre not on Roblox."},Sr={key:"Heading.Gifting.RequestRobux",default:"Request Robux"},e={key:"Message.Gifting.RequestRobuxDescriptionLine1",default:"Let others scan your QR code with their device, or share the link below to request Robux directly to your account."},a={key:"Message.Gifting.RequestRobuxDescriptionLine2",default:"Note: your username and profile picture will be shared."},wr={key:"Action.Gifting.RequestRobux",default:"Request Robux"},Nr={key:"Message.Gifting.New",default:"New"},Cr={key:"Action.Gifting.ShareUrl",default:"Share"},xr={key:"Action.Gifting.CopyAndShareUrl",default:"Copy & share this link"},Pr={key:"Message.Gifting.UrlCopied",default:"Link copied!"},Qn={key:"Action.Gifting.Close",default:"Close"},_r="RobuxGiftingLandingPageHit",kr="RobuxGiftingLandingPageHitInvalidUser",Tr="RobuxGiftingUserSearchClickButton",Ur="RobuxGiftingUserSearchSelectResult",Ar={common:["Common.ExternalLinks","CommonUI.Controls","Common.PremiumFeatures","Feature.VerificationUpsell","Feature.GiftingProducts"],feature:"Feature.Premium"},Rr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Ir=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function Mr(r){return Rr(void 0,void 0,Promise,function(){var t,n;return Ir(this,function(e){return t={withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-gateway/v1/gifting/metadata"},n={recipientUserId:r},[2,se.httpService.get(t,n)]})})}(mr=dr=dr||{})[mr.Unspecified=0]="Unspecified",mr[mr.Eligible=1]="Eligible",mr[mr.Ineligible=2]="Ineligible",(mr={})[mr.Unspecified=0]="Unspecified",mr[mr.Eligible=1]="Eligible",mr[mr.Ineligible=2]="Ineligible",mr[mr.EligibleAndDoesNotRequiresPhoneVerificationSession=3]="EligibleAndDoesNotRequiresPhoneVerificationSession";var Or=function(){var e=(0,oe.useState)(""),t=e[0],n=e[1],r=(0,oe.useState)(""),a=r[0],o=r[1],i=(0,oe.useState)(""),s=i[0],l=i[1],c=le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT,u=c.WEB_ROBUX_GIFT_PURCHASE,d=c.WEB_ROBUX_PURCHASE,m=c.WEBVIEW_ROBUX_PURCHASE,p=le.paymentFlowAnalyticsService.ENUM_VIEW_NAME,f=p.ROBUX_GIFT_MESSAGE_SELECTION,b=p.ROBUX_GIFT_PRODUCT_SELECTION,h=p.ROBUX_GIFT_LANDING_PAGE,v=p.ROBUX_GIFT_BUNDLE_MESSAGE_PAGE,E=p.ROBUX_GIFT_PHONE_SUBMISSION,g=p.ROBUX_GIFT_PHONE_AUTHENTICATION,y=p.ROBUX_GIFT_REQUEST_BANNER,e=le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE,S=e.USER_INPUT,w=e.VIEW_SHOWN,r=le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE,N=r.GIFT_NOW,C=r.CHECKOUT,x=r.CONTINUE,P=r.VERIFY,_=r.REQUEST_ROBUX,k=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)()},[]),T=(0,oe.useMemo)(function(){return k.isAmazonApp||k.isUWPApp||k.isIosApp||k.isAndroidApp},[k]),i=(0,oe.useCallback)(function(){(0,Fe.fireEvent)(kr)},[]),c=(0,oe.useCallback)(function(){(0,Fe.fireEvent)(Tr)},[]),p=(0,oe.useCallback)(function(){(0,Fe.fireEvent)(Ur)},[]),e=(0,oe.useCallback)(function(e){e=(null==e?void 0:e.toString())||"";n(e),le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(u,!1,f,S,e,{requestorId:a,productId:s,message:e})},[u,f,S,a,s]),r=(0,oe.useCallback)(function(e){e=(null==e?void 0:e.toString())||"";l(e),le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(u,!1,b,S,void 0,{requestorId:a,productId:e,message:t})},[u,b,S,a,t]);return{setTrackingMessage:e,setTrackingRequestorId:(0,oe.useCallback)(function(e){e=e.toString();o(e),(0,Fe.fireEvent)(_r),le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(u,!1,h,w,void 0,{requestorId:e})},[u,h,w]),setTrackingProductId:r,trackInvalidUser:i,trackStartBundleMessageSelection:(0,oe.useCallback)(function(){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(u,!1,h,S,N,{requestorId:a})},[u,S,N,a]),trackStartPhoneVerification:(0,oe.useCallback)(function(){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(u,!1,v,S,C,{requestorId:a,productId:s,message:t})},[u,v,S,C,a,s,t]),trackSubmitPhoneNumber:(0,oe.useCallback)(function(){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(u,!1,E,S,x,{requestorId:a,productId:s,message:t})},[u,E,S,x,a,s,t]),trackAuthenticatePhoneNumber:(0,oe.useCallback)(function(){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(u,!1,g,S,P,{requestorId:a,productId:s,message:t})},[u,g,S,P,a,s,t]),trackRequestRobux:(0,oe.useCallback)(function(){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(T?m:d,!1,y,S,_)},[T,m,d,y,S,_]),trackClickUserSearchButton:c,trackSelectUserSearchResult:p}},Br=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Fr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function Gr(){var t=this,e=(0,oe.useState)(dr.Unspecified),n=e[0],a=e[1],r=(0,oe.useState)([]),o=r[0],i=r[1],e=(0,oe.useState)((l=fe.CurrentUser.userId,fe.EnvironmentUrls.websiteUrl+"/gift-robux?user="+l)),r=e[0],s=e[1],l=(0,oe.useState)(!1),e=l[0],c=l[1],u=Or().trackRequestRobux;(0,oe.useEffect)(function(){var e;e=n,fe.CurrentUser.isAuthenticated&&e===dr.Unspecified&&Br(t,void 0,Promise,function(){var t,n,r;return Fr(this,function(e){switch(e.label){case 0:if(!fe.CurrentUser.isAuthenticated)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Mr(fe.CurrentUser.userId)];case 2:return r=e.sent().data,t=r.recipientEligibilityType,n=r.messageForRecipientTranslationKeys,n=void 0===n?[]:n,r=r.giftingUrlWithPreselectedRecipientUserId,r=void 0===r?"":r,a(t),i(n),s(r),[3,4];case 3:return r=e.sent(),vn(mn.ROBUX_GIFTING,pn.LANDING_PAGE_METADATA,r),[3,4];case 4:return[2]}})})},[n]);return{eligibilityType:n,messageKeys:o,giftingUrl:r,onRequestRobux:function(){n===dr.Eligible&&(c(!0),u())},openModal:e,onModalClose:function(){c(!1)}}}var Lr=Ja(5574),Dr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Hr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Wr=Sr.key,Vr=Sr.default,zr=e.key,jr=e.default,Xr=a.key,Yr=a.default,qr=Cr.key,Kr=Cr.default,Qr=xr.key,Jr=xr.default,Zr=Pr.key,$r=Pr.default,ea=Qn.key,ta=Qn.default,na=(0,ce.withTranslations)(function(e){var n,r,t=e.open,a=e.onClose,o=e.giftingUrl,i=e.translate,s=(n=(d={giftingUrl:o}).giftingUrl,u=(0,oe.useState)(""),d=u[0],r=u[1],(0,oe.useEffect)(function(){!function(){Dr(this,void 0,void 0,function(){var t;return Hr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Lr.toDataURL(n,{errorCorrectionLevel:"H",width:316,margin:0})];case 1:return t=e.sent(),r(t),[3,3];case 2:throw t=e.sent(),new Error(t);case 3:return[2]}})})}()},[n]),{qrImgSrc:d,onCopyUrl:function(){n&&navigator.clipboard.writeText(n)},onShareLink:function(){n&&((0,fe.DeviceMeta)().isIosDevice||(0,fe.DeviceMeta)().isAndroidDevice||(0,fe.DeviceMeta)().isUniversalApp?null!==navigator&&void 0!==navigator&&navigator.share({url:n}):window.location.href="mailto:?body="+encodeURIComponent(n))}}),l=s.qrImgSrc,c=s.onShareLink,e=s.onCopyUrl,u=fe.CurrentUser.displayName,d=fe.CurrentUser.name,s=fe.CurrentUser.userId,d="@"+d;return ie().createElement(De.Modal,{className:"request-robux-modal",show:t,onHide:a,size:"md",centered:!0,scrollable:!1},ie().createElement(De.Modal.Header,{title:i(Wr)||Vr,showCloseButton:!0,onClose:a}),ie().createElement(De.Modal.Body,null,ie().createElement("div",{className:"description-container"},ie().createElement("div",{className:"description-line1"},i(zr)||jr),ie().createElement("div",{className:"description-line2"},i(Xr)||Yr)),ie().createElement("div",{className:"qr-code-container"},ie().createElement("div",{className:"qr-code-wrapper",style:{backgroundImage:"url("+l+")"}},ie().createElement("div",{className:"qr-code-profile-image"},ie().createElement(Xe.Thumbnail2d,{targetId:s,type:Xe.ThumbnailTypes.avatarHeadshot,size:Xe.ThumbnailAvatarHeadshotSize.size150,format:Xe.ThumbnailFormat.png}))),ie().createElement("div",{className:"user-info-container"},u&&ie().createElement("div",{className:"display-name"},u),d&&ie().createElement("div",{className:"name"},d))),ie().createElement("div",{className:"copy-url-container"},ie().createElement(De.TextFormField,{id:"copy-url-input",label:i(Qr)||Jr,value:o,fullWidth:!0,onClick:function(e){return e.target.select()}}),ie().createElement(De.Popover,{id:"url-copied-popover",placement:"left",trigger:"click",button:ie().createElement(De.Button,{className:"copy-url-button",variant:De.Button.variants.control,width:De.Button.widths.min,size:De.Button.sizes.small,onClick:e},ie().createElement("span",{className:"icon-share-link"}))},i(Zr)||$r))),ie().createElement(De.Modal.Footer,null,ie().createElement("div",{className:"modal-footer-buttons"},ie().createElement(De.Button,{variant:De.Button.variants.control,width:De.Button.widths.full,onClick:a},i(ea)||ta),ie().createElement(De.Button,{variant:De.Button.variants.growth,size:De.Button.sizes.medium,width:De.Button.widths.full,onClick:c},ie().createElement("span",{className:"icon-share-external"}),i(qr)||Kr))))},Ar),ra=gr.key,aa=gr.default,oa=yr.key,ia=yr.default,sa=wr.key,la=wr.default,ca=Nr.key,ua=Nr.default,da=(0,ce.withTranslations)(function(e){var t=e.translate,n=(0,oe.useContext)(me),r=n.isFetchingMetadata,a=n.iosRedesignMetadata,o=Gr(),i=o.eligibilityType,s=o.giftingUrl,e=o.onRequestRobux,n=o.openModal,o=o.onModalClose;return i!==dr.Eligible||r||null!=a&&a.isUserEligibleForIosRedesign?null:ie().createElement("div",{className:"gifting-products-banner-container"},ie().createElement("div",{className:"banner-content-container"},ie().createElement("div",{className:"banner-text-container"},ie().createElement("div",{className:"banner-new-label"},t(ca)||ua),ie().createElement("div",{className:"banner-text"},ie().createElement("div",{className:"banner-title"},t(ra)||aa),ie().createElement("div",{className:"banner-subtitle"},t(oa)||ia))),ie().createElement("div",{className:"banner-footer-container"},ie().createElement(De.Button,{className:"banner-action-button",variant:De.Button.variants.control,width:De.Button.widths.min,onClick:e},t(sa)||la))),ie().createElement("div",{className:"banner-image-container"},ie().createElement("div",{className:"banner-image"})),ie().createElement(na,{giftingUrl:s,open:n,onClose:o}))},Ar),ma=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},pa=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};(Ar={}).IOS_CLIENT="IosClient",Ar.ANDROID_CLIENT="AndroidClient";var fa=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ba=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ha="paymentSession-"+((null===fe.CurrentUser||void 0===fe.CurrentUser?void 0:fe.CurrentUser.userId)||"loggedout");function va(e){var t=this;void 0===e&&(e=!1);var e=(0,oe.useState)(e?void 0:le.localStorageService.getLocalStorage(ha)),n=e[0],a=e[1],r=(0,oe.useCallback)(function(r){return fa(t,void 0,void 0,function(){var n;return ba(this,function(e){switch(e.label){case 0:return r?[4,(t=r,ma(void 0,void 0,Promise,function(){return pa(this,function(e){return[2,En(dn.GET,{withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-gateway/v1/payment-sessions/"+t},{feature:mn.PAYMENT,call:pn.GET_PAYMENT_SESSION})]})}))]:[3,2];case 1:return n=e.sent(),[3,4];case 2:return[4,ma(void 0,void 0,Promise,function(){return pa(this,function(e){return[2,En(dn.POST,{withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-gateway/v1/payment-sessions"},{feature:mn.PAYMENT,call:pn.CREATE_PAYMENT_SESSION},{paymentFlowId:le.paymentFlowAnalyticsService.getPaymentFlowUuid()})]})})];case 3:n=e.sent(),e.label=4;case 4:return(n=n)?(le.localStorageService.setLocalStorage(ha,n.paymentSession),a(n.paymentSession),[2]):[2]}var t})})},[]);return(0,oe.useEffect)(function(){var e;n?new Date(n.expiresAt)<new Date&&r():(e=null===(e=se.urlService.getQueryParam("paymentSessionId"))||void 0===e?void 0:e.toString(),r(e))},[r,n]),n}var Ea,ga=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ya=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};(Ar=Ea=Ea||{})[Ar.Unspecified=0]="Unspecified",Ar[Ar.Control=1]="Control",Ar[Ar.Redesign=2]="Redesign",Ar[Ar.RedirectAndRedesign=3]="RedirectAndRedesign",Ar[Ar.Toggle=4]="Toggle",Ar[Ar.Stacked=5]="Stacked";var Sa=function(t){return void 0===t&&(t=fe.CurrentUser.userId),ga(void 0,void 0,Promise,function(){return ya(this,function(e){return[2,En(dn.GET,{withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-gateway/v1/feature/metadata"},{feature:mn.ROBUX,call:pn.GET_METADATA},{userId:t})]})})},wa=function(){return(wa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Na=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Ca=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function xa(e){var t=this,n=(0,oe.useState)(void 0),r=n[0],a=n[1],o=(0,oe.useState)(!e),n=o[0],i=o[1],s=(0,oe.useCallback)(function(){return Na(t,void 0,void 0,function(){var t,n;return Ca(this,function(e){switch(e.label){case 0:return[4,Sa()];case 1:return(t=e.sent())?(n=t.iosRedesignMetadata.eligibilityState,a(wa(wa({},t),{iosRedesignMetadata:{isUserEligibleForIosRedesign:n===Ea.Redesign||n===Ea.RedirectAndRedesign||n===Ea.Stacked||n===Ea.Toggle,isUserEligibleForIosRedirect:n===Ea.RedirectAndRedesign,isUserEligibleForStacked:n===Ea.Stacked,isUserEligibleForToggle:n===Ea.Toggle}})),i(!1),[2]):(i(!1),[2])}})})},[]);return(0,oe.useEffect)(function(){e||s()},[s,e]),wa(wa(wa({},r),e),{isFetchingMetadata:n})}var Pa,_a=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ka=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ta="buyRobuxCtx",Ua="buyRobuxProductId",Aa="paymentMethodsUpsellUuid";function Ra(e){var t=this,n=e.paymentSession,r=e.checkoutSessionId,a=e.products,o=e.page,i=xa(e.metadata).personalizedBonusMetadata,s=(0,oe.useState)(),l=s[0],c=s[1],u=(0,oe.useState)(!0),d=u[0],m=u[1],p=(0,oe.useState)(""),e=p[0],f=p[1],s=(0,oe.useState)(""),u=s[0],b=s[1],p=(0,oe.useState)(""),h=p[0],v=p[1],s=(0,oe.useState)(""),p=s[0],E=s[1],s=(0,oe.useMemo)(function(){return se.urlService.parseQueryString()},[]),g=s.ctx,y=s.product_id,S=s.UpsellUuid,s=(0,oe.useMemo)(function(){return[le.localStorageService.getLocalStorage(Ta),le.localStorageService.getLocalStorage(Ua),le.localStorageService.getLocalStorage(Aa)]},[]),w=s[0],N=s[1],C=s[2],x=(0,oe.useMemo)(function(){switch(o){case Pa.BuyRobux:return"upsell"===g||!!y;case Pa.PaymentMethods:return"upsell"===w||!!N||!!S;default:return"upsell"===w||!!N||!!C}},[o,g,y,S,w,N,C]),P=(0,oe.useMemo)(function(){return null==a?void 0:a.some(function(e){var t=e.isEligibleForBonuses,e=e.IsEligibleForBonuses;return t||e})},[a]),_=(0,oe.useMemo)(function(){return(null==i?void 0:i.isUserEligibleForPersonalizedBonus)&&P&&!x},[i,P,x]),k=(0,oe.useCallback)(function(e){var t;e&&(t=e[0])&&(e=t.gamePassPayload,t=t.bonus,c(t),e&&(b(e.experienceDisplayName),f(e.gamePassDisplayName),v(e.rootPlaceId))),m(!1)},[]),T=(0,oe.useCallback)(function(r){return _a(t,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return[4,(t=r,Zn(void 0,void 0,Promise,function(){return $n(this,function(e){return[2,En(dn.POST,{withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-bonus-service/v1/bonus-sessions"},{feature:mn.ROBUX,call:pn.CREATE_BONUS_SESSION},{paymentSessionId:t})]})}))];case 1:return n=e.sent(),k(null==n?void 0:n.selectedDisplayableBonuses),[2]}var t})})},[k]),U=(0,oe.useCallback)(function(r){return _a(t,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return[4,(t=r,Zn(void 0,void 0,Promise,function(){return $n(this,function(e){return[2,En(dn.GET,{withCredentials:!0,url:fe.EnvironmentUrls.apiGatewayUrl+"/payments-bonus-service/v1/checkout-session/"+t+"/payment-bonus"},{feature:mn.ROBUX,call:pn.GET_BONUS_SESSION_BY_CHECKOUT_SESSION_ID})]})}))];case 1:return n=e.sent(),k(null==n?void 0:n.selectedDisplayableBonuses),[2]}var t})})},[k]),A=(0,oe.useCallback)(function(r){return _a(t,void 0,void 0,function(){var n;return ka(this,function(e){switch(e.label){case 0:return[4,(t=r,Zn(void 0,void 0,Promise,function(){return $n(this,function(e){return[2,En(dn.POST,{withCredentials:!0,url:fe.EnvironmentUrls.thumbnailsApi+"/v1/batch"},{feature:mn.ROBUX,call:pn.GET_THUMBNAILS},[{requestId:t,targetId:t,type:Yn.GameThumbnail,size:"768x432",format:"png"}])]})}))];case 1:return(n=e.sent())?((n=n.data.find(function(e){return e.state===qn.Completed}))&&E(n.imageUrl),[2]):[2]}var t})})},[]);return(0,oe.useEffect)(function(){_&&null!=n&&n.id&&T(n.id)},[_,n,T]),(0,oe.useEffect)(function(){_&&r&&U(r)},[_,r,U]),(0,oe.useEffect)(function(){h&&A(h)},[A,h]),(0,oe.useEffect)(function(){o===Pa.BuyRobux&&(g?le.localStorageService.setLocalStorage(Ta,g):le.localStorageService.removeLocalStorage(Ta))},[o,g]),(0,oe.useEffect)(function(){o===Pa.BuyRobux&&(y?le.localStorageService.setLocalStorage(Ua,y):le.localStorageService.removeLocalStorage(Ua))},[o,y]),(0,oe.useEffect)(function(){o===Pa.PaymentMethods&&(S?le.localStorageService.setLocalStorage(Aa,S):le.localStorageService.removeLocalStorage(Aa))},[o,S]),(0,oe.useEffect)(function(){(!1===(null==i?void 0:i.isUserEligibleForPersonalizedBonus)||null!=a&&a.length&&!1===P||x)&&m(!1)},[i,a,P,x]),{bonusItemId:(null==l?void 0:l.virtualPurchasingProductTargetId.toString())||"",isFetchingBonusItems:d,bonusItemDisplayName:e,experienceDisplayName:u,rootPlaceId:h,thumbnailUrl:p,bonusMessageTranslationKey:(null==i?void 0:i.bonusMessageTranslationKey)||""}}(Ar=Pa=Pa||{}).BuyRobux="BuyRobux",Ar.PaymentMethods="PaymentMethods";var Ia,Ma=["header-height","rbx-navbar-display","navigation-top","container-main-margin-top","content-padding-top"],Oa=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Ba=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Fa=function(t,n,r){return Oa(this,void 0,Promise,function(){return Ba(this,function(e){switch(e.label){case 0:return[4,fe.ExperimentationService.getAllValuesForLayer(n)];case 1:return[2,e.sent()[t+"Variant"]||r]}})})},Ga=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},La=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function Da(){var e=function(e,t,n){var o=this,r=(s=(0,oe.useState)(n))[0],i=s[1],a=(0,oe.useState)(!0),s=a[0],l=a[1],c=(0,oe.useCallback)(function(n,r,a){return Ga(o,void 0,void 0,function(){var t;return La(this,function(e){switch(e.label){case 0:return t=i,[4,Fa(n,r,a)];case 1:return t.apply(void 0,[e.sent()]),l(!1),[2]}})})},[]);return(0,oe.useEffect)(function(){c(e,t,n)},[c,e,t,n]),{variant:r,isFetchingVariant:s}}("IosBuyRobuxRedesign","Payments.BuyRobux.iOSRedesign",Ia.Control),t=e.variant,n=e.isFetchingVariant;return{shouldRender:(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isIosApp&&t===Ia.Redesign},[t]),shouldDelayRender:(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isIosApp&&n},[n])}}(Ar=Ia=Ia||{}).Control="Control",Ar.Redesign="Redesign";var Ha=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Wa=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Va=function(){return Ha(void 0,void 0,Promise,function(){var n;return Wa(this,function(e){switch(e.label){case 0:return[4,Ha(void 0,void 0,Promise,function(){return Wa(this,function(e){return[2,En(dn.GET,{withCredentials:!0,url:fe.EnvironmentUrls.authApi+"/v1/client-assertion/"},{feature:mn.ROBUX_REDESIGN,call:pn.GET_CLIENT_ASSERTION})]})})];case 1:return n=e.sent(),[2,(t=null==n?void 0:n.clientAssertion,Ha(void 0,void 0,Promise,function(){return Wa(this,function(e){return[2,En(dn.POST,{withCredentials:!0,url:fe.EnvironmentUrls.authApi+"/v1/authentication-ticket/"},{feature:mn.ROBUX_REDESIGN,call:pn.GET_AUTH_TICKET},{clientAssertion:t},function(e,t){return t["rbx-authentication-ticket"]})]})}))]}var t})})},za=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ja=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Xa=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Ya=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},qa=function(){var r=va(!0),e=xa(),a=e.isFetchingMetadata,t=e.iosRedesignMetadata,n=e.legalDisclosureMetadata,o=Da(),i=Cn(),s=function(r,a){var o=this,i=(t=(0,oe.useState)(""))[0],s=t[1],e=(n=(0,oe.useState)(!1))[0],l=n[1],c=(0,oe.useCallback)(function(e,t){var n=e.id,r=t.isUserEligibleForStacked,a=t.isUserEligibleForToggle;return za(o,void 0,void 0,function(){var t;return ja(this,function(e){switch(e.label){case 0:return[4,Va()];case 1:return(t=e.sent())?(t=se.urlService.composeQueryString({at:t,ctx:"redirect",tuid:fe.CurrentUser.userId,analyticId:le.paymentFlowAnalyticsService.purchaseFlowUuid,paymentSessionId:n,returnUrl:r||a?"/upgrades/paymentmethods":"/upgrades/robux"}),s("/login-redirect?"+t),[2]):(s(""),[2])}})})},[]),t=(0,oe.useCallback)(function(){l(!1)},[]),n=(0,oe.useCallback)(function(e,t){if(r&&a){if(""===i)return e.preventDefault(),c(r,a),void l(!0);var n;on(Jt.ROBUX,Zt.MOBILE_REDIRECT),n=t?t.premiumFeatureTypeName===ve.SUBSCRIPTION?le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PREMIUM_PURCHASE:le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PRODUCT_PURCHASE:le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_REDIRECT_BANNER,le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!1,n,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,le.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_REDIRECT,{productId:(null==t?void 0:t.productId.toString())||""}),c(r,a)}else e.preventDefault()},[r,a,i,c]),u=(0,oe.useMemo)(function(){return(0,fe.DeviceMeta)().isIosApp||(0,fe.DeviceMeta)().isAndroidApp},[]);return(0,oe.useEffect)(function(){u&&r&&a&&c(r,a)},[u,r,a,c]),{redirectUrl:i,showErrorModal:e,handleCloseErrorModal:t,handleRedirectClick:n}}(r,t),l=(0,oe.useState)([]),c=l[0],u=l[1],d=(0,oe.useState)([]),m=d[0],p=d[1],f=(0,oe.useState)(!1),b=f[0],h=f[1],v=(0,oe.useState)(!1),E=v[0],g=v[1],y=(0,oe.useState)(!1),S=y[0],w=y[1],l=(0,oe.useState)(null),N=l[0],C=l[1],d=(0,oe.useState)(!1),x=d[0],P=d[1],f=(0,oe.useState)(!1),_=f[0],k=f[1],T=Ra({paymentSession:r,products:c,page:Pa.BuyRobux,metadata:e}),U=(0,oe.useMemo)(function(){return $e(c)},[c]),A=(0,oe.useMemo)(function(){return $e(m)},[m]),v=(0,oe.useMemo)(function(){var e=null===(e=document.getElementById("robux-container-base"))||void 0===e?void 0:e.dataset;return{isPurchaseWarningModalEnabled:"true"===(null==e?void 0:e.isScaryModalEnabled),isVerificationUpsellEnabled:"true"===(null==e?void 0:e.isVerificationUpsellEnabled)}},[]),y=(0,oe.useMemo)(function(){return{products:c,classifiedProducts:U,classifiedUpsellProducts:A,useLowCogsMessaging:b,underHighCogsPricingTest:E,underPriceTestingExperiment:S}},[c,U,A,b,E,S]),l=(0,oe.useMemo)(function(){return{isSubscriber:x,userPlan:N}},[x,N]),d=(0,oe.useMemo)(function(){return{paymentSession:r,isFetchingMetadata:a,iosRedesignMetadata:t,iosBuyRobuxRedesignExperiment:o,legalDisclosureMetadata:n}},[r,a,t,o,n]),f=(0,oe.useMemo)(function(){return{personalizedBonusItem:T}},[T]),e=(0,oe.useMemo)(function(){return s},[s]),R=(0,oe.useMemo)(function(){return null!=t&&t.isUserEligibleForStacked?"ios-redirect.stacked":null!=t&&t.isUserEligibleForToggle?"ios-redirect.toggle":null!=t&&t.isUserEligibleForIosRedirect?"ios-redirect.redirect-and-redesign":null!=t&&t.isUserEligibleForIosRedesign?"ios-redirect.redesign-only":o.shouldRender?"ios-redesign":T.bonusItemId?"bonus-item":""},[t,o,T.bonusItemId]),I=(0,oe.useCallback)(function(){return Xa(void 0,void 0,void 0,function(){var r;return Ya(this,function(e){switch(e.label){case 0:return[4,V(void 0,void 0,void 0,function(){var t;return z(this,function(e){switch(e.label){case 0:t={url:fe.EnvironmentUrls.premiumFeaturesApi+be.productsUrl,withCredentials:!0},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,se.httpService.get(t)];case 2:return[2,e.sent().data];case 3:return e.sent(),(0,Fe.fireEvent)(G),[2,null];case 4:return[2]}})})];case 1:return(r=e.sent())?(u(r.products),h((t=r.products,n=!1,t.forEach(function(e){W.includes(e.robuxAmount)&&(n=!0)}),n)),g(r.underHighCogsExperiment),w(r.underPriceTestingExperiment),p(r.webProducts||[]),[2]):[2]}var t,n})})},[]),M=(0,oe.useCallback)(function(){return Xa(void 0,void 0,void 0,function(){var t;return Ya(this,function(e){switch(e.label){case 0:return[4,j(void 0,void 0,void 0,function(){var t;return X(this,function(e){switch(e.label){case 0:t={url:fe.EnvironmentUrls.premiumFeaturesApi+be.userStatusUrl.replace("{userid}",fe.CurrentUser.userId),withCredentials:!0},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,se.httpService.get(t)];case 2:return 404===(t=e.sent()).status?((0,Fe.fireEvent)(H),[2,null]):[2,null==t?void 0:t.data];case 3:return e.sent(),(0,Fe.fireEvent)(D),[2,null];case 4:return[2]}})})];case 1:return t=e.sent(),C(null==t?void 0:t.subscriptionProductModel),P(Object.prototype.hasOwnProperty.call(null!==(t=null==t?void 0:t.subscriptionProductModel)&&void 0!==t?t:{},"subscriptionTypeName")),[2]}})})},[]);return(0,oe.useEffect)(function(){M(),I()},[M,I]),(0,oe.useEffect)(function(){var e;t&&(e=t.isUserEligibleForIosRedesign,(0,fe.DeviceMeta)().isInApp?document.documentElement.style.setProperty("--container-main-margin-top","var(--container-main-margin-top-mobile-var"):e&&Ma.forEach(function(e){document.documentElement.style.setProperty("--"+e,"var(--"+e+"-var")}))},[t]),(0,oe.useEffect)(function(){var e,t,n;_||0===U.packages.length||void 0===i||a||o.shouldDelayRender||T.isFetchingBonusItems||!r||(k(!0),t=et(U.packages,x).map(function(e){return e.productId}),null!==(e=U.upsellPackage)&&void 0!==e&&e.productId&&t.push(U.upsellPackage.productId),n=et(A.packages,x).map(function(e){return e.productId}),null!==(e=A.upsellPackage)&&void 0!==e&&e.productId&&n.push(A.upsellPackage.productId),le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!0,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PRODUCT_PURCHASE,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN,void 0,{pageVariant:R,robuxBalance:i.toString(),robuxPackageIds:t.toString(),webRobuxPackageIds:n.toString(),bonusItemId:T.bonusItemId,paymentSessionId:r.id}))},[_,U,A,i,a,o.shouldDelayRender,T,r,R,x]),(0,oe.useEffect)(function(){le.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(le.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!0,le.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PRODUCT_PURCHASE_LOADING,le.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.VIEW_SHOWN)},[]),ie().createElement("div",{id:"robux-upsell-react-page-wrapper",className:b?"low-cogs-container":""},ie().createElement(ce.TranslationProvider,{config:Ye},ie().createElement(pe.Provider,{value:v},ie().createElement(ue.Provider,{value:y},ie().createElement(B.Provider,{value:l},ie().createElement(me.Provider,{value:d},ie().createElement(de.Provider,{value:f},ie().createElement(F.Provider,{value:e},ie().createElement(da,null),ie().createElement(O,null),ie().createElement(ur,null)))))))))};function Ka(){var e=document.getElementById(n);e?(0,t.render)(ie().createElement(qa,null),e):window.requestAnimationFrame(Ka)}function Qa(){var e=document.getElementById(r);e?(0,t.render)(ie().createElement(qa,null),e):window.requestAnimationFrame(Qa)}(0,se.ready)(function(){window.addEventListener("robux-upsell-react-page:render",function(){Ka()}),Qa()})}()}();
//# sourceMappingURL=https://sourcemaps.rbxcdn.com/5c8714c9cce71e5e2f25596f02f749c4-robuxUpsellReactPage.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("RobuxUpsellReactPage");